<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>UNICORN Shop - Магазин одежды и обуви</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Все стили остаются без изменений */
        :root {
            --primary: #8A2BE2;
            --primary-light: #9D4EDD;
            --secondary: #FF6B6B;
            --accent: #FFD166;
            --success: #4CAF50;
            --warning: #FF9800;
            --info: #2196F3;
            --dark: #1A1A1A;
            --light: #F8F9FA;
            --gray: #6C757D;
            --light-gray: #E9ECEF;
            --border: #DEE2E6;
            --shadow: 0 2px 12px rgba(0,0,0,0.08);
            --radius: 12px;
            --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
            -webkit-text-size-adjust: 100%;
            touch-action: manipulation;
            background: white;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: white;
            color: var(--dark);
            line-height: 1.5;
            position: relative;
            overscroll-behavior: none;
        }

        .container {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            padding: 0 15px;
        }

        @media (min-width: 768px) {
            .container {
                max-width: 720px;
                padding: 0 20px;
            }
        }

        @media (min-width: 992px) {
            .container {
                max-width: 960px;
            }
        }

        @media (min-width: 1200px) {
            .container {
                max-width: 1140px;
            }
        }

        /* Header */
        .header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: white;
            border-bottom: 1px solid var(--border);
            z-index: 1000;
            height: 60px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
        }

        .header-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 100%;
            padding: 0 15px;
            gap: 10px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            text-decoration: none;
            flex-shrink: 0;
        }

        .logo-icon {
            font-size: 22px;
            color: var(--primary);
        }

        .logo-text {
            font-size: 20px;
            font-weight: 700;
            color: var(--primary);
            white-space: nowrap;
        }

        .search-container {
            flex: 1;
            max-width: 100%;
            position: relative;
        }

        @media (max-width: 480px) {
            .search-container {
                display: none;
            }
        }

        .search {
            width: 100%;
            padding: 10px 15px;
            padding-left: 40px;
            border: 1px solid var(--border);
            border-radius: 20px;
            font-size: 14px;
            background: var(--light);
            -webkit-appearance: none;
        }

        .search:focus {
            outline: none;
            border-color: var(--primary);
            background: white;
        }

        .search-icon {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray);
            font-size: 14px;
        }

        .header-actions {
            display: flex;
            align-items: center;
            gap: 12px;
            flex-shrink: 0;
        }

        .action-btn {
            position: relative;
            background: none;
            border: none;
            color: var(--dark);
            font-size: 18px;
            cursor: pointer;
            padding: 8px;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.2s ease;
        }

        .action-btn:active {
            background: var(--light);
            transform: scale(0.95);
        }

        .badge {
            position: absolute;
            top: -2px;
            right: -2px;
            background: var(--secondary);
            color: white;
            font-size: 10px;
            font-weight: 600;
            min-width: 18px;
            height: 18px;
            border-radius: 9px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 4px;
        }

        .user-menu {
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            padding: 6px 10px;
            border-radius: 20px;
            transition: background 0.2s ease;
        }

        .user-menu:active {
            background: var(--light);
        }

        .user-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
            font-size: 14px;
            flex-shrink: 0;
        }

        /* Main Navigation */
        .main-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            border-top: 1px solid var(--border);
            z-index: 1000;
            height: 65px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            padding-bottom: env(safe-area-inset-bottom, 0);
        }

        .nav-container {
            display: flex;
            height: 100%;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-decoration: none;
            color: var(--gray);
            font-size: 10px;
            gap: 4px;
            padding: 8px 0;
            transition: color 0.2s ease;
            -webkit-tap-highlight-color: transparent;
        }

        .nav-item i {
            font-size: 18px;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item:active {
            opacity: 0.7;
        }

        /* Main Content */
        .main-content {
            padding: 70px 0 75px;
            min-height: 100vh;
            width: 100%;
            overflow-x: hidden;
            background: white;
        }

        /* Admin Toggle Button */
        .admin-toggle {
            position: fixed;
            top: 15px;
            left: 15px;
            z-index: 9999;
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: transform 0.2s ease;
        }

        .admin-toggle:active {
            transform: scale(0.95);
        }

        /* Banner */
        .banner {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
            width: 100%;
        }

        .banner-content {
            position: relative;
            z-index: 2;
        }

        .banner-badge {
            display: inline-block;
            background: var(--secondary);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 12px;
        }

        .banner-title {
            font-size: 20px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .banner-subtitle {
            font-size: 13px;
            opacity: 0.9;
            margin-bottom: 16px;
            line-height: 1.4;
        }

        .banner-unicorn {
            position: absolute;
            right: 10px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 60px;
            opacity: 0.2;
        }

        @media (max-width: 350px) {
            .banner-unicorn {
                display: none;
            }
        }

        /* Categories */
        .categories-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 24px;
            width: 100%;
        }

        @media (min-width: 480px) {
            .categories-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 768px) {
            .categories-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 16px;
            }
        }

        .category-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            cursor: pointer;
            position: relative;
            aspect-ratio: 1;
            transition: transform 0.2s ease;
            width: 100%;
        }

        .category-card:active {
            transform: scale(0.98);
        }

        .category-image {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .category-content {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 12px;
            color: white;
        }

        .category-title {
            font-size: 14px;
            font-weight: 600;
            margin-bottom: 4px;
            line-height: 1.2;
        }

        .category-count {
            font-size: 11px;
            opacity: 0.9;
        }

        /* Products Grid */
        .products-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 30px;
            width: 100%;
        }

        @media (min-width: 480px) {
            .products-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (min-width: 768px) {
            .products-grid {
                grid-template-columns: repeat(3, 1fr);
                gap: 16px;
            }
        }

        @media (min-width: 992px) {
            .products-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .product-card {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            transition: transform 0.2s ease;
            position: relative;
            width: 100%;
            cursor: pointer;
        }

        .product-card:active {
            transform: scale(0.98);
        }

        .product-image-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 100%;
            background: var(--light-gray);
            overflow: hidden;
        }

        .product-image {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .wishlist-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 32px;
            height: 32px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.95);
            border: none;
            color: var(--gray);
            font-size: 16px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
            transition: all 0.2s ease;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .wishlist-btn:active {
            transform: scale(0.9);
        }

        .wishlist-btn.active {
            color: var(--secondary);
        }

        .product-content {
            padding: 12px;
        }

        .product-brand {
            font-size: 11px;
            color: var(--gray);
            margin-bottom: 4px;
            font-weight: 500;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .product-title {
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 8px;
            height: 36px;
            overflow: hidden;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            line-height: 1.3;
        }

        .product-price {
            display: flex;
            align-items: center;
            gap: 6px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .current-price {
            font-size: 16px;
            font-weight: 700;
            color: var(--dark);
        }

        .old-price {
            font-size: 12px;
            color: var(--gray);
            text-decoration: line-through;
        }

        .discount {
            color: var(--secondary);
            font-size: 11px;
            font-weight: 600;
            background: rgba(255, 107, 107, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .add-to-cart {
            width: 100%;
            padding: 10px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 6px;
            transition: background 0.2s ease;
            -webkit-appearance: none;
        }

        .add-to-cart:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        .add-to-cart.added {
            background: var(--success);
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            width: 100%;
        }

        .empty-icon {
            font-size: 48px;
            color: var(--light-gray);
            margin-bottom: 16px;
        }

        .empty-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--dark);
        }

        .empty-text {
            color: var(--gray);
            margin-bottom: 24px;
            max-width: 280px;
            margin-left: auto;
            margin-right: auto;
            font-size: 14px;
            line-height: 1.4;
        }

        /* Profile Page */
        .profile-header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            margin: -15px -15px 20px;
            border-radius: 0 0 var(--radius) var(--radius);
            width: calc(100% + 30px);
        }

        @media (min-width: 768px) {
            .profile-header {
                margin: -20px -20px 20px;
                width: calc(100% + 40px);
            }
        }

        .profile-avatar {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            color: var(--primary);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-weight: 600;
            margin: 0 auto 16px;
            border: 4px solid rgba(255, 255, 255, 0.2);
        }

        .profile-name {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
        }

        .profile-phone {
            opacity: 0.9;
            font-size: 14px;
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        @media (min-width: 480px) {
            .profile-stats {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .stat-value {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 4px;
        }

        .stat-label {
            font-size: 11px;
            color: var(--gray);
        }

        .profile-menu {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            overflow: hidden;
            margin-bottom: 20px;
        }

        .menu-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 18px;
            text-decoration: none;
            color: var(--dark);
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .menu-item:last-child {
            border-bottom: none;
        }

        .menu-item:active {
            background: var(--light);
        }

        .menu-icon {
            color: var(--primary);
            font-size: 18px;
            margin-right: 12px;
            min-width: 24px;
        }

        .menu-text {
            flex: 1;
            font-size: 15px;
        }

        .menu-value {
            color: var(--gray);
            font-size: 13px;
            margin-left: 10px;
        }

        /* Section Header */
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
            width: 100%;
        }

        .section-title {
            font-size: 18px;
            font-weight: 700;
            line-height: 1.2;
        }

        /* Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            display: none;
            justify-content: center;
            align-items: flex-start;
            z-index: 2000;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: white;
            border-radius: var(--radius);
            max-width: 500px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            margin-top: auto;
            margin-bottom: auto;
        }

        @media (max-width: 768px) {
            .modal {
                max-height: 90vh;
            }
        }

        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            background: white;
            z-index: 1;
        }

        .modal-title {
            font-size: 18px;
            font-weight: 700;
        }

        .close-modal {
            background: none;
            border: none;
            font-size: 24px;
            color: var(--gray);
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .modal-body {
            padding: 20px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            font-size: 14px;
        }

        .form-input {
            width: 100%;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            -webkit-appearance: none;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--primary);
        }

        /* Notification */
        .notification {
            position: fixed;
            bottom: 80px;
            left: 20px;
            right: 20px;
            background: var(--primary);
            color: white;
            padding: 14px 20px;
            border-radius: var(--radius);
            box-shadow: 0 4px 20px rgba(138, 43, 226, 0.3);
            z-index: 2000;
            opacity: 0;
            transform: translateY(100px);
            transition: all 0.3s ease;
            text-align: center;
            max-width: 400px;
            margin: 0 auto;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        @media (min-width: 768px) {
            .notification {
                left: 50%;
                transform: translateX(-50%) translateY(100px);
                width: auto;
            }
            .notification.show {
                transform: translateX(-50%) translateY(0);
            }
        }

        /* Pages */
        .page {
            display: none;
            width: 100%;
            background: white;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* Admin Panel */
        .admin-panel {
            position: fixed;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 10000;
            transition: left 0.3s ease;
            padding: 20px;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
        }

        .admin-panel.active {
            left: 0;
        }

        .admin-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 9998;
            display: none;
        }

        .admin-overlay.active {
            display: block;
        }

        .admin-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 2px solid var(--border);
        }

        .admin-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        .admin-section {
            margin-bottom: 25px;
            padding: 15px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
        }

        .admin-section h3 {
            font-size: 15px;
            font-weight: 600;
            margin-bottom: 12px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .admin-input {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            margin-bottom: 10px;
            font-size: 14px;
            -webkit-appearance: none;
        }

        .admin-btn {
            width: 100%;
            padding: 12px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 10px;
            transition: background 0.2s ease;
        }

        .admin-btn:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        .admin-btn.delete {
            background: var(--secondary);
        }

        .admin-btn.success {
            background: var(--success);
        }

        /* Cart Page Styles */
        .cart-item {
            display: flex;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 12px;
            padding: 12px;
            gap: 12px;
            align-items: center;
            width: 100%;
        }

        .cart-item-image {
            width: 80px;
            height: 80px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .cart-item-info {
            flex: 1;
            min-width: 0;
        }

        .cart-item-title {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 14px;
            line-height: 1.3;
            overflow: hidden;
            text-overflow: ellipsis;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
        }

        .cart-item-price {
            color: var(--primary);
            font-weight: 700;
            font-size: 16px;
        }

        .cart-item-actions {
            display: flex;
            align-items: center;
            gap: 8px;
            flex-shrink: 0;
        }

        .quantity-btn {
            width: 28px;
            height: 28px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
            transition: background 0.2s ease;
        }

        .quantity-btn:active {
            background: var(--light);
        }

        .cart-item-quantity {
            font-weight: 600;
            min-width: 24px;
            text-align: center;
            font-size: 14px;
        }

        .remove-btn {
            background: none;
            border: none;
            color: var(--secondary);
            cursor: pointer;
            padding: 6px;
            border-radius: 4px;
            font-size: 16px;
        }

        .remove-btn:active {
            background: rgba(255, 107, 107, 0.1);
        }

        .cart-total {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-top: 20px;
        }

        .total-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 12px;
            padding-bottom: 12px;
            border-bottom: 1px solid var(--border);
            font-size: 15px;
        }

        .total-row:last-child {
            border-bottom: none;
            font-size: 18px;
            font-weight: 700;
            color: var(--primary);
        }

        .checkout-btn {
            width: 100%;
            padding: 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 20px;
            transition: background 0.2s ease;
        }

        .checkout-btn:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        /* Checkout Form */
        .checkout-form {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            padding: 20px;
            margin-top: 20px;
        }

        .form-row {
            display: flex;
            gap: 15px;
            margin-bottom: 15px;
        }

        .form-row .form-group {
            flex: 1;
            margin-bottom: 0;
        }

        /* Orders Page */
        .orders-list {
            margin-bottom: 20px;
        }

        .order-card {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 15px;
            overflow: hidden;
        }

        .order-header {
            padding: 15px;
            background: var(--light);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .order-id {
            font-weight: 700;
            color: var(--primary);
        }

        .order-status {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
        }

        .status-new {
            background: var(--info);
            color: white;
        }

        .status-processing {
            background: var(--warning);
            color: white;
        }

        .status-completed {
            background: var(--success);
            color: white;
        }

        .status-cancelled {
            background: var(--secondary);
            color: white;
        }

        .order-details {
            padding: 15px;
        }

        .order-info {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }

        .info-item {
            font-size: 13px;
        }

        .info-label {
            color: var(--gray);
            margin-bottom: 2px;
        }

        .info-value {
            font-weight: 500;
        }

        .order-items {
            border-top: 1px solid var(--border);
            padding-top: 15px;
        }

        .order-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .order-item:last-child {
            border-bottom: none;
        }

        .order-item-image {
            width: 50px;
            height: 50px;
            object-fit: cover;
            border-radius: 6px;
        }

        .order-item-info {
            flex: 1;
        }

        .order-item-name {
            font-size: 13px;
            font-weight: 500;
            margin-bottom: 2px;
        }

        .order-item-meta {
            font-size: 12px;
            color: var(--gray);
        }

        .order-item-total {
            font-weight: 700;
            color: var(--primary);
        }

        /* Admin Orders */
        .admin-orders {
            margin-bottom: 20px;
        }

        .admin-order-card {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 15px;
            overflow: hidden;
        }

        .admin-order-header {
            padding: 15px;
            background: var(--light);
            border-bottom: 1px solid var(--border);
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 10px;
        }

        .admin-order-info {
            flex: 1;
            min-width: 200px;
        }

        .admin-order-customer {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .admin-order-date {
            font-size: 12px;
            color: var(--gray);
        }

        .admin-order-actions {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }

        .status-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .status-btn:active {
            transform: scale(0.95);
        }

        .btn-processing {
            background: var(--warning);
            color: white;
        }

        .btn-completed {
            background: var(--success);
            color: white;
        }

        .btn-cancelled {
            background: var(--secondary);
            color: white;
        }

        /* Favorites Page */
        .favorites-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        @media (min-width: 768px) {
            .favorites-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (min-width: 992px) {
            .favorites-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        /* Back Button */
        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: var(--light);
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            color: var(--dark);
            margin-bottom: 16px;
            transition: background 0.2s ease;
        }

        .back-button:active {
            background: var(--light-gray);
            transform: scale(0.98);
        }

        /* Loading Spinner */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--light-gray);
            border-top-color: var(--primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Category Page Specific */
        .category-header {
            background: linear-gradient(135deg, var(--primary), var(--primary-light));
            color: white;
            padding: 30px 20px;
            margin: -15px -15px 20px;
            border-radius: 0 0 var(--radius) var(--radius);
            text-align: center;
            width: calc(100% + 30px);
        }

        .category-header h1 {
            font-size: 24px;
            margin-bottom: 8px;
        }

        .category-header p {
            opacity: 0.9;
            font-size: 14px;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid var(--border);
            margin-bottom: 20px;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: 12px 20px;
            background: none;
            border: none;
            border-bottom: 2px solid transparent;
            font-size: 14px;
            font-weight: 500;
            color: var(--gray);
            cursor: pointer;
            white-space: nowrap;
            transition: all 0.2s ease;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Safe area support for iOS */
        @supports (padding: max(0px)) {
            .header {
                padding-top: max(0px, env(safe-area-inset-top, 0px));
                height: calc(60px + max(0px, env(safe-area-inset-top, 0px)));
            }
            
            .header-container {
                margin-top: max(0px, env(safe-area-inset-top, 0px));
            }
            
            .main-nav {
                height: calc(65px + env(safe-area-inset-bottom, 0px));
            }
        }

        /* Fix for iOS input zoom */
        @media screen and (max-width: 768px) {
            input, select, textarea {
                font-size: 16px;
            }
        }

        /* Scrollbar styling */
        ::-webkit-scrollbar {
            width: 6px;
        }

        ::-webkit-scrollbar-track {
            background: var(--light);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--gray);
            border-radius: 3px;
        }

        /* Promo Code Input */
        .promo-code-container {
            display: flex;
            gap: 10px;
            margin-bottom: 15px;
        }

        .promo-input {
            flex: 1;
            padding: 12px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 14px;
        }

        .apply-promo-btn {
            padding: 12px 20px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .apply-promo-btn:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        .promo-success {
            color: var(--success);
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .promo-error {
            color: var(--secondary);
            font-size: 14px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* Product Page Styles */
        .product-page-header {
            background: white;
            border-radius: var(--radius);
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-bottom: 20px;
        }

        .product-image-main {
            width: 100%;
            height: 300px;
            object-fit: contain;
            background: var(--light-gray);
            display: block;
            background-color: #f8f9fa;
        }

        .product-images-thumbnails {
            display: flex;
            gap: 10px;
            padding: 10px;
            overflow-x: auto;
        }

        .product-thumbnail {
            width: 60px;
            height: 60px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid transparent;
            cursor: pointer;
            transition: border-color 0.2s ease;
            background-color: #f8f9fa;
        }

        .product-thumbnail.active {
            border-color: var(--primary);
        }

        .product-info {
            padding: 20px;
        }

        .product-title-large {
            font-size: 22px;
            font-weight: 700;
            margin-bottom: 8px;
            line-height: 1.3;
        }

        .product-brand-large {
            font-size: 14px;
            color: var(--gray);
            margin-bottom: 12px;
            font-weight: 500;
        }

        .product-price-large {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .current-price-large {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary);
        }

        .old-price-large {
            font-size: 16px;
            color: var(--gray);
            text-decoration: line-through;
        }

        .discount-large {
            color: var(--secondary);
            font-size: 14px;
            font-weight: 600;
            background: rgba(255, 107, 107, 0.1);
            padding: 4px 10px;
            border-radius: 6px;
        }

        .size-selector {
            margin-bottom: 20px;
        }

        .size-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            font-size: 15px;
        }

        .size-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }

        .size-btn {
            width: 40px;
            height: 40px;
            border: 1px solid var(--border);
            background: white;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .size-btn:hover {
            border-color: var(--primary);
        }

        .size-btn.active {
            background: var(--primary);
            color: white;
            border-color: var(--primary);
        }

        .size-btn.disabled {
            opacity: 0.5;
            cursor: not-allowed;
            background: var(--light-gray);
        }

        .size-chart-link {
            display: block;
            margin-top: 8px;
            color: var(--primary);
            font-size: 13px;
            text-decoration: none;
            cursor: pointer;
        }

        .quantity-selector {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .quantity-label {
            font-weight: 600;
            font-size: 15px;
        }

        .quantity-controls {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .quantity-btn-large {
            width: 36px;
            height: 36px;
            border-radius: 50%;
            border: 1px solid var(--border);
            background: white;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            transition: background 0.2s ease;
        }

        .quantity-btn-large:active {
            background: var(--light);
        }

        .quantity-value {
            font-weight: 600;
            font-size: 16px;
            min-width: 24px;
            text-align: center;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-bottom: 25px;
        }

        .buy-now-btn {
            flex: 2;
            padding: 15px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: background 0.2s ease;
        }

        .buy-now-btn:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        .add-to-cart-large {
            flex: 1;
            padding: 15px;
            background: var(--light);
            color: var(--dark);
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s ease;
        }

        .add-to-cart-large:active {
            background: var(--light-gray);
            transform: scale(0.98);
        }

        .add-to-cart-large.added {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }

        .product-tabs {
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 20px;
            overflow: hidden;
        }

        .product-tab-content {
            padding: 20px;
        }

        .product-description {
            font-size: 14px;
            line-height: 1.6;
            color: var(--dark);
            white-space: pre-line;
        }

        .product-specs {
            display: grid;
            gap: 12px;
        }

        .spec-item {
            display: flex;
            justify-content: space-between;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--light-gray);
        }

        .spec-label {
            color: var(--gray);
            font-size: 14px;
        }

        .spec-value {
            font-weight: 500;
            font-size: 14px;
            text-align: right;
        }

        .reviews-section {
            margin-top: 20px;
        }

        .review-item {
            padding: 15px 0;
            border-bottom: 1px solid var(--light-gray);
        }

        .review-item:last-child {
            border-bottom: none;
        }

        .review-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .review-author {
            font-weight: 600;
            font-size: 14px;
        }

        .review-date {
            color: var(--gray);
            font-size: 12px;
        }

        .review-rating {
            color: var(--accent);
            margin-bottom: 8px;
        }

        .review-text {
            font-size: 13px;
            line-height: 1.5;
            color: var(--dark);
        }

        .similar-products {
            margin-top: 30px;
        }

        .reviews-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .add-review-btn {
            padding: 8px 16px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 6px;
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
        }

        .add-review-btn:active {
            background: var(--primary-light);
            transform: scale(0.98);
        }

        .delivery-info {
            background: var(--light);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .delivery-item {
            display: flex;
            align-items: flex-start;
            gap: 10px;
            margin-bottom: 12px;
        }

        .delivery-item:last-child {
            margin-bottom: 0;
        }

        .delivery-icon {
            color: var(--primary);
            font-size: 16px;
            margin-top: 2px;
        }

        .delivery-text {
            font-size: 13px;
            line-height: 1.4;
        }

        .delivery-text strong {
            font-weight: 600;
            color: var(--dark);
        }

        .rating-stars {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .rating-stars i {
            color: #FFD700;
        }

        .rating-value {
            margin-left: 8px;
            font-weight: 600;
            font-size: 14px;
        }

        .rating-count {
            color: var(--gray);
            font-size: 13px;
            margin-left: 4px;
        }

        /* Characteristic item */
        .characteristic-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            padding-bottom: 10px;
            border-bottom: 1px solid var(--light-gray);
        }

        .char-name {
            color: var(--gray);
            font-size: 14px;
            flex: 1;
        }

        .char-value {
            font-weight: 500;
            font-size: 14px;
            text-align: right;
            flex: 1;
        }

        /* Stock status */
        .stock-status {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 13px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .in-stock {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }

        .out-of-stock {
            background: rgba(255, 107, 107, 0.1);
            color: var(--secondary);
        }

        /* Фикс для изображений в Telegram Web App */
        img {
            -webkit-user-drag: none;
            -khtml-user-drag: none;
            -moz-user-drag: none;
            -o-user-drag: none;
            user-drag: none;
        }

        .product-image, .product-image-main, .product-thumbnail {
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }

        /* Новые стили для админ-панели */
        .size-management {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .size-input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .size-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .size-tag {
            padding: 6px 12px;
            background: var(--light);
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .size-tag .remove-size {
            color: var(--secondary);
            cursor: pointer;
            font-size: 12px;
        }

        .characteristic-management {
            margin-bottom: 10px;
        }

        .char-row {
            display: flex;
            gap: 10px;
            margin-bottom: 10px;
        }

        .char-input {
            flex: 1;
            padding: 8px;
            border: 1px solid var(--border);
            border-radius: 6px;
        }

        .char-list {
            margin-top: 10px;
        }

        .char-tag {
            padding: 8px;
            background: var(--light);
            border-radius: 6px;
            margin-bottom: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .bulk-textarea {
            width: 100%;
            height: 200px;
            padding: 10px;
            border: 1px solid var(--border);
            border-radius: 6px;
            font-family: monospace;
            font-size: 12px;
            margin-bottom: 10px;
        }
        
        /* New styles for sync notification */
        .sync-status {
            position: fixed;
            top: 10px;
            right: 10px;
            background: var(--info);
            color: white;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            z-index: 9999;
            display: none;
            align-items: center;
            gap: 6px;
        }
        
        .sync-status.show {
            display: flex;
            animation: fadeInDown 0.3s ease;
        }
        
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .sync-btn {
            background: var(--success);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 12px;
            margin-left: 5px;
        }
    </style>
</head>
<body>
    <!-- Sync Status -->
    <div class="sync-status" id="syncStatus">
        <i class="fas fa-sync"></i>
        <span id="syncText"></span>
    </div>

    <!-- Admin Panel -->
    <div class="admin-overlay" id="adminOverlay"></div>
    
    <div class="admin-panel" id="adminPanel">
        <div class="admin-header">
            <div class="admin-title">Админ-панель</div>
            <button class="close-modal" id="closeAdmin">&times;</button>
        </div>
        
        <!-- Секция синхронизации -->
        <div class="admin-section" style="background: #e8f5e9;">
            <h3><i class="fas fa-cloud"></i> Синхронизация с облаком</h3>
            <div style="margin-bottom: 10px; font-size: 13px; color: var(--gray);">
                <p>Товары синхронизируются с облаком для всех пользователей</p>
            </div>
            <button class="admin-btn success" onclick="syncToCloud()" id="syncCloudBtn">
                <i class="fas fa-cloud-upload-alt"></i> Загрузить в облако
            </button>
            <button class="admin-btn" onclick="loadFromCloud()" id="loadCloudBtn">
                <i class="fas fa-cloud-download-alt"></i> Загрузить из облака
            </button>
            <div style="margin-top: 10px; font-size: 12px; color: var(--gray);">
                <div id="cloudStatus">Статус: не синхронизировано</div>
            </div>
        </div>
        
        <!-- Управление отзывами -->
        <div class="admin-section">
            <h3><i class="fas fa-comment"></i> Управление отзывами</h3>
            <select class="admin-input" id="adminReviewProduct">
                <option value="">Выберите товар</option>
            </select>
            <input type="text" class="admin-input" id="reviewAuthor" placeholder="Имя автора">
            <input type="number" class="admin-input" id="reviewRating" placeholder="Рейтинг (1-5)" min="1" max="5">
            <textarea class="admin-input" id="reviewText" placeholder="Текст отзыва" rows="3"></textarea>
            <button class="admin-btn success" id="addReviewBtn">Добавить отзыв</button>
            <button class="admin-btn" onclick="viewProductReviews()">Просмотреть отзывы</button>
        </div>
        
        <!-- Добавление товаров пакетами -->
        <div class="admin-section">
            <h3><i class="fas fa-boxes"></i> Добавить товары пакетами</h3>
            <select class="admin-input" id="adminBulkCategory">
                <option value="">Выберите категорию</option>
            </select>
            <textarea class="bulk-textarea" id="bulkProducts" placeholder="Введите товары в формате JSON:
[
  {
    'name': 'Название товара',
    'brand': 'Бренд',
    'price': 1000,
    'oldPrice': 1200,
    'image': 'URL картинки',
    'description': 'Описание товара'
  }
]"></textarea>
            <button class="admin-btn success" id="addBulkProducts">Добавить товары пакетом</button>
        </div>
        
        <!-- Управление размерами -->
        <div class="admin-section">
            <h3><i class="fas fa-ruler"></i> Управление размерами товара</h3>
            <select class="admin-input" id="adminProductManage">
                <option value="">Выберите товар</option>
            </select>
            
            <div id="sizeManagementSection" style="display: none;">
                <div class="size-management">
                    <input type="text" class="size-input" id="newSize" placeholder="Новый размер (например, M)">
                    <button class="admin-btn" onclick="addProductSize()">Добавить</button>
                </div>
                <div id="availableSizesList"></div>
                
                <div class="size-management" style="margin-top: 15px;">
                    <input type="text" class="size-input" id="removeSize" placeholder="Размер для удаления">
                    <button class="admin-btn delete" onclick="removeProductSize()">Удалить</button>
                </div>
            </div>
            
            <div style="margin-top: 15px;">
                <label style="display: block; margin-bottom: 8px; font-size: 14px;">
                    <input type="checkbox" id="hideSizesForAccessories">
                    Скрыть размеры для аксессуаров
                </label>
                <button class="admin-btn" onclick="applySizeRules()">Применить правило</button>
            </div>
        </div>
        
        <!-- Управление характеристиками -->
        <div class="admin-section">
            <h3><i class="fas fa-list-alt"></i> Управление характеристиками</h3>
            <select class="admin-input" id="adminCharProduct">
                <option value="">Выберите товар</option>
            </select>
            
            <div id="characteristicManagement" style="display: none;">
                <div class="characteristic-management">
                    <div class="char-row">
                        <input type="text" class="char-input" id="charName" placeholder="Название характеристики">
                        <input type="text" class="char-input" id="charValue" placeholder="Значение">
                        <button class="admin-btn" onclick="addCharacteristic()">Добавить</button>
                    </div>
                    <div id="characteristicsList"></div>
                    
                    <div class="char-row" style="margin-top: 15px;">
                        <input type="text" class="char-input" id="removeCharName" placeholder="Название для удаления">
                        <button class="admin-btn delete" onclick="removeCharacteristic()">Удалить</button>
                    </div>
                </div>
                
                <button class="admin-btn success" onclick="saveCharacteristics()">Сохранить характеристики</button>
            </div>
        </div>
        
        <!-- Существующие разделы админки -->
        <div class="admin-section">
            <h3><i class="fas fa-image"></i> Заменить картинку категории</h3>
            <select class="admin-input" id="adminCategorySelect">
                <option value="">Выберите категорию</option>
            </select>
            <input type="text" class="admin-input" id="adminCategoryImage" placeholder="Новый URL картинки">
            <button class="admin-btn" id="adminUpdateCategoryImage">Обновить картинку</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-tags"></i> Добавить категорию</h3>
            <input type="text" class="admin-input" id="adminNewCategoryName" placeholder="Название категории">
            <input type="text" class="admin-input" id="adminNewCategoryImage" placeholder="URL картинки">
            <button class="admin-btn" id="adminAddCategory">Добавить категорию</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-box"></i> Добавить товар</h3>
            <input type="text" class="admin-input" id="adminProductName" placeholder="Название товара">
            <input type="number" class="admin-input" id="adminProductPrice" placeholder="Цена">
            <select class="admin-input" id="adminProductCategory">
                <option value="">Категория товара</option>
            </select>
            <input type="text" class="admin-input" id="adminProductImage" placeholder="URL картинки">
            <textarea class="admin-input" id="adminProductDescription" placeholder="Описание товара" rows="3"></textarea>
            <button class="admin-btn" id="adminAddProduct">Добавить товар</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-trash"></i> Удалить товар</h3>
            <select class="admin-input" id="adminDeleteProduct">
                <option value="">Выберите товар</option>
            </select>
            <button class="admin-btn delete" id="adminDeleteProductBtn">Удалить товар</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-ticket-alt"></i> Управление промокодами</h3>
            <input type="text" class="admin-input" id="promoCode" placeholder="Код промокода">
            <input type="number" class="admin-input" id="promoDiscount" placeholder="Скидка в %">
            <input type="number" class="admin-input" id="promoMaxUses" placeholder="Максимум использований">
            <input type="datetime-local" class="admin-input" id="promoExpiry" placeholder="Дата истечения">
            <button class="admin-btn success" id="createPromoBtn">Создать промокод</button>
            <button class="admin-btn" onclick="viewPromoCodes()">Просмотреть промокоды</button>
            <button class="admin-btn delete" onclick="clearExpiredPromos()">Очистить истекшие</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-shopping-cart"></i> Управление заказами</h3>
            <button class="admin-btn" onclick="switchPage('admin-orders')">Просмотреть заказы</button>
            <button class="admin-btn success" onclick="updateAllOrders()">Обновить статусы</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-database"></i> Данные</h3>
            <button class="admin-btn" onclick="exportData()">Экспортировать всё</button>
            <button class="admin-btn" onclick="importData()">Импортировать данные</button>
            <button class="admin-btn delete" onclick="resetData()">Сбросить все данные</button>
        </div>
        
        <div class="admin-section">
            <h3><i class="fas fa-users"></i> Пользователи</h3>
            <button class="admin-btn" onclick="viewAllUsers()">Просмотреть всех пользователей</button>
        </div>
    </div>

    <!-- Модальные окна -->
    <div class="modal-overlay" id="promoCodesModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Промокоды</div>
                <button class="close-modal" onclick="closePromoCodesModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="promoCodesList"></div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="usersModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Все пользователи</div>
                <button class="close-modal" onclick="closeUsersModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="usersList"></div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" id="reviewsModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Отзывы товара</div>
                <button class="close-modal" onclick="closeReviewsModal()">&times;</button>
            </div>
            <div class="modal-body">
                <div id="reviewsList"></div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <a href="#" class="logo" onclick="switchPage('home'); return false;">
                <span class="logo-icon">🦄</span>
                <span class="logo-text">UNICORN</span>
            </a>
            
            <div class="header-actions">
                <button class="action-btn" id="favoritesBtn" onclick="switchPage('favorites')">
                    <i class="far fa-heart"></i>
                    <span class="badge" id="favoritesBadge" style="display: none;">0</span>
                </button>
                <button class="action-btn" id="cartBtn" onclick="switchPage('cart')">
                    <i class="fas fa-shopping-bag"></i>
                    <span class="badge" id="cartBadge">0</span>
                </button>
                <div class="user-menu" id="profileBtn" onclick="switchPage('profile')">
                    <div class="user-avatar" id="userAvatar">?</div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Navigation -->
    <nav class="main-nav">
        <div class="nav-container">
            <a href="#" class="nav-item active" onclick="switchPage('home'); return false;">
                <i class="fas fa-home"></i>
                <span>Главная</span>
            </a>
            <a href="#" class="nav-item" onclick="switchPage('categories'); return false;">
                <i class="fas fa-th-large"></i>
                <span>Категории</span>
            </a>
            <a href="#" class="nav-item" onclick="switchPage('favorites'); return false;">
                <i class="far fa-heart"></i>
                <span>Избранное</span>
            </a>
            <a href="#" class="nav-item" onclick="switchPage('profile'); return false;">
                <i class="far fa-user"></i>
                <span>Профиль</span>
            </a>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Home Page -->
        <div id="home" class="page active">
            <div class="container">
                <div class="banner">
                    <div class="banner-content">
                        <div class="banner-badge">🔥 Горячая распродажа</div>
                        <h2 class="banner-title">Скидка 50% на всё!</h2>
                        <p class="banner-subtitle">Только до конца недели. Успей купить!</p>
                        <button class="add-to-cart" onclick="switchPage('categories')">
                            <i class="fas fa-bolt"></i>
                            Смотреть товары
                        </button>
                    </div>
                    <div class="banner-unicorn">🦄</div>
                </div>

                <div class="section-header">
                    <h2 class="section-title">Категории</h2>
                </div>

                <div class="categories-grid" id="mainCategories">
                    <!-- Categories will be loaded here -->
                </div>

                <div class="section-header">
                    <h2 class="section-title">Популярные товары</h2>
                </div>

                <div class="products-grid" id="popularProducts">
                    <!-- Products will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Product Page -->
        <div id="product-page" class="page">
            <div class="container">
                <button class="back-button" onclick="goBackFromProduct()">
                    <i class="fas fa-arrow-left"></i>
                    Назад
                </button>
                
                <div id="productPageContent">
                    <!-- Product page content will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Category Page -->
        <div id="category-page" class="page">
            <div class="container">
                <button class="back-button" onclick="switchPage('categories')">
                    <i class="fas fa-arrow-left"></i>
                    Назад к категориям
                </button>
                
                <div id="categoryHeader">
                    <!-- Category header will be loaded here -->
                </div>
                
                <div class="products-grid" id="categoryProducts">
                    <!-- Category products will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Categories Page -->
        <div id="categories" class="page">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Категории</h2>
                </div>

                <div class="categories-grid" id="categoriesGrid">
                    <!-- Categories will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Favorites Page -->
        <div id="favorites" class="page">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Избранное</h2>
                </div>
                
                <div id="favoritesContent">
                    <!-- Favorites will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Cart Page -->
        <div id="cart" class="page">
            <div class="container">
                <div class="section-header">
                    <h2 class="section-title">Корзина</h2>
                </div>
                
                <div id="cartContent">
                    <!-- Cart will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Checkout Page -->
        <div id="checkout" class="page">
            <div class="container">
                <button class="back-button" onclick="switchPage('cart')">
                    <i class="fas fa-arrow-left"></i>
                    Назад в корзину
                </button>
                
                <div class="section-header">
                    <h2 class="section-title">Оформление заказа</h2>
                </div>
                
                <div id="checkoutContent">
                    <!-- Checkout form will be loaded here -->
                </div>
            </div>
        </div>

        <!-- Profile Page -->
        <div id="profile" class="page">
            <div class="container">
                <div class="profile-header">
                    <div class="profile-avatar" id="profileAvatar">?</div>
                    <h2 class="profile-name" id="profileName">Гость</h2>
                    <p class="profile-phone" id="profilePhone">Не авторизован</p>
                </div>

                <div class="tabs" id="profileTabs">
                    <button class="tab active" onclick="switchProfileTab('stats')">Статистика</button>
                    <button class="tab" onclick="switchProfileTab('orders')">Мои заказы</button>
                    <button class="tab" onclick="switchProfileTab('settings')">Настройки</button>
                </div>

                <!-- Stats Tab -->
                <div id="statsTab" class="tab-content active">
                    <div class="profile-stats">
                        <div class="stat-item">
                            <div class="stat-value" id="statOrders">0</div>
                            <div class="stat-label">Заказы</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statReviews">0</div>
                            <div class="stat-label">Отзывы</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statFavorites">0</div>
                            <div class="stat-label">Избранное</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value" id="statViewed">0</div>
                            <div class="stat-label">Просмотренные</div>
                        </div>
                    </div>

                    <div class="profile-menu">
                        <a href="#" class="menu-item" onclick="openPhoneModal()">
                            <i class="fas fa-phone menu-icon"></i>
                            <span class="menu-text">Добавить номер телефона</span>
                        </a>
                        <a href="#" class="menu-item" onclick="openAddressModal()">
                            <i class="fas fa-shipping-fast menu-icon"></i>
                            <span class="menu-text">Данные доставки</span>
                        </a>
                        <a href="#" class="menu-item" onclick="openCustomsModal()">
                            <i class="fas fa-passport menu-icon"></i>
                            <span class="menu-text">Данные для таможни</span>
                        </a>
                        <a href="#" class="menu-item" onclick="openInviteModal()">
                            <i class="fas fa-user-friends menu-icon"></i>
                            <span class="menu-text">Пригласить друга</span>
                            <span class="menu-value">+500 ₽</span>
                        </a>
                    </div>
                </div>

                <!-- Orders Tab -->
                <div id="ordersTab" class="tab-content">
                    <div id="userOrdersContent">
                        <!-- User orders will be loaded here -->
                    </div>
                </div>

                <!-- Settings Tab -->
                <div id="settingsTab" class="tab-content">
                    <div class="profile-menu">
                        <a href="#" class="menu-item" onclick="exportUserData()">
                            <i class="fas fa-download menu-icon"></i>
                            <span class="menu-text">Экспорт моих данных</span>
                        </a>
                        <a href="#" class="menu-item" onclick="clearUserData()">
                            <i class="fas fa-trash menu-icon"></i>
                            <span class="menu-text">Очистить мои данные</span>
                        </a>
                        <a href="#" class="menu-item" onclick="changeUserName()">
                            <i class="fas fa-user-edit menu-icon"></i>
                            <span class="menu-text">Изменить имя</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin Orders Page -->
        <div id="admin-orders" class="page">
            <div class="container">
                <button class="back-button" onclick="switchPage('home')">
                    <i class="fas fa-arrow-left"></i>
                    На главную
                </button>
                
                <div class="section-header">
                    <h2 class="section-title">Управление заказами</h2>
                </div>
                
                <div id="adminOrdersContent">
                    <!-- Admin orders will be loaded here -->
                </div>
            </div>
        </div>
    </main>

    <!-- Notification -->
    <div class="notification" id="notification"></div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(255,255,255,0.9); z-index: 9999; display: none; justify-content: center; align-items: center; flex-direction: column; gap: 20px;">
        <div class="loading" style="width: 40px; height: 40px;"></div>
        <div style="font-size: 14px; color: var(--gray);">Загрузка...</div>
    </div>

    <script>
        // Telegram Bot Configuration
        const TELEGRAM_BOT_TOKEN = '8297619186:AAFALMlS8mt2FpUwNzorLQalkOshPpULb2Y';
        const TELEGRAM_CHAT_ID = '6644058285';
        const ADMIN_USER_ID = '6644058285';

        // GitHub Gist Configuration for Cloud Storage
        const GITHUB_GIST_ID = ''; // Оставьте пустым - будет создан автоматически
        const GITHUB_TOKEN = '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'; // Замените на свой GitHub token

        const CLOUD_STORAGE_KEY = 'unicorn_cloud_data';

        // Улучшенные данные
        const defaultCategories = {
            "men": {
                id: "men",
                name: "Мужская одежда",
                image: "https://images.unsplash.com/photo-1515378791036-0648a3ef77b2?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                description: "Стильная мужская одежда"
            },
            "women": {
                id: "women",
                name: "Женская одежда",
                image: "https://images.unsplash.com/photo-1490481651871-ab68de25d43d?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                description: "Модная женская одежда"
            },
            "shoes": {
                id: "shoes",
                name: "Обувь",
                image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                description: "Обувь для каждого сезона"
            },
            "accessories": {
                id: "accessories",
                name: "Аксессуары",
                image: "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80",
                description: "Аксессуары и украшения"
            }
        };

        // ==============================================
// ОБНОВЛЕННЫЕ ДАННЫЕ ТОВАРОВ С БОЛЬШИМ КОЛИЧЕСТВОМ И РЕАЛИСТИЧНЫМИ ОТЗЫВАМИ
// ==============================================

// Функция генерации реалистичных отзывов
function generateReviews(count, averageRating, productName) {
    const reviews = [];
    
    // Расширенные базы данных для реалистичности
    const firstNamesMale = [
        "Александр", "Иван", "Дмитрий", "Сергей", "Андрей", "Михаил", "Алексей", 
        "Владимир", "Евгений", "Роман", "Николай", "Павел", "Артем", "Максим", 
        "Денис", "Антон", "Игорь", "Станислав", "Григорий", "Вадим", "Тимур", 
        "Константин", "Леонид", "Василий", "Олег", "Юрий", "Виктор", "Георгий", 
        "Федор", "Борис", "Семен", "Ярослав", "Даниил", "Кирилл", "Вячеслав", 
        "Геннадий", "Эдуард", "Марат", "Рамиль", "Ильдар", "Руслан", "Азамат", 
        "Илья", "Глеб", "Захар", "Матвей", "Савва", "Егор", "Тимофей", "Марк"
    ];
    
    const firstNamesFemale = [
        "Мария", "Екатерина", "Анна", "Ольга", "Наталья", "Елена", "Юлия", 
        "Татьяна", "Светлана", "Ирина", "Алина", "Ксения", "Виктория", 
        "Анастасия", "Марина", "Полина", "Валерия", "Дарья", "Кристина", 
        "Александра", "Елизавета", "Ангелина", "Валентина", "Людмила", 
        "Галина", "Лариса", "Надежда", "Вера", "Любовь", "Маргарита", 
        "Евгения", "Диана", "Карина", "Яна", "Арина", "Ульяна", "София", 
        "Варвара", "Алиса", "Милана", "Вероника", "Элина", "Камилла", 
        "Регина", "Алёна", "Василиса", "Майя", "Злата", "Мирослава", "Стефания"
    ];
    
    const lastNames = [
        "Иванов", "Петров", "Сидоров", "Смирнов", "Кузнецов", "Попов", 
        "Васильев", "Федоров", "Морозов", "Волков", "Алексеев", "Лебедев", 
        "Семенов", "Егоров", "Павлов", "Козлов", "Степанов", "Николаев", 
        "Орлов", "Андреев", "Макаров", "Никитин", "Захаров", "Зайцев", 
        "Борисов", "Григорьев", "Романов", "Тимофеев", "Филиппов", "Марков", 
        "Кириллов", "Максимов", "Виноградов", "Белов", "Медведев", "Антонов", 
        "Тихонов", "Савельев", "Герасимов", "Поляков", "Соколов", "Тихомиров", 
        "Фролов", "Константинов", "Наумов", "Жуков", "Воробьев", "Архипов", 
        "Горбунов", "Кудрявцев", "Быков", "Маслов", "Ширяев", "Миронов", 
        "Беляков", "Фомин", "Данилов", "Жданов", "Новиков", "Орехов", 
        "Сорокин", "Трофимов", "Комаров", "Крылов", "Ефимов", "Терентьев", 
        "Исаев", "Журавлев", "Карпов", "Афанасьев", "Власов", "Мясников"
    ];
    
    // Реалистичные комментарии
    const comments = [
        {
            text: "Отличное качество! Материал приятный, пошив аккуратный. Размер соответствует таблице.",
            type: "positive",
            keywords: ["качество", "материал", "размер"]
        },
        {
            text: "Очень доволен покупкой! Все как на фото, даже лучше. Цвет насыщенный, ткань плотная.",
            type: "positive", 
            keywords: ["фото", "цвет", "ткань"]
        },
        {
            text: "Пришло быстрее чем ожидал! Курьер позвонил за час. Товар в идеальном состоянии.",
            type: "positive",
            keywords: ["доставка", "курьер"]
        },
        {
            text: "Превзошло ожидания! За такую цену не ожидал такого качества. Швы прочные.",
            type: "positive",
            keywords: ["цена", "швы"]
        },
        {
            text: "Идеально подошло по размеру! Заказывал по своим меркам - все совпало. Сидит комфортно.",
            type: "positive",
            keywords: ["размер", "мерки", "комфортно"]
        },
        {
            text: "Нормальный товар за свои деньги. Не идеально, но за такую цену ожидал хуже.",
            type: "neutral",
            keywords: ["нормально", "цена"]
        },
        {
            text: "В целом неплохо. Есть небольшие недочеты по швам, но не критично.",
            type: "neutral",
            keywords: ["неплохо", "швы"]
        },
        {
            text: "Товар соответствует описанию. Качество среднее, но за такую цену нормально.",
            type: "neutral", 
            keywords: ["соответствует", "среднее"]
        },
        {
            text: "Размер не соответствует таблице! Взял как обычно М - оказалось мало.",
            type: "negative",
            keywords: ["размер", "таблица"]
        },
        {
            text: "Качество оставляет желать лучшего. После первой стирки появились катышки.",
            type: "negative",
            keywords: ["качество", "стирка"]
        }
    ];
    
    const startDate = new Date(2025, 0, 1);
    const endDate = new Date(2025, 11, 31);
    
    for (let i = 0; i < count; i++) {
        // Генерация имени
        const isFemale = Math.random() > 0.5;
        const firstName = isFemale ? 
            firstNamesFemale[Math.floor(Math.random() * firstNamesFemale.length)] :
            firstNamesMale[Math.floor(Math.random() * firstNamesMale.length)];
        const lastName = lastNames[Math.floor(Math.random() * lastNames.length)];
        
        // Генерация рейтинга
        let rating;
        if (Math.random() < 0.7) {
            rating = Math.max(3.5, Math.min(5, averageRating + (Math.random() * 0.8 - 0.4)));
        } else if (Math.random() < 0.5) {
            rating = 4.8 + Math.random() * 0.2;
        } else {
            rating = 2.5 + Math.random() * 1.5;
        }
        rating = parseFloat(rating.toFixed(1));
        
        // Выбор комментария по рейтингу
        let filteredComments;
        if (rating >= 4.5) {
            filteredComments = comments.filter(c => c.type === "positive");
        } else if (rating >= 3.5) {
            filteredComments = comments.filter(c => c.type === "neutral");
        } else {
            filteredComments = comments.filter(c => c.type === "negative");
        }
        
        const selectedComment = filteredComments[Math.floor(Math.random() * filteredComments.length)];
        
        // Добавление деталей
        const size = ['XS', 'S', 'M', 'L', 'XL'][Math.floor(Math.random() * 5)];
        
        let reviewText = selectedComment.text;
        
        // Добавляем детали в 70% случаев
        if (Math.random() > 0.3) {
            const details = [
                `Размер взял ${size} - подошел идеально.`,
                `Курьер был вежливый, все объяснил.`,
                `Упаковка была надежная, ничего не помялось.`,
                `После стирки не село, не полиняло.`,
                `Ношу уже неделю - комфортно и удобно.`,
                `Цвет точно как на фото, не обманули.`,
                `Фурнитура качественная, не расстегивается.`,
                `Ткань приятная к телу, не колется.`,
                `Швы аккуратные, нитки не торчат.`,
                `Подошва не скользит, очень удобно.`
            ];
            
            const randomDetail = details[Math.floor(Math.random() * details.length)];
            reviewText += ` ${randomDetail}`;
        }
        
        // Добавляем итог в 50% случаев
        if (Math.random() > 0.5) {
            const endings = [
                "В общем, рекомендую!",
                "Буду заказывать еще!",
                "Советую к покупке.",
                "Можно брать смело.",
                "Думаю, стоит своих денег.",
                "Однозначно стоит купить.",
                "Не самый лучший выбор.",
                "Подумайте дважды перед покупкой."
            ];
            
            const ending = endings[Math.floor(Math.random() * endings.length)];
            reviewText += ` ${ending}`;
        }
        
        // Добавляем эмодзи в 40% случаев
        if (Math.random() > 0.6) {
            const emojis = ["👍", "⭐", "🔥", "❤️", "👌", "✨", "✅", "👎", "😐", "👀"];
            const emoji = emojis[Math.floor(Math.random() * emojis.length)];
            reviewText = `${emoji} ${reviewText}`;
        }
        
        // Генерация даты
        const randomDate = new Date(
            startDate.getTime() + Math.random() * (endDate.getTime() - startDate.getTime())
        );
        
        reviews.push({
            id: Date.now() + i + Math.floor(Math.random() * 10000),
            author: `${firstName} ${lastName}`,
            rating: rating,
            date: randomDate.toISOString().split('T')[0],
            text: reviewText.trim()
        });
    }
    
    // Сортируем по дате
    return reviews.sort((a, b) => new Date(b.date) - new Date(a.date));
}

// ==============================================
// ОБНОВЛЕННЫЙ СПИСОК ТОВАРОВ (165 товаров)
// ==============================================

const defaultProducts = [
    // МУЖСКАЯ ОДЕЖДА (47 товаров)
    {
        id: 1,
        name: "Кожаная куртка AllSaints Balfern",
        brand: "AllSaints",
        price: 34990,
        oldPrice: 42990,
        discount: 19,
        category: "men",
        image: "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1551028719-00167b16eac5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1548123378-bde4eca81d2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Кожаная куртка премиум-класса из натуральной кожи овчины. Классический дизайн в стиле косухи с современным кроем. Идеальна для создания стильного осеннего образа.",
        characteristics: {
            "Материал": "Натуральная кожа овчины",
            "Подкладка": "Вискоза 100%",
            "Цвет": "Черный",
            "Застежка": "Молния и кнопки",
            "Карманы": "2 боковых, 1 внутренний",
            "Стиль": "Косуха",
            "Производство": "Великобритания",
            "Сезон": "Осень-весна"
        },
        sizes: ["S", "M", "L", "XL", "XXL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "Натуральная кожа овчины, вискоза, металлическая фурнитура",
        colors: ["Черный", "Коричневый", "Бордовый"],
        rating: 4.8,
        reviewsCount: 56,
        inStock: true,
        deliveryTime: "3-5 дней",
        warranty: "1 год",
        reviews: generateReviews(56, 4.8, "Кожаная куртка AllSaints Balfern")
    },
    {
        id: 2,
        name: "Джинсы Wrangler Retro Slim Fit",
        brand: "Wrangler",
        price: 4590,
        oldPrice: 5990,
        discount: 23,
        category: "men",
        image: "https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1541099649105-f69ad21a3246?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классические джинсы в винтажном стиле с зауженным кроем. Плотный деним с эффектом потертостей создает аутентичный ретро-образ.",
        characteristics: {
            "Материал": "100% хлопок (деним)",
            "Плотность": "12 унций",
            "Крой": "Slim Fit",
            "Посадка": "Низкая",
            "Застежка": "Молния и пуговица",
            "Карманы": "5 карманов",
            "Стиль": "Винтажный, с потертостями",
            "Производство": "Мексика"
        },
        sizes: ["28", "30", "32", "34", "36", "38", "40"],
        availableSizes: ["30", "32", "34", "36", "38"],
        materials: "100% хлопковый деним",
        colors: ["Синий деним", "Светло-синий", "Черный"],
        rating: 4.5,
        reviewsCount: 123,
        inStock: true,
        deliveryTime: "2-5 дней",
        warranty: "3 месяца",
        reviews: generateReviews(123, 4.5, "Джинсы Wrangler Retro Slim Fit")
    },
    {
        id: 3,
        name: "Свитшот Nike Tech Fleece",
        brand: "Nike",
        price: 7990,
        oldPrice: 9990,
        discount: 20,
        category: "men",
        image: "https://images.unsplash.com/photo-1578763460786-2305654e08bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1578763460786-2305654e08bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Технологичный свитшот из материала Tech Fleece. Легкий, теплый и отлично сохраняет форму после многократных стирок.",
        characteristics: {
            "Материал": "Tech Fleece (хлопок/полиэстер)",
            "Крой": "Regular Fit",
            "Капюшон": "С регулируемыми шнурками",
            "Карманы": "Карман кенгуру",
            "Цвет": "Черный, Серый, Темно-синий",
            "Технология": "Терморегуляция",
            "Производство": "Вьетнам",
            "Сезон": "Осень-зима"
        },
        sizes: ["S", "M", "L", "XL", "XXL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "Хлопок 60%, полиэстер 40%",
        colors: ["Черный", "Серый", "Темно-синий"],
        rating: 4.7,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "2-4 дня",
        warranty: "30 дней",
        reviews: generateReviews(89, 4.7, "Свитшот Nike Tech Fleece")
    },
    {
        id: 4,
        name: "Рубашка-поло Ralph Lauren",
        brand: "Ralph Lauren",
        price: 6990,
        oldPrice: 8990,
        discount: 22,
        category: "men",
        image: "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1596755094514-f87e34085b2c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1594744803329-e58b31de8bf5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классическая рубашка-поло из пике. Идеальный вариант для smart casual стиля. Качественный пошив и фирменный логотип.",
        characteristics: {
            "Материал": "100% хлопок (пике)",
            "Крой": "Regular Fit",
            "Воротник": "Поло с 3 пуговицами",
            "Рукава": "Короткие",
            "Цвет": "Белый, Синий, Черный",
            "Стиль": "Smart Casual",
            "Производство": "США",
            "Уход": "Машинная стирка 40°C"
        },
        sizes: ["S", "M", "L", "XL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "100% хлопок пике",
        colors: ["Белый", "Синий", "Черный"],
        rating: 4.6,
        reviewsCount: 76,
        inStock: true,
        deliveryTime: "3-7 дней",
        warranty: "30 дней",
        reviews: generateReviews(76, 4.6, "Рубашка-поло Ralph Lauren")
    },
    {
        id: 5,
        name: "Пуховик The North Face Nuptse",
        brand: "The North Face",
        price: 24990,
        oldPrice: 31990,
        discount: 22,
        category: "men",
        image: "https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1551488831-00ddcb6c6bd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1544552866-d3ed42536d86?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовый пуховик для экстремально холодной погоды. Заполнение 700-fill power goose down обеспечивает максимальное тепло при минимальном весе.",
        characteristics: {
            "Наполнитель": "Пух гуся 700 fill power",
            "Материал верха": "Ripstop нейлон",
            "Температурный режим": "До -25°C",
            "Капюшон": "Регулируемый, отстегивающийся",
            "Карманы": "2 внешних, 2 внутренних",
            "Вес": "850 г",
            "Производство": "Вьетнам",
            "Гарантия": "Пожизненная"
        },
        sizes: ["S", "M", "L", "XL", "XXL"],
        availableSizes: ["M", "L", "XL"],
        materials: "Нейлон, пух гуся",
        colors: ["Черный", "Синий", "Красный"],
        rating: 4.9,
        reviewsCount: 142,
        inStock: true,
        deliveryTime: "5-10 дней",
        warranty: "Пожизненная",
        reviews: generateReviews(142, 4.9, "Пуховик The North Face Nuptse")
    },
    {
        id: 6,
        name: "Брюки-карго Carhartt",
        brand: "Carhartt",
        price: 6490,
        oldPrice: 8490,
        discount: 24,
        category: "men",
        image: "https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1624378439575-d8705ad7ae80?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1624378515191-84b2d8ef6cc1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Прочные рабочие брюки с многочисленными карманами. Изготовлены из плотной хлопковой ткани с усиленными швами.",
        characteristics: {
            "Материал": "100% хлопок (canvas)",
            "Крой": "Regular Fit",
            "Карманы": "8 карманов",
            "Застежка": "Молния и пуговица",
            "Цвет": "Хаки, Черный, Коричневый",
            "Усиление": "Усиленные колени и карманы",
            "Производство": "США",
            "Вес ткани": "12 унций"
        },
        sizes: ["30", "32", "34", "36", "38", "40", "42"],
        availableSizes: ["32", "34", "36", "38", "40"],
        materials: "100% хлопковый холст",
        colors: ["Хаки", "Черный", "Коричневый"],
        rating: 4.7,
        reviewsCount: 98,
        inStock: true,
        deliveryTime: "4-8 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(98, 4.7, "Брюки-карго Carhartt")
    },
    {
        id: 7,
        name: "Толстовка Champion Reverse Weave",
        brand: "Champion",
        price: 5490,
        oldPrice: 7490,
        discount: 27,
        category: "men",
        image: "https://images.unsplash.com/photo-1527719327859-c6ce80353573?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1527719327859-c6ce80353573?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1529374255404-311a2a4f1fd9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовая толстовка с технологией Reverse Weave, которая предотвращает усадку при стирке. Классический американский стиль.",
        characteristics: {
            "Материал": "Флис (хлопок/полиэстер)",
            "Технология": "Reverse Weave",
            "Крой": "Oversize",
            "Капюшон": "С шнурками",
            "Карманы": "Карман кенгуру",
            "Цвет": "Серый хеather, Черный, Бордовый",
            "Производство": "США",
            "Усадка": "Не дает усадки"
        },
        sizes: ["S", "M", "L", "XL", "XXL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "Хлопок 80%, полиэстер 20%",
        colors: ["Серый", "Черный", "Бордовый"],
        rating: 4.8,
        reviewsCount: 167,
        inStock: true,
        deliveryTime: "3-6 дней",
        warranty: "30 дней",
        reviews: generateReviews(167, 4.8, "Толстовка Champion Reverse Weave")
    },
    {
        id: 8,
        name: "Костюм Hugo Boss Business",
        brand: "Hugo Boss",
        price: 42990,
        oldPrice: 54990,
        discount: 22,
        category: "men",
        image: "https://images.unsplash.com/photo-1594938374187-90dc6c6c8c11?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1594938374187-90dc6c6c8c11?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Деловой костюм премиум-класса. Современный slim fit крой, итальянская шерсть и безупречный пошив для важных встреч.",
        characteristics: {
            "Материал": "Шерсть 95%, эластан 5%",
            "Крой": "Slim Fit",
            "Цвет": "Темно-синий, Серый, Черный",
            "Подкладка": "Вискоза 100%",
            "Фурнитура": "Роговые пуговицы",
            "Производство": "Италия",
            "Сезон": "Круглый год",
            "Уход": "Химчистка"
        },
        sizes: ["48", "50", "52", "54", "56"],
        availableSizes: ["50", "52", "54"],
        materials: "Шерсть 95%, эластан 5%",
        colors: ["Темно-синий", "Серый", "Черный"],
        rating: 4.9,
        reviewsCount: 45,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(45, 4.9, "Костюм Hugo Boss Business")
    },
    {
        id: 9,
        name: "Футболка Supreme Box Logo",
        brand: "Supreme",
        price: 12990,
        oldPrice: 15990,
        discount: 19,
        category: "men",
        image: "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1583743814966-8936f5b7be1a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовая футболка с фирменным бокс-лого. Лимитированный тираж, толстый хлопок и качественный принт.",
        characteristics: {
            "Материал": "100% хлопок (джерси)",
            "Вес ткани": "180 г/м²",
            "Крой": "Regular Fit",
            "Принт": "Шелкография",
            "Цвет": "Красный, Черный, Белый",
            "Коллекция": "FW25",
            "Производство": "США",
            "Лимит": "Лимитированный тираж"
        },
        sizes: ["S", "M", "L", "XL"],
        availableSizes: ["M", "L", "XL"],
        materials: "100% хлопок джерси",
        colors: ["Красный", "Черный", "Белый"],
        rating: 4.7,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "5-9 дней",
        warranty: "30 дней",
        reviews: generateReviews(89, 4.7, "Футболка Supreme Box Logo")
    },
    {
        id: 10,
        name: "Шорты Adidas Tiro",
        brand: "Adidas",
        price: 3990,
        oldPrice: 5490,
        discount: 27,
        category: "men",
        image: "https://images.unsplash.com/photo-1598552099930-18c14961b89f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1598552099930-18c14961b89f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1595950653106-6c9ebd614d3a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Футбольные шорты с технологией AEROREADY. Легкие, дышащие и с карманом для мяча. Идеальны для тренировок.",
        characteristics: {
            "Материал": "Полиэстер 100%",
            "Технология": "AEROREADY",
            "Крой": "Regular Fit",
            "Карманы": "Боковые + карман для мяча",
            "Цвет": "Черный, Синий, Зеленый",
            "Назначение": "Футбол, тренировки",
            "Производство": "Вьетнам",
            "Вес": "180 г"
        },
        sizes: ["S", "M", "L", "XL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "Полиэстер 100%",
        colors: ["Черный", "Синий", "Зеленый"],
        rating: 4.6,
        reviewsCount: 134,
        inStock: true,
        deliveryTime: "2-5 дней",
        warranty: "30 дней",
        reviews: generateReviews(134, 4.6, "Шорты Adidas Tiro")
    },
    {
        id: 11,
        name: "Пальто Burberry Trench",
        brand: "Burberry",
        price: 89990,
        oldPrice: 119990,
        discount: 25,
        category: "men",
        image: "https://images.unsplash.com/photo-1539533113205-9d6b0a3c6f9f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1539533113205-9d6b0a3c6f9f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1525450824786-227cb6a5e3b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Легендарное тренч-пальто из габардина. Водоотталкивающая ткань, классический крой и фирменная клетка Burberry.",
        characteristics: {
            "Материал": "Габардин (хлопок/полиэстер)",
            "Крой": "Regular Fit",
            "Подкладка": "Шелк 100%",
            "Цвет": "Бежевый, Черный, Темно-синий",
            "Водоотталкивание": "Да",
            "Производство": "Великобритания",
            "Сезон": "Осень-весна",
            "Гарантия": "Пожизненная"
        },
        sizes: ["48", "50", "52", "54", "56"],
        availableSizes: ["50", "52", "54"],
        materials: "Габардин (хлопок/полиэстер)",
        colors: ["Бежевый", "Черный", "Темно-синий"],
        rating: 4.9,
        reviewsCount: 67,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "Пожизненная",
        reviews: generateReviews(67, 4.9, "Пальто Burberry Trench")
    },
    {
        id: 12,
        name: "Худи Stone Island Ghost",
        brand: "Stone Island",
        price: 27990,
        oldPrice: 34990,
        discount: 20,
        category: "men",
        image: "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1556821840-3a63f95609a7?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1578763460786-2305654e08bf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Худи из инновационной ткани с термохромным покрытием. Меняет цвет в зависимости от температуры окружающей среды.",
        characteristics: {
            "Материал": "Нейлон с термохромным покрытием",
            "Технология": "Thermo-sensitive",
            "Крой": "Regular Fit",
            "Капюшон": "С регулируемыми шнурками",
            "Цвет": "Зеленый/Синий, Черный/Серый",
            "Изменение цвета": "При 15-25°C",
            "Производство": "Италия",
            "Уход": "Ручная стирка"
        },
        sizes: ["S", "M", "L", "XL"],
        availableSizes: ["M", "L", "XL"],
        materials: "Нейлон с термохромным покрытием",
        colors: ["Зеленый", "Черный"],
        rating: 4.8,
        reviewsCount: 53,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(53, 4.8, "Худи Stone Island Ghost")
    },
    // ... (продолжение 35 товаров для мужской категории) ...

    // ЖЕНСКАЯ ОДЕЖДА (52 товара)
    {
        id: 48,
        name: "Платье Zara Floral Midi",
        brand: "Zara",
        price: 5990,
        oldPrice: 7990,
        discount: 25,
        category: "women",
        image: "https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1567095761054-7a02e69e5c43?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1572804013309-59a88b7e92f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Легкое летнее платье миди длины с цветочным принтом. Свободный крой, завязки на талии и удобные карманы.",
        characteristics: {
            "Материал": "100% хлопок",
            "Длина": "Мидди (до колена)",
            "Крой": "Свободный (oversize)",
            "Принт": "Цветочный",
            "Цвета": "Белый с цветами",
            "Стирка": "Ручная стирка при 30°C",
            "Производство": "Турция",
            "Сезон": "Весна-лето"
        },
        sizes: ["XS", "S", "M", "L", "XL"],
        availableSizes: ["XS", "S", "M", "L"],
        materials: "100% хлопок",
        colors: ["Белый с цветами", "Голубой с цветами", "Розовый с цветами"],
        rating: 4.6,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "2-4 дня",
        warranty: "30 дней",
        reviews: generateReviews(89, 4.6, "Платье Zara Floral Midi")
    },
    {
        id: 49,
        name: "Кожаная юбка Mango",
        brand: "Mango",
        price: 8990,
        oldPrice: 11990,
        discount: 25,
        category: "women",
        image: "https://images.unsplash.com/photo-1543087903-1ac2ec7aa8c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1543087903-1ac2ec7aa8c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1539008835657-9e8e9680c956?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Мини-юбка из экокожи с молнией сбоку. Универсальный вариант для создания дерзких образов.",
        characteristics: {
            "Материал": "Экокожа (полиуретан)",
            "Длина": "Мини",
            "Крой": "Прямой",
            "Застежка": "Молния сбоку",
            "Цвет": "Черный, Коричневый, Бордовый",
            "Стиль": "Кожаная юбка",
            "Производство": "Испания",
            "Сезон": "Круглый год"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M"],
        materials: "Полиуретан 100%",
        colors: ["Черный", "Коричневый", "Бордовый"],
        rating: 4.5,
        reviewsCount: 67,
        inStock: true,
        deliveryTime: "3-7 дней",
        warranty: "30 дней",
        reviews: generateReviews(67, 4.5, "Кожаная юбка Mango")
    },
    {
        id: 50,
        name: "Блузка Massimo Dutti Silk",
        brand: "Massimo Dutti",
        price: 7990,
        oldPrice: 10990,
        discount: 27,
        category: "women",
        image: "https://images.unsplash.com/photo-1586790170083-2f9ceadc732d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1586790170083-2f9ceadc732d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1585487000160-6eb9ce6b5aae?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Шелковая блузка с воротником-бантом. Элегантный вариант для офиса и вечерних выходов.",
        characteristics: {
            "Материал": "Шелк 100%",
            "Крой": "Regular Fit",
            "Воротник": "Бант",
            "Рукава": "Длинные",
            "Цвет": "Белый, Черный, Голубой",
            "Стиль": "Офис, вечер",
            "Производство": "Италия",
            "Уход": "Химчистка"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M", "L"],
        materials: "Шелк 100%",
        colors: ["Белый", "Черный", "Голубой"],
        rating: 4.7,
        reviewsCount: 78,
        inStock: true,
        deliveryTime: "5-10 дней",
        warranty: "30 дней",
        reviews: generateReviews(78, 4.7, "Блузка Massimo Dutti Silk")
    },
    {
        id: 51,
        name: "Джинсы Levi's 501 Original",
        brand: "Levi's",
        price: 8990,
        oldPrice: 11990,
        discount: 25,
        category: "women",
        image: "https://images.unsplash.com/photo-1541099649105-f69ad21a3246?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1541099649105-f69ad21a3246?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1542272604-787c3835535d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классические джинсы 501 в женском крое. Прямой крой, средняя посадка и аутентичный деним.",
        characteristics: {
            "Материал": "100% хлопок (деним)",
            "Крой": "Прямой (Straight)",
            "Посадка": "Средняя",
            "Застежка": "Пуговица",
            "Цвет": "Синий, Черный, Белый",
            "Стиль": "Классический",
            "Производство": "США",
            "Вес ткани": "14 унций"
        },
        sizes: ["25", "26", "27", "28", "29", "30"],
        availableSizes: ["26", "27", "28", "29"],
        materials: "100% хлопковый деним",
        colors: ["Синий", "Черный", "Белый"],
        rating: 4.8,
        reviewsCount: 145,
        inStock: true,
        deliveryTime: "3-6 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(145, 4.8, "Джинсы Levi's 501 Original")
    },
    {
        id: 52,
        name: "Пальто Max Mara Teddy",
        brand: "Max Mara",
        price: 89990,
        oldPrice: 119990,
        discount: 25,
        category: "women",
        image: "https://images.unsplash.com/photo-1539109136881-3be0616acf4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1539109136881-3be0616acf4b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1490481651871-ab68de25d43d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовое тэдди-пальто из мягкого кашемира и шерсти. Невероятно теплое и стильное зимнее пальто.",
        characteristics: {
            "Материал": "Кашемир 70%, шерсть 30%",
            "Крой": "Oversize",
            "Длина": "Мидди",
            "Цвет": "Бежевый, Коричневый, Серый",
            "Застежка": "Пуговицы",
            "Карманы": "2 боковых",
            "Производство": "Италия",
            "Сезон": "Зима"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["S", "M", "L"],
        materials: "Кашемир 70%, шерсть 30%",
        colors: ["Бежевый", "Коричневый", "Серый"],
        rating: 4.9,
        reviewsCount: 92,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "2 года",
        reviews: generateReviews(92, 4.9, "Пальто Max Mara Teddy")
    },
    {
        id: 53,
        name: "Свитшот Nike Oversize",
        brand: "Nike",
        price: 4990,
        oldPrice: 6990,
        discount: 29,
        category: "women",
        image: "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1523381210434-271e8be1f52b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1521572163474-6864f9cf17ab?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Удобный свитшот оверсайз с логотипом Nike. Идеален для повседневной носки и спортивного стиля.",
        characteristics: {
            "Материал": "80% хлопок, 20% полиэстер",
            "Крой": "Oversize",
            "Капюшон": "С регулируемыми шнурками",
            "Карманы": "Карман кенгуру",
            "Цвет": "Розовый, Серый, Черный",
            "Стиль": "Спортивный, повседневный",
            "Производство": "Вьетнам",
            "Сезон": "Осень-весна"
        },
        sizes: ["XS", "S", "M", "L", "XL"],
        availableSizes: ["S", "M", "L", "XL"],
        materials: "Хлопок 80%, полиэстер 20%",
        colors: ["Розовый", "Серый", "Черный"],
        rating: 4.7,
        reviewsCount: 112,
        inStock: true,
        deliveryTime: "2-4 дня",
        warranty: "30 дней",
        reviews: generateReviews(112, 4.7, "Свитшот Nike Oversize")
    },
    {
        id: 54,
        name: "Вечернее платье Reformation",
        brand: "Reformation",
        price: 14990,
        oldPrice: 19990,
        discount: 25,
        category: "women",
        image: "https://images.unsplash.com/photo-1595777457583-95e059d581b8?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1595777457583-95e059d581b8?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1515372039744-b8f02a3ae446?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Шелковое вечернее платье с разрезом. Элегантный минималистичный дизайн для особых occasions.",
        characteristics: {
            "Материал": "Шелк 100%",
            "Длина": "Макси",
            "Крой": "Облегающий",
            "Разрез": "Высокий боковой",
            "Цвет": "Черный, Бордовый, Изумрудный",
            "Спинка": "Открытая",
            "Производство": "США",
            "Уход": "Химчистка"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M"],
        materials: "Шелк 100%",
        colors: ["Черный", "Бордовый", "Изумрудный"],
        rating: 4.8,
        reviewsCount: 68,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "30 дней",
        reviews: generateReviews(68, 4.8, "Вечернее платье Reformation")
    },
    {
        id: 55,
        name: "Кардиган Uniqlo Cashmere",
        brand: "Uniqlo",
        price: 7990,
        oldPrice: 10990,
        discount: 27,
        category: "women",
        image: "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1591047139829-d91aecb6caea?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1576566588028-4147f3842f27?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Теплый кардиган из кашемира. Классический прямой крой, удобные карманы и мягкая текстура.",
        characteristics: {
            "Материал": "Кашемир 100%",
            "Крой": "Прямой",
            "Длина": "Мидди",
            "Карманы": "2 боковых",
            "Цвет": "Бежевый, Серый, Розовый",
            "Толщина": "Тонкий кашемир",
            "Производство": "Монголия",
            "Сезон": "Осень-зима"
        },
        sizes: ["XS", "S", "M", "L", "XL"],
        availableSizes: ["XS", "S", "M", "L"],
        materials: "Кашемир 100%",
        colors: ["Бежевый", "Серый", "Розовый"],
        rating: 4.7,
        reviewsCount: 156,
        inStock: true,
        deliveryTime: "3-7 дней",
        warranty: "30 дней",
        reviews: generateReviews(156, 4.7, "Кардиган Uniqlo Cashmere")
    },
    {
        id: 56,
        name: "Боди For Love & Lemons",
        brand: "For Love & Lemons",
        price: 6490,
        oldPrice: 8990,
        discount: 28,
        category: "women",
        image: "https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1583496661160-fb5886a0aaaa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1585487000160-6eb9ce6b5aae?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Кружевное боди с глубоким вырезом. Романтичный вариант для свиданий и вечерних выходов.",
        characteristics: {
            "Материал": "Кружево 100%",
            "Крой": "Облегающий",
            "Застежка": "Кнопки снизу",
            "Цвет": "Черный, Белый, Красный",
            "Стиль": "Романтичный",
            "Производство": "США",
            "Сезон": "Круглый год",
            "Уход": "Ручная стирка"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M"],
        materials: "Кружево 100%",
        colors: ["Черный", "Белый", "Красный"],
        rating: 4.6,
        reviewsCount: 73,
        inStock: true,
        deliveryTime: "5-10 дней",
        warranty: "30 дней",
        reviews: generateReviews(73, 4.6, "Боди For Love & Lemons")
    },
    {
        id: 57,
        name: "Юбка-карандаш Theory",
        brand: "Theory",
        price: 12990,
        oldPrice: 16990,
        discount: 24,
        category: "women",
        image: "https://images.unsplash.com/photo-1582418702059-97ebafb35d09?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1582418702059-97ebafb35d09?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1539008835657-9e8e9680c956?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классическая юбка-карандаш из шерсти. Идеальна для делового стиля и офисных будней.",
        characteristics: {
            "Материал": "Шерсть 95%, эластан 5%",
            "Длина": "До колена",
            "Крой": "Карандаш",
            "Застежка": "Молния сзади",
            "Цвет": "Черный, Серый, Синий",
            "Стиль": "Деловой",
            "Производство": "Италия",
            "Уход": "Химчистка"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M", "L"],
        materials: "Шерсть 95%, эластан 5%",
        colors: ["Черный", "Серый", "Синий"],
        rating: 4.8,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(89, 4.8, "Юбка-карандаш Theory")
    },
    {
        id: 58,
        name: "Топ Free People Lace",
        brand: "Free People",
        price: 3990,
        oldPrice: 5990,
        discount: 33,
        category: "women",
        image: "https://images.unsplash.com/photo-1515372039744-b8f02a3ae446?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1515372039744-b8f02a3ae446?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1586790170083-2f9ceadc732d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Кружевной топ с открытыми плечами. Бохо-стиль для летних фестивалей и пляжных вечеринок.",
        characteristics: {
            "Материал": "Хлопок 70%, кружево 30%",
            "Крой": "Свободный",
            "Плечи": "Открытые",
            "Цвет": "Белый, Черный, Телесный",
            "Стиль": "Бохо",
            "Производство": "США",
            "Сезон": "Лето",
            "Уход": "Ручная стирка"
        },
        sizes: ["XS", "S", "M", "L"],
        availableSizes: ["XS", "S", "M"],
        materials: "Хлопок 70%, кружево 30%",
        colors: ["Белый", "Черный", "Телесный"],
        rating: 4.5,
        reviewsCount: 124,
        inStock: true,
        deliveryTime: "4-8 дней",
        warranty: "30 дней",
        reviews: generateReviews(124, 4.5, "Топ Free People Lace")
    },
    // ... (продолжение 40 товаров для женской категории) ...

    // ОБУВЬ (41 товар)
    {
        id: 100,
        name: "Кроссовки Nike Air Force 1 '07",
        brand: "Nike",
        price: 12990,
        oldPrice: 15990,
        discount: 19,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1600185365926-3a2ce3cdb9eb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовые кроссовки Nike Air Force 1 '07. Белый кожаный верх, технология Air в подошве и неподвластный времени дизайн.",
        characteristics: {
            "Материал верха": "Натуральная кожа",
            "Материал подошвы": "Резина с Air-технологией",
            "Назначение": "Повседневные",
            "Цвет": "Белый, Черный, Красный",
            "Сезон": "Круглый год",
            "Производство": "Вьетнам",
            "Гарантия": "6 месяцев",
            "Вес": "450 г (пара)"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"],
        availableSizes: ["36", "37", "38", "39", "40", "41", "42", "43"],
        materials: "Натуральная кожа, резина, Air-технология",
        colors: ["Белый", "Черный", "Красный"],
        rating: 4.9,
        reviewsCount: 245,
        inStock: true,
        deliveryTime: "2-5 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(245, 4.9, "Кроссовки Nike Air Force 1 '07")
    },
    {
        id: 101,
        name: "Кроссовки Adidas Ultraboost 22",
        brand: "Adidas",
        price: 14990,
        oldPrice: 18990,
        discount: 21,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1542291026-7eec264c27ff?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1600185365483-8c21ba5c6bcf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Беговые кроссовки с технологией Boost для максимальной амортизации. Primeknit верх и Continental подметка.",
        characteristics: {
            "Материал верха": "Primeknit+",
            "Материал подошвы": "Boost + резина Continental",
            "Технология": "Boost, Primeknit, Torsion System",
            "Назначение": "Бег, повседневные",
            "Цвет": "Черный, Белый, Синий",
            "Производство": "Вьетнам",
            "Гарантия": "6 месяцев",
            "Вес": "310 г (пара)"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"],
        availableSizes: ["38", "39", "40", "41", "42", "43", "44"],
        materials: "Primeknit, Boost, резина Continental",
        colors: ["Черный", "Белый", "Синий"],
        rating: 4.8,
        reviewsCount: 189,
        inStock: true,
        deliveryTime: "3-7 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(189, 4.8, "Кроссовки Adidas Ultraboost 22")
    },
    {
        id: 102,
        name: "Туфли Steve Madden на каблуке",
        brand: "Steve Madden",
        price: 8990,
        oldPrice: 11990,
        discount: 25,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Элегантные туфли на устойчивом каблуке 8 см. Кожаный верх, удобная колодка для длительной носки.",
        characteristics: {
            "Материал верха": "Натуральная кожа",
            "Материал подошвы": "Резина",
            "Каблук": "8 см",
            "Носок": "Закрытый",
            "Цвет": "Черный, Нюдовый, Красный",
            "Сезон": "Круглый год",
            "Производство": "Италия",
            "Гарантия": "3 месяца"
        },
        sizes: ["35", "36", "37", "38", "39", "40"],
        availableSizes: ["36", "37", "38", "39"],
        materials: "Натуральная кожа, резина",
        colors: ["Черный", "Нюдовый", "Красный"],
        rating: 4.6,
        reviewsCount: 134,
        inStock: true,
        deliveryTime: "5-10 дней",
        warranty: "3 месяца",
        reviews: generateReviews(134, 4.6, "Туфли Steve Madden на каблуке")
    },
    {
        id: 103,
        name: "Ботинки Dr. Martens 1460",
        brand: "Dr. Martens",
        price: 12990,
        oldPrice: 15990,
        discount: 19,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовые ботинки на шнуровке с воздушной подушкой. Прочная кожа, знаменитая желтая строчка.",
        characteristics: {
            "Материал верха": "Гладкая кожа",
            "Материал подошвы": "PVC с воздушной подушкой",
            "Высота": "10 дырок",
            "Цвет": "Черный, Вишневый, Желтый",
            "Технология": "AirWair",
            "Производство": "Великобритания",
            "Гарантия": "1 год",
            "Вес": "1200 г (пара)"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"],
        availableSizes: ["38", "39", "40", "41", "42", "43"],
        materials: "Кожа, PVC, воздушная подушка",
        colors: ["Черный", "Вишневый", "Желтый"],
        rating: 4.7,
        reviewsCount: 278,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(278, 4.7, "Ботинки Dr. Martens 1460")
    },
    {
        id: 104,
        name: "Кроссовки New Balance 990v5",
        brand: "New Balance",
        price: 17990,
        oldPrice: 22990,
        discount: 22,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1600185365483-8c21ba5c6bcf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Премиальные кроссовки Made in USA. ENCAP технология, кожаный верх и максимальный комфорт.",
        characteristics: {
            "Материал верха": "Кожа, замша, сетка",
            "Материал подошвы": "ENCAP + резина",
            "Технология": "ENCAP, Ortholite",
            "Производство": "США",
            "Цвет": "Серый, Синий, Черный",
            "Назначение": "Повседневные",
            "Гарантия": "1 год",
            "Вес": "420 г (пара)"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44", "45"],
        availableSizes: ["39", "40", "41", "42", "43"],
        materials: "Кожа, замша, сетка, ENCAP",
        colors: ["Серый", "Синий", "Черный"],
        rating: 4.9,
        reviewsCount: 156,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "1 год",
        reviews: generateReviews(156, 4.9, "Кроссовки New Balance 990v5")
    },
    {
        id: 105,
        name: "Сандалии Birkenstock Arizona",
        brand: "Birkenstock",
        price: 7990,
        oldPrice: 10990,
        discount: 27,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1560343090-f0409e92791a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1560343090-f0409e92791a?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классические сандалии с пробковой стелькой. Анатомическая форма для здоровья стопы.",
        characteristics: {
            "Материал верха": "Натуральная кожа",
            "Стелька": "Пробка и латекс",
            "Подошва": "EVA",
            "Цвет": "Коричневый, Черный, Белый",
            "Анатомическая": "Да",
            "Производство": "Германия",
            "Сезон": "Лето",
            "Гарантия": "2 года"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42"],
        availableSizes: ["37", "38", "39", "40", "41"],
        materials: "Кожа, пробка, латекс, EVA",
        colors: ["Коричневый", "Черный", "Белый"],
        rating: 4.8,
        reviewsCount: 267,
        inStock: true,
        deliveryTime: "5-12 дней",
        warranty: "2 года",
        reviews: generateReviews(267, 4.8, "Сандалии Birkenstock Arizona")
    },
    {
        id: 106,
        name: "Кеды Converse Chuck 70",
        brand: "Converse",
        price: 6990,
        oldPrice: 8990,
        discount: 22,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1525966222134-fcfa99b8ae77?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1600269452121-4f2416e55c28?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Винтажные кеды с улучшенной конструкцией. Более толстая подошва, усиленные детали и комфортная стелька.",
        characteristics: {
            "Материал верха": "Хлопковый канвас",
            "Материал подошвы": "Резина",
            "Версия": "Chuck 70 (улучшенная)",
            "Цвет": "Черный, Белый, Красный",
            "Особенности": "Более толстая подошва, усиленный носок",
            "Производство": "Вьетнам",
            "Гарантия": "6 месяцев",
            "Вес": "350 г (пара)"
        },
        sizes: ["36", "37", "38", "39", "40", "41", "42", "43", "44"],
        availableSizes: ["37", "38", "39", "40", "41", "42", "43"],
        materials: "Хлопковый канвас, резина",
        colors: ["Черный", "Белый", "Красный"],
        rating: 4.7,
        reviewsCount: 312,
        inStock: true,
        deliveryTime: "3-8 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(312, 4.7, "Кеды Converse Chuck 70")
    },
    {
        id: 107,
        name: "Балетки Repetto",
        brand: "Repetto",
        price: 14990,
        oldPrice: 19990,
        discount: 25,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классические французские балетки ручной работы. Невероятно удобные и элегантные.",
        characteristics: {
            "Материал верха": "Натуральная кожа",
            "Материал подошвы": "Кожа",
            "Стиль": "Балетки",
            "Цвет": "Черный, Красный, Телесный",
            "Производство": "Франция (ручная работа)",
            "Гарантия": "1 год",
            "Сезон": "Весна-лето",
            "Особенности": "Гибкая подошва"
        },
        sizes: ["35", "36", "37", "38", "39"],
        availableSizes: ["36", "37", "38"],
        materials: "Натуральная кожа",
        colors: ["Черный", "Красный", "Телесный"],
        rating: 4.8,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "1 год",
        reviews: generateReviews(89, 4.8, "Балетки Repetto")
    },
    {
        id: 108,
        name: "Ботинки UGG Classic Short",
        brand: "UGG",
        price: 15990,
        oldPrice: 20990,
        discount: 24,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1551107696-a4b0c5a0d9a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1551107696-a4b0c5a0d9a2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1549317661-bd32c8ce0db2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовые угги из овчины. Невероятно теплые и мягкие ботинки для холодной зимы.",
        characteristics: {
            "Материал верха": "Овчина снаружи и внутри",
            "Подошва": "EVA с резиновыми вставками",
            "Высота": "Short (до лодыжки)",
            "Цвет": "Каштановый, Черный, Серый",
            "Теплоизоляция": "Двойная овчина",
            "Производство": "Австралия",
            "Сезон": "Зима",
            "Гарантия": "1 год"
        },
        sizes: ["36", "37", "38", "39", "40", "41"],
        availableSizes: ["37", "38", "39", "40"],
        materials: "Овчина, EVA, резина",
        colors: ["Каштановый", "Черный", "Серый"],
        rating: 4.9,
        reviewsCount: 423,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(423, 4.9, "Ботинки UGG Classic Short")
    },
    {
        id: 109,
        name: "Кроссовки Salomon XT-6",
        brand: "Salomon",
        price: 13990,
        oldPrice: 17990,
        discount: 22,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1606107557195-0e29a4b5b4aa?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1600185365483-8c21ba5c6bcf?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Трейловые кроссовки для бега по пересеченной местности. Технология SensiFit и агрессивный протектор.",
        characteristics: {
            "Материал верха": "Синтетическая сетка",
            "Технология": "SensiFit, Quicklace, Contagrip",
            "Назначение": "Трейлраннинг, хайкинг",
            "Протектор": "Агрессивный",
            "Цвет": "Оранжевый, Синий, Черный",
            "Производство": "Китай",
            "Гарантия": "6 месяцев",
            "Вес": "310 г (пара)"
        },
        sizes: ["38", "39", "40", "41", "42", "43", "44", "45"],
        availableSizes: ["39", "40", "41", "42", "43", "44"],
        materials: "Синтетическая сетка, Contagrip",
        colors: ["Оранжевый", "Синий", "Черный"],
        rating: 4.8,
        reviewsCount: 167,
        inStock: true,
        deliveryTime: "5-12 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(167, 4.8, "Кроссовки Salomon XT-6")
    },
    {
        id: 110,
        name: "Лоферы Gucci Horsebit",
        brand: "Gucci",
        price: 59990,
        oldPrice: 79990,
        discount: 25,
        category: "shoes",
        image: "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1543163521-1bf539c55dd2?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1549298916-b41d501d3772?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Легендарные лоферы с фирменной Horsebit пряжкой. Кожаный верх, кожаная подошва, ручная работа.",
        characteristics: {
            "Материал верха": "Натуральная кожа",
            "Материал подошвы": "Кожа",
            "Пряжка": "Металлическая Horsebit",
            "Цвет": "Черный, Коричневый, Бордовый",
            "Производство": "Италия (ручная работа)",
            "Гарантия": "2 года",
            "Сезон": "Круглый год",
            "Особенности": "Съемная стелька"
        },
        sizes: ["39", "40", "41", "42", "43", "44"],
        availableSizes: ["40", "41", "42", "43"],
        materials: "Натуральная кожа",
        colors: ["Черный", "Коричневый", "Бордовый"],
        rating: 4.9,
        reviewsCount: 78,
        inStock: true,
        deliveryTime: "14-28 дней",
        warranty: "2 года",
        reviews: generateReviews(78, 4.9, "Лоферы Gucci Horsebit")
    },
    // ... (продолжение 29 товаров для категории обуви) ...

    // АКСЕССУАРЫ (25 товаров)
    {
        id: 141,
        name: "Часы OLEVS Radiant Collection",
        brand: "UNICORN",
        price: 2565,
        oldPrice: 3078,
        discount: 17,
        category: "accessories",
        image: "https://a.imgfoto.host/2025/12/20/SNIMOK-EKRANA_20-12-2025_20440_www.thepoizon.ru.jpeg",
        images: [
            "https://a.imgfoto.host/2025/12/20/SNIMOK-EKRANA_20-12-2025_20440_www.thepoizon.ru.jpeg"
        ],
        description: "Шикарный аксессуар к каждому образу. Эксклюзивный дизайн, кварцевый механизм, ремешок из нержавеющей стали.",
        characteristics: {
            "Механизм": "Кварцевый",
            "Материал корпуса": "Нержавеющая сталь",
            "Стекло": "Минеральное укрепленное",
            "Водостойкость": "30м",
            "Питание": "Батарейка",
            "Цвет": "Розовый циферблат",
            "Производство": "Китай",
            "Гарантия": "1 год"
        },
        sizes: ["Универсальный"],
        availableSizes: ["Универсальный"],
        materials: "Нержавеющая сталь, минеральное стекло",
        colors: ["Розовый", "Серебристый"],
        rating: 4.3,
        reviewsCount: 3,
        inStock: true,
        deliveryTime: "1-3 дня",
        warranty: "1 год",
        reviews: [
            {
                id: 1766245600370,
                author: "Лиза",
                rating: 4,
                date: "2025-12-20",
                text: "Понравились часики, подошли к моему аутфиту 🎊"
            },
            {
                id: 1766245624336,
                author: "Никита",
                rating: 5,
                date: "2025-12-20",
                text: "Брал девушке, пришло за 2 дня, с кайфом"
            },
            {
                id: 1766245665148,
                author: "Костя",
                rating: 4,
                date: "2025-12-20",
                text: "Качество ахуен... Вот за что я люблю шоп так это за такие быстрые доставки, не ошибся в выборе)"
            }
        ]
    },
    {
        id: 142,
        name: "Цепочка Asia Star Титановая",
        brand: "UNICORN",
        price: 1439,
        oldPrice: 1727,
        discount: 17,
        category: "accessories",
        image: "https://cdn-img.thepoizon.ru/stark/stark-web/1646287682/9f63465586069a460be7154a8533f2d0.jpg?x-oss-process=image/format,webp/resize,w_800",
        images: [
            "https://cdn-img.thepoizon.ru/stark/stark-web/1646287682/9f63465586069a460be7154a8533f2d0.jpg?x-oss-process=image/format,webp/resize,w_800"
        ],
        description: "Стильная и легкая цепочка из титановой стали с крестом. Идеальный подарок для себя или близких.",
        characteristics: {
            "Материал": "Титановая сталь",
            "Длина": "40+5 см",
            "Цвет": "Серебристый",
            "Подвеска": "Крест",
            "Застежка": "Лобстер",
            "Вес": "15 г",
            "Производство": "Китай",
            "Гарантия": "6 месяцев"
        },
        sizes: ["40+5 см", "45+5 см", "50+5 см"],
        availableSizes: ["40+5 см", "45+5 см"],
        materials: "Титановая сталь",
        colors: ["Серебристый"],
        rating: 4.8,
        reviewsCount: 4,
        inStock: true,
        deliveryTime: "1-3 дня",
        warranty: "6 месяцев",
        reviews: [
            {
                id: 1766246173709,
                author: "Яна",
                rating: 5,
                date: "2025-12-20",
                text: "Очень стильная, крест просто потрясающий!"
            },
            {
                id: 1766246186784,
                author: "Мари",
                rating: 5,
                date: "2025-12-20",
                text: "Эта покупка была отличной, товар с очень высоким соотношением цены и качества, качество превосходное."
            },
            {
                id: 1766246201483,
                author: "ЮЛЯ🎇",
                rating: 5,
                date: "2025-12-20",
                text: "Подарок, очень понравилось! Стильный и модный минимализм! Нравится!"
            },
            {
                id: 1766246212642,
                author: "Даниил",
                rating: 4,
                date: "2025-12-20",
                text: "Очень красивое украшение, приятно держать в руках, ощущается вес, совсем нет ощущения дешевизны!"
            }
        ]
    },
    {
        id: 143,
        name: "Сумка Michael Kors Jet Set",
        brand: "Michael Kors",
        price: 18990,
        oldPrice: 23990,
        discount: 21,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1591343395082-e120087004b4?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Женская сумка через плечо из натуральной кожи. Вместительное основное отделение, регулируемый ремень.",
        characteristics: {
            "Материал": "Натуральная кожа",
            "Размеры": "25 × 18 × 8 см",
            "Ремень": "Регулируемый (60-120 см)",
            "Фурнитура": "Золотистый металл",
            "Карманы": "Основной + внутренний",
            "Цвет": "Черный, Бежевый, Бордовый",
            "Производство": "США",
            "Гарантия": "2 года"
        },
        sizes: ["Один размер"],
        availableSizes: ["Один размер"],
        materials: "Натуральная кожа, металлическая фурнитура",
        colors: ["Черный", "Бежевый", "Бордовый"],
        rating: 4.8,
        reviewsCount: 145,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "2 года",
        reviews: generateReviews(145, 4.8, "Сумка Michael Kors Jet Set")
    },
    {
        id: 144,
        name: "Ремень Gucci GG Marmont",
        brand: "Gucci",
        price: 24990,
        oldPrice: 31990,
        discount: 22,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Мужской кожаный ремень с фирменной пряжкой GG Marmont. Премиальное качество и узнаваемый дизайн.",
        characteristics: {
            "Материал": "Натуральная телячья кожа",
            "Пряжка": "Металлическая GG Marmont",
            "Ширина": "3.5 см",
            "Длина": "105-120 см",
            "Цвет": "Черный, Коричневый",
            "Производство": "Италия",
            "Гарантия": "1 год",
            "Упаковка": "Подарочная коробка"
        },
        sizes: ["95-110 см", "105-120 см"],
        availableSizes: ["105-120 см"],
        materials: "Натуральная кожа, металлическая пряжка",
        colors: ["Черный", "Коричневый"],
        rating: 4.7,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "1 год",
        reviews: generateReviews(89, 4.7, "Ремень Gucci GG Marmont")
    },
    {
        id: 145,
        name: "Солнцезащитные очки Ray-Ban Aviator",
        brand: "Ray-Ban",
        price: 12990,
        oldPrice: 16990,
        discount: 24,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1572635196237-14b3f281503f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1572635196237-14b3f281503f?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1511499767150-a48a237f0083?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Классические авиаторы с зеркальными линзами G-15. Защита от ультрафиолета 100%, металлическая оправа.",
        characteristics: {
            "Тип": "Авиаторы",
            "Линзы": "Стекло G-15 (зеленые)",
            "Защита от UV": "100% UV400",
            "Оправа": "Металлическая",
            "Цвет": "Золотистая оправа, зеленые линзы",
            "Производство": "Италия",
            "Гарантия": "2 года",
            "Футляр": "В комплекте"
        },
        sizes: ["Универсальный"],
        availableSizes: ["Универсальный"],
        materials: "Металл, стекло G-15",
        colors: ["Золотистая", "Серебристая"],
        rating: 4.9,
        reviewsCount: 312,
        inStock: true,
        deliveryTime: "5-12 дней",
        warranty: "2 года",
        reviews: generateReviews(312, 4.9, "Солнцезащитные очки Ray-Ban Aviator")
    },
    {
        id: 146,
        name: "Шарф Burberry Check Cashmere",
        brand: "Burberry",
        price: 24990,
        oldPrice: 32990,
        discount: 24,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1548365328-8c6db3220e4c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1548365328-8c6db3220e4c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1525450824786-227cb6a5e3b1?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Кашемировый шарф с фирменной клеткой Burberry. Невероятно мягкий и теплый аксессуар для холодной зимы.",
        characteristics: {
            "Материал": "Кашемир 100%",
            "Размеры": "180 × 30 см",
            "Принт": "Клетка Burberry",
            "Цвет": "Бежевый/черный/красный",
            "Вес": "120 г",
            "Производство": "Шотландия",
            "Гарантия": "Пожизненная",
            "Упаковка": "Подарочная коробка"
        },
        sizes: ["180 × 30 см"],
        availableSizes: ["180 × 30 см"],
        materials: "Кашемир 100%",
        colors: ["Бежевый/черный/красный"],
        rating: 4.9,
        reviewsCount: 78,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "Пожизненная",
        reviews: generateReviews(78, 4.9, "Шарф Burberry Check Cashmere")
    },
    {
        id: 147,
        name: "Кошелек Louis Vuitton Zippy",
        brand: "Louis Vuitton",
        price: 59990,
        oldPrice: 79990,
        discount: 25,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1584917865442-de89df76afd3?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1583394838336-acd977736f90?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Кожаный кошелек на молнии с монограммой LV. Множество отделений для карт, купюр и мелочи.",
        characteristics: {
            "Материал": "Натуральная кожа с монограммой",
            "Размеры": "19 × 10 см",
            "Замок": "Молния",
            "Отделения": "12 слотов для карт, 2 отделения для купюр",
            "Цвет": "Коричневый монограмма",
            "Производство": "Франция",
            "Гарантия": "Пожизненная",
            "Упаковка": "Подарочная коробка и пакет"
        },
        sizes: ["Один размер"],
        availableSizes: ["Один размер"],
        materials: "Натуральная кожа, металлическая фурнитура",
        colors: ["Коричневый монограмма"],
        rating: 4.8,
        reviewsCount: 56,
        inStock: true,
        deliveryTime: "14-28 дней",
        warranty: "Пожизненная",
        reviews: generateReviews(56, 4.8, "Кошелек Louis Vuitton Zippy")
    },
    {
        id: 148,
        name: "Шапка Moncler Beanie",
        brand: "Moncler",
        price: 8990,
        oldPrice: 11990,
        discount: 25,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1548365328-8c6db3220e4c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Теплая бини из шерсти мериноса. Логотип Moncler спереди, эластичная резинка для идеальной посадки.",
        characteristics: {
            "Материал": "Шерсть мериноса 100%",
            "Тип": "Бини (beanie)",
            "Логотип": "Вышитый спереди",
            "Цвет": "Черный, Серый, Красный",
            "Эластичность": "Высокая",
            "Производство": "Италия",
            "Сезон": "Зима",
            "Гарантия": "1 год"
        },
        sizes: ["Универсальный"],
        availableSizes: ["Универсальный"],
        materials: "Шерсть мериноса 100%",
        colors: ["Черный", "Серый", "Красный"],
        rating: 4.7,
        reviewsCount: 134,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "1 год",
        reviews: generateReviews(134, 4.7, "Шапка Moncler Beanie")
    },
    {
        id: 149,
        name: "Браслет Pandora Moments",
        brand: "Pandora",
        price: 4990,
        oldPrice: 6990,
        discount: 29,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Серебряный браслет с подвесками на выбор. Можно собирать свою уникальную историю с разными шармами.",
        characteristics: {
            "Материал": "Серебро 925",
            "Длина": "Регулируемая (18-21 см)",
            "Застежка": "Лобстер",
            "Подвески": "В комплекте 2 шарма",
            "Цвет": "Серебристый",
            "Производство": "Таиланд",
            "Гарантия": "2 года",
            "Упаковка": "Подарочная коробка"
        },
        sizes: ["18-21 см"],
        availableSizes: ["18-21 см"],
        materials: "Серебро 925",
        colors: ["Серебристый"],
        rating: 4.6,
        reviewsCount: 289,
        inStock: true,
        deliveryTime: "5-12 дней",
        warranty: "2 года",
        reviews: generateReviews(289, 4.6, "Браслет Pandora Moments")
    },
    {
        id: 150,
        name: "Рюкзак Herschel Little America",
        brand: "Herschel",
        price: 7990,
        oldPrice: 10990,
        discount: 27,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Культовый рюкзак с магнитными застежками. Вместительный, с ноутбучным отделением и боковыми карманами.",
        characteristics: {
            "Материал": "Полиэстер",
            "Объем": "25 л",
            "Отделения": "Основное + ноутбучное (15')",
            "Карманы": "Передний, 2 боковых",
            "Цвет": "Черный, Серый, Синий",
            "Производство": "Вьетнам",
            "Гарантия": "1 год",
            "Вес": "800 г"
        },
        sizes: ["Один размер"],
        availableSizes: ["Один размер"],
        materials: "Полиэстер",
        colors: ["Черный", "Серый", "Синий"],
        rating: 4.8,
        reviewsCount: 456,
        inStock: true,
        deliveryTime: "3-8 дней",
        warranty: "1 год",
        reviews: generateReviews(456, 4.8, "Рюкзак Herschel Little America")
    },
    {
        id: 151,
        name: "Зонт Burberry Check",
        brand: "Burberry",
        price: 14990,
        oldPrice: 19990,
        discount: 25,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1534273364873-434ba695e5ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1534273364873-434ba695e5ca?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1548365328-8c6db3220e4c?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Складной зонт с фирменной клеткой Burberry. Автоматическое открытие/закрытие, ветроустойчивая конструкция.",
        characteristics: {
            "Тип": "Складной, автоматический",
            "Диаметр": "105 см",
            "Материал": "Полиэстер с пропиткой",
            "Принт": "Клетка Burberry",
            "Каркас": "Сталь, 8 спиц",
            "Производство": "Великобритания",
            "Гарантия": "1 год",
            "Футляр": "В комплекте"
        },
        sizes: ["Один размер"],
        availableSizes: ["Один размер"],
        materials: "Полиэстер, сталь",
        colors: ["Бежевый/черный/красный"],
        rating: 4.7,
        reviewsCount: 67,
        inStock: true,
        deliveryTime: "10-21 день",
        warranty: "1 год",
        reviews: generateReviews(67, 4.7, "Зонт Burberry Check")
    },
    {
        id: 152,
        name: "Перчатки The North Face Etip",
        brand: "The North Face",
        price: 4990,
        oldPrice: 6990,
        discount: 29,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Термоперчатки с сенсорными кончиками пальцев. Позволяют пользоваться смартфоном на морозе.",
        characteristics: {
            "Материал": "Флис, полиэстер",
            "Технология": "Etip (сенсорные кончики)",
            "Размер": "S, M, L, XL",
            "Цвет": "Черный, Синий, Красный",
            "Теплоизоляция": "Флисовая подкладка",
            "Производство": "Вьетнам",
            "Сезон": "Зима",
            "Гарантия": "6 месяцев"
        },
        sizes: ["S", "M", "L", "XL"],
        availableSizes: ["M", "L"],
        materials: "Флис, полиэстер",
        colors: ["Черный", "Синий", "Красный"],
        rating: 4.6,
        reviewsCount: 189,
        inStock: true,
        deliveryTime: "5-10 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(189, 4.6, "Перчатки The North Face Etip")
    },
    {
        id: 153,
        name: "Поясная сумка Nike Heritage",
        brand: "Nike",
        price: 3990,
        oldPrice: 5990,
        discount: 33,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1553062407-98eeb64c6a62?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Стильная поясная сумка для активного образа жизни. Водонепроницаемый материал, регулируемый ремень.",
        characteristics: {
            "Материал": "Полиэстер",
            "Объем": "3 л",
            "Отделения": "Основное + передний карман",
            "Ремень": "Регулируемый (60-130 см)",
            "Цвет": "Черный, Серый, Неоновый",
            "Водонепроницаемость": "Да",
            "Производство": "Вьетнам",
            "Гарантия": "30 дней"
        },
        sizes: ["Один размер"],
        availableSizes: ["Один размер"],
        materials: "Полиэстер",
        colors: ["Черный", "Серый", "Неоновый"],
        rating: 4.5,
        reviewsCount: 234,
        inStock: true,
        deliveryTime: "3-7 дней",
        warranty: "30 дней",
        reviews: generateReviews(234, 4.5, "Поясная сумка Nike Heritage")
    },
    {
        id: 154,
        name: "Кепка New Era 59Fifty",
        brand: "New Era",
        price: 4990,
        oldPrice: 6990,
        discount: 29,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1588850561407-ed78c282e89b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1588850561407-ed78c282e89b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1576871337632-b9aef4c17ab9?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Бейсболка с жестким козырьком и вышитым логотипом. Официальная лицензия MLB, качественная строчка.",
        characteristics: {
            "Материал": "Шерсть 100%",
            "Тип": "59Fifty (жесткий козырек)",
            "Размер": "Универсальный (регулируемый)",
            "Логотип": "Вышитый спереди",
            "Команда": "New York Yankees",
            "Производство": "США",
            "Гарантия": "6 месяцев",
            "Особенности": "Официальная лицензия MLB"
        },
        sizes: ["Универсальный"],
        availableSizes: ["Универсальный"],
        materials: "Шерсть 100%",
        colors: ["Синий/белый", "Черный/оранжевый"],
        rating: 4.7,
        reviewsCount: 167,
        inStock: true,
        deliveryTime: "7-14 дней",
        warranty: "6 месяцев",
        reviews: generateReviews(167, 4.7, "Кепка New Era 59Fifty")
    },
    {
        id: 155,
        name: "Ожерелье Tiffany & Co. Return to Tiffany",
        brand: "Tiffany & Co.",
        price: 49990,
        oldPrice: 69990,
        discount: 29,
        category: "accessories",
        image: "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
        images: [
            "https://images.unsplash.com/photo-1535632066927-ab7c9ab60908?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80",
            "https://images.unsplash.com/photo-1605100804763-247f67b3557e?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80"
        ],
        description: "Серебряное ожерелье с фирменным сердечком и гравировкой. Классический дизайн, подарочная упаковка Tiffany.",
        characteristics: {
            "Материал": "Серебро 925",
            "Длина": "40 см + 5 см удлинитель",
            "Кулон": "Сердечко с гравировкой",
            "Цвет": "Серебристый",
            "Производство": "США",
            "Гарантия": "Пожизненная",
            "Упаковка": "Подарочная коробка Tiffany",
            "Гравировка": "Return to Tiffany"
        },
        sizes: ["40+5 см"],
        availableSizes: ["40+5 см"],
        materials: "Серебро 925",
        colors: ["Серебристый"],
        rating: 4.9,
        reviewsCount: 89,
        inStock: true,
        deliveryTime: "14-28 дней",
        warranty: "Пожизненная",
        reviews: generateReviews(89, 4.9, "Ожерелье Tiffany & Co. Return to Tiffany")
    },
    // ... (продолжение 10 товаров для категории аксессуаров) ...
];
        
        // Application state
        let categories = {};
        let products = [];
        let currentUserId = null;
        let userData = null;
        let currentCategory = '';
        let isAdmin = false;
        let isInitialized = false;
        let telegramUsername = '';
        let telegramFirstName = '';
        let telegramLastName = '';
        let telegramUserId = '';
        let activePromoCode = null;
        let promoDiscount = 0;
        let currentProductId = null;
        let selectedSize = null;
        let selectedQuantity = 1;
        let lastPage = 'home';
        
        // Cloud sync variables
        let cloudGistId = localStorage.getItem('unicorn_cloud_gist_id') || GITHUB_GIST_ID;
        let lastCloudSync = localStorage.getItem('unicorn_last_cloud_sync') || null;
        let cloudSynced = false;

        // ==============================================
        // ИСПРАВЛЕННАЯ ФУНКЦИЯ ИНИЦИАЛИЗАЦИИ
        // ==============================================

        async function initApp() {
            try {
                showLoading(true);
                
                // Проверяем и загружаем настройки облака
                cloudGistId = localStorage.getItem('unicorn_cloud_gist_id') || GITHUB_GIST_ID;
                lastCloudSync = localStorage.getItem('unicorn_last_cloud_sync') || null;
                
                // Автоматическая загрузка из облака при каждом открытии
                const gistId = localStorage.getItem('unicorn_cloud_gist_id');
                if (gistId) {
                    try {
                        const response = await fetch(`https://api.github.com/gists/${gistId}`);
                        if (response.ok) {
                            const gist = await response.json();
                            const content = gist.files['unicorn_data.json'].content;
                            const cloudData = JSON.parse(content);
                            
                            // Обновляем данные
                            categories = cloudData.categories;
                            products = cloudData.products;
                            
                            // Сохраняем локально
                            saveCategories();
                            saveProducts();
                            
                            console.log('✅ Данные загружены из облака');
                        }
                    } catch (error) {
                        console.warn('⚠️ Не удалось загрузить из облака:', error);
                    }
                }
                
                // Восстанавливаем данные пользователя из localStorage
                restoreUserSession();
                
                // Загружаем основные данные
                await loadAllData();
                
                // Определяем ID пользователя
                let userIdFromHash = null;
                const hash = window.location.hash;
                
                if (hash.includes('profile-')) {
                    userIdFromHash = hash.split('profile-')[1];
                }
                
                // Приоритет: Telegram ID > ID из хэша > сохраненный ID > новый ID
                if (telegramUserId) {
                    currentUserId = telegramUserId;
                    console.log('Используем Telegram ID:', currentUserId);
                } else if (userIdFromHash) {
                    currentUserId = decodeURIComponent(userIdFromHash);
                    console.log('Используем ID из хэша:', currentUserId);
                } else if (localStorage.getItem('unicorn_userId')) {
                    currentUserId = localStorage.getItem('unicorn_userId');
                    console.log('Используем сохраненный ID:', currentUserId);
                } else {
                    const randomNum = Math.floor(1000 + Math.random() * 9000);
                    currentUserId = `user_${Date.now()}_${randomNum}`;
                    console.log('Создан новый ID:', currentUserId);
                }
                
                // Сохраняем ID пользователя для будущих сессий
                localStorage.setItem('unicorn_userId', currentUserId);
                
                // Получаем данные пользователя
                userData = getUserData(currentUserId);
                
                // Проверяем права администратора
                isAdmin = checkAdminRights();
                
                // Инициализируем интерфейс
                await initializeUI();
                
                // Показываем приветствие, если это первый визит
                if (!localStorage.getItem('unicorn_welcome_shown')) {
                    setTimeout(() => {
                        showNotification('Добро пожаловать в Unicorn Store! 🦄');
                        localStorage.setItem('unicorn_welcome_shown', 'true');
                    }, 500);
                }
                
                // Проверяем акции
                checkForPromotions();
                
                isInitialized = true;
                
            } catch (error) {
                console.error('Ошибка инициализации приложения:', error);
                showNotification('Ошибка загрузки приложения');
            } finally {
                showLoading(false);
            }
        }

        // ==============================================
        // ОСНОВНЫЕ ФУНКЦИИ СИНХРОНИЗАЦИИ С ОБЛАКОМ
        // ==============================================

        // Функция синхронизации с облаком (GitHub Gist)
        async function syncToCloud() {
            try {
                if (!GITHUB_TOKEN || GITHUB_TOKEN === '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') {
                    showNotification('GitHub token не настроен. Пожалуйста, настройте токен в коде.');
                    return;
                }
                
                showSyncStatus('Синхронизация с облаком...', 'info');
                
                const dataToSync = {
                    categories: categories,
                    products: products,
                    promoCodes: JSON.parse(localStorage.getItem('unicorn_promocodes')) || [],
                    allOrders: JSON.parse(localStorage.getItem('unicorn_all_orders')) || [],
                    timestamp: new Date().toISOString(),
                    syncedBy: currentUserId,
                    version: '1.0'
                };
                
                let gistId = cloudGistId;
                
                if (!gistId) {
                    // Создаем новый Gist
                    const response = await fetch('https://api.github.com/gists', {
                        method: 'POST',
                        headers: {
                            'Authorization': `token ${GITHUB_TOKEN}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            description: 'UNICORN Shop Cloud Data',
                            public: false,
                            files: {
                                'unicorn_data.json': {
                                    content: JSON.stringify(dataToSync, null, 2)
                                }
                            }
                        })
                    });
                    
                    if (!response.ok) {
                        throw new Error('Ошибка создания Gist');
                    }
                    
                    const result = await response.json();
                    gistId = result.id;
                    cloudGistId = gistId;
                    localStorage.setItem('unicorn_cloud_gist_id', gistId);
                    
                    showSyncStatus('Облако создано и синхронизировано!', 'success');
                    
                } else {
                    // Обновляем существующий Gist
                    const response = await fetch(`https://api.github.com/gists/${gistId}`, {
                        method: 'PATCH',
                        headers: {
                            'Authorization': `token ${GITHUB_TOKEN}`,
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            description: 'UNICORN Shop Cloud Data - Updated',
                            files: {
                                'unicorn_data.json': {
                                    content: JSON.stringify(dataToSync, null, 2)
                                }
                            }
                        })
                    });
                    
                    if (!response.ok) {
                        if (response.status === 404) {
                            // Gist не найден, создаем новый
                            cloudGistId = '';
                            localStorage.removeItem('unicorn_cloud_gist_id');
                            await syncToCloud();
                            return;
                        }
                        throw new Error('Ошибка обновления Gist');
                    }
                    
                    showSyncStatus('Данные синхронизированы с облаком!', 'success');
                }
                
                lastCloudSync = new Date().toISOString();
                localStorage.setItem('unicorn_last_cloud_sync', lastCloudSync);
                cloudSynced = true;
                
                updateCloudStatus();
                
                // Сохраняем в localStorage как резервную копию
                localStorage.setItem('unicorn_cloud_backup', JSON.stringify(dataToSync));
                
                // Автоматически загружаем данные на других вкладках
                if ('BroadcastChannel' in window) {
                    const channel = new BroadcastChannel('unicorn_cloud_sync');
                    channel.postMessage({ action: 'cloud_updated', timestamp: lastCloudSync });
                }
                
            } catch (error) {
                console.error('Ошибка синхронизации с облаком:', error);
                showSyncStatus('Ошибка синхронизации', 'error');
                
                // Пробуем сохранить в localStorage как запасной вариант
                try {
                    const dataToSync = {
                        categories: categories,
                        products: products,
                        timestamp: new Date().toISOString()
                    };
                    localStorage.setItem(CLOUD_STORAGE_KEY, JSON.stringify(dataToSync));
                    showNotification('Данные сохранены локально (облако недоступно)');
                } catch (e) {
                    console.error('Ошибка локального сохранения:', e);
                }
            }
        }

        // Функция загрузки данных из облака
        async function loadFromCloud() {
            try {
                showSyncStatus('Загрузка данных из облака...', 'info');
                
                if (!cloudGistId) {
                    showSyncStatus('Облако не настроено', 'error');
                    return;
                }
                
                const response = await fetch(`https://api.github.com/gists/${cloudGistId}`);
                
                if (!response.ok) {
                    if (response.status === 404) {
                        showSyncStatus('Облако не найдено', 'error');
                        cloudGistId = '';
                        localStorage.removeItem('unicorn_cloud_gist_id');
                        return;
                    }
                    throw new Error('Ошибка загрузки Gist');
                }
                
                const gist = await response.json();
                const content = gist.files['unicorn_data.json'].content;
                const cloudData = JSON.parse(content);
                
                // Проверяем версию данных
                if (!cloudData.products || !cloudData.categories) {
                    throw new Error('Неверный формат данных в облаке');
                }
                
                // Обновляем локальные данные
                categories = cloudData.categories;
                products = cloudData.products;
                
                // Обновляем дополнительные данные если они есть
                if (cloudData.promoCodes) {
                    localStorage.setItem('unicorn_promocodes', JSON.stringify(cloudData.promoCodes));
                }
                
                if (cloudData.allOrders) {
                    localStorage.setItem('unicorn_all_orders', JSON.stringify(cloudData.allOrders));
                }
                
                // Сохраняем локально
                saveCategories();
                saveProducts();
                
                lastCloudSync = cloudData.timestamp;
                localStorage.setItem('unicorn_last_cloud_sync', lastCloudSync);
                cloudSynced = true;
                
                showSyncStatus('Данные загружены из облака!', 'success');
                updateCloudStatus();
                
                // Обновляем UI
                if (isInitialized) {
                    loadMainCategories();
                    loadPopularProducts();
                    loadAdminData();
                    
                    const activePage = document.querySelector('.page.active').id;
                    if (activePage === 'home') {
                        loadMainCategories();
                        loadPopularProducts();
                    } else if (activePage === 'categories') {
                        loadCategoriesPage();
                    } else if (activePage === 'category-page') {
                        loadCategoryPage(currentCategory);
                    } else if (activePage === 'favorites') {
                        loadFavoritesPage();
                    }
                }
                
            } catch (error) {
                console.error('Ошибка загрузки из облака:', error);
                showSyncStatus('Ошибка загрузки из облака', 'error');
                
                // Пробуем загрузить из localStorage как запасной вариант
                try {
                    const localCloudData = localStorage.getItem(CLOUD_STORAGE_KEY);
                    if (localCloudData) {
                        const data = JSON.parse(localCloudData);
                        if (data.categories && data.products) {
                            categories = data.categories;
                            products = data.products;
                            saveCategories();
                            saveProducts();
                            
                            showNotification('Данные загружены из локального кэша');
                            
                            if (isInitialized) {
                                loadMainCategories();
                                loadPopularProducts();
                                loadAdminData();
                            }
                        }
                    }
                } catch (e) {
                    console.error('Ошибка загрузки локального кэша:', e);
                }
            }
        }

        // Функция обновления статуса облака в UI
        function updateCloudStatus() {
            const cloudStatusElement = document.getElementById('cloudStatus');
            if (!cloudStatusElement) return;
            
            if (cloudSynced && lastCloudSync) {
                const syncDate = new Date(lastCloudSync);
                cloudStatusElement.innerHTML = `
                    Статус: <span style="color: var(--success);">Синхронизировано</span><br>
                    Последняя синхронизация: ${syncDate.toLocaleDateString('ru-RU')} ${syncDate.toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'})}
                `;
            } else if (cloudGistId) {
                cloudStatusElement.innerHTML = 'Статус: <span style="color: var(--warning);">Требуется синхронизация</span>';
            } else {
                cloudStatusElement.innerHTML = 'Статус: <span style="color: var(--gray);">Облако не настроено</span>';
            }
        }

        // Функция показа статуса синхронизации
        function showSyncStatus(message, type = 'info') {
            const syncStatus = document.getElementById('syncStatus');
            const syncText = document.getElementById('syncText');
            
            if (!syncStatus || !syncText) return;
            
            // Устанавливаем цвет в зависимости от типа
            const colors = {
                'info': 'var(--info)',
                'success': 'var(--success)',
                'error': 'var(--secondary)',
                'warning': 'var(--warning)'
            };
            
            syncStatus.style.background = colors[type] || colors.info;
            syncText.textContent = message;
            syncStatus.classList.add('show');
            
            // Скрываем через 3 секунды
            setTimeout(() => {
                syncStatus.classList.remove('show');
            }, 3000);
        }

        // ==============================================
        // ОСНОВНЫЕ ФУНКЦИИ ПРИЛОЖЕНИЯ
        // ==============================================

        function checkAdminRights() {
            console.log('Проверка прав администратора:');
            console.log('- Текущий ID:', currentUserId);
            console.log('- Telegram ID:', telegramUserId);
            console.log('- Telegram username:', telegramUsername);
            
            if (telegramUserId && telegramUserId === ADMIN_USER_ID) {
                console.log('✅ Администратор по Telegram ID');
                return true;
            }
            
            if (currentUserId && currentUserId === ADMIN_USER_ID) {
                console.log('✅ Администратор по текущему ID');
                return true;
            }
            
            if (telegramUsername && (telegramUsername === 'barizhka' || telegramUsername === 'admin')) {
                console.log('✅ Администратор по Telegram username');
                return true;
            }
            
            if (userData && userData.name && userData.name.toLowerCase().includes('админ')) {
                console.log('✅ Администратор по имени');
                return true;
            }
            
            console.log('❌ Не администратор');
            return false;
        }

        async function loadAllData() {
    console.log('🚀 Загрузка 165 товаров из кода...');
    
    // Всегда берем данные из defaultProducts и defaultCategories
    categories = JSON.parse(JSON.stringify(defaultCategories));
    products = JSON.parse(JSON.stringify(defaultProducts));
    
    // Сохраняем в localStorage для резерва
    saveCategories();
    saveProducts();
    
    console.log(`✅ Загружено: ${products.length} товаров`);
    console.log(`✅ Категорий: ${Object.keys(categories).length}`);
    
    // Показываем несколько товаров для проверки
    if (products.length > 0) {
        console.log('🎯 Первые 5 товаров:');
        products.slice(0, 5).forEach(p => {
            console.log(`   ${p.id}. ${p.name} - ${p.price}₽`);
        });
    }
    
    return true;
}

        // Функция сохранения сессии пользователя
        function saveUserSession() {
            if (!userData) return;
            
            try {
                // Сохраняем основные данные пользователя
                localStorage.setItem('unicorn_userId', currentUserId);
                
                // Сохраняем полные данные пользователя в общую базу
                const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
                users[currentUserId] = userData;
                localStorage.setItem('unicorn_users', JSON.stringify(users));
                
                console.log('Сессия сохранена:', currentUserId);
            } catch (error) {
                console.error('Ошибка сохранения сессии:', error);
            }
        }

        // Функция восстановления сессии пользователя
        function restoreUserSession() {
            try {
                // Восстанавливаем Telegram данные если они есть
                telegramUsername = localStorage.getItem('unicorn_telegramUsername') || '';
                telegramFirstName = localStorage.getItem('unicorn_telegramFirstName') || '';
                telegramLastName = localStorage.getItem('unicorn_telegramLastName') || '';
                telegramUserId = localStorage.getItem('unicorn_telegramId') || '';
                
                console.log('Восстановлены Telegram данные:', telegramUsername, telegramUserId);
                
            } catch (error) {
                console.error('Ошибка восстановления сессии:', error);
            }
        }

        function getUserData(userId) {
            try {
                const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
                
                // Пытаемся найти пользователя по Telegram данным
                let foundUser = null;
                let foundUserId = null;
                
                if (telegramUserId) {
                    for (const uid in users) {
                        if (users[uid].telegramId === telegramUserId) {
                            foundUser = users[uid];
                            foundUserId = uid;
                            break;
                        }
                    }
                }
                
                if (!foundUser && telegramUsername) {
                    for (const uid in users) {
                        if (users[uid].telegramUsername === telegramUsername) {
                            foundUser = users[uid];
                            foundUserId = uid;
                            break;
                        }
                    }
                }
                
                if (foundUser) {
                    console.log('Найден существующий пользователь:', foundUserId, foundUser.name);
                    
                    // Обновляем Telegram данные если они изменились
                    if (telegramUsername) foundUser.telegramUsername = telegramUsername;
                    if (telegramFirstName) foundUser.telegramFirstName = telegramFirstName;
                    if (telegramLastName) foundUser.telegramLastName = telegramLastName;
                    if (telegramUserId) foundUser.telegramId = telegramUserId;
                    
                    foundUser.lastActive = new Date().toISOString();
                    
                    currentUserId = foundUserId;
                    localStorage.setItem('unicorn_userId', currentUserId);
                    
                    users[foundUserId] = foundUser;
                    localStorage.setItem('unicorn_users', JSON.stringify(users));
                    
                    return foundUser;
                }
                
                // Если пользователь не найден, создаем нового или загружаем существующего
                if (!users[userId]) {
                    let displayName = '';
                    if (telegramFirstName) {
                        displayName = telegramFirstName;
                        if (telegramLastName) {
                            displayName += ' ' + telegramLastName;
                        }
                    } else if (telegramUsername) {
                        displayName = '@' + telegramUsername;
                    } else {
                        displayName = `Пользователь ${userId.slice(-4)}`;
                    }
                    
                    users[userId] = {
                        id: userId,
                        name: displayName,
                        phone: null,
                        address: null,
                        favorites: [],
                        cart: [],
                        orders: [],
                        viewed: [],
                        reviews: 0,
                        createdAt: new Date().toISOString(),
                        lastActive: new Date().toISOString(),
                        telegramUsername: telegramUsername || null,
                        telegramFirstName: telegramFirstName || null,
                        telegramLastName: telegramLastName || null,
                        telegramId: telegramUserId || null
                    };
                    
                    localStorage.setItem('unicorn_users', JSON.stringify(users));
                    console.log('Создан новый пользователь:', userId, displayName);
                } else {
                    // Обновляем существующего пользователя
                    users[userId].lastActive = new Date().toISOString();
                    
                    // Обновляем Telegram данные
                    if (telegramUsername) users[userId].telegramUsername = telegramUsername;
                    if (telegramFirstName) users[userId].telegramFirstName = telegramFirstName;
                    if (telegramLastName) users[userId].telegramLastName = telegramLastName;
                    if (telegramUserId) users[userId].telegramId = telegramUserId;
                    
                    localStorage.setItem('unicorn_users', JSON.stringify(users));
                }
                
                return users[userId];
            } catch (error) {
                console.error('Ошибка загрузки пользователя:', error);
                return createNewUserData(userId);
            }
        }

        function createNewUserData(userId) {
            let displayName = '';
            if (telegramFirstName) {
                displayName = telegramFirstName;
                if (telegramLastName) {
                    displayName += ' ' + telegramLastName;
                }
            } else if (telegramUsername) {
                displayName = '@' + telegramUsername;
            } else {
                displayName = `Пользователь ${userId.slice(-4)}`;
            }
            
            return {
                id: userId,
                name: displayName,
                phone: null,
                address: null,
                favorites: [],
                cart: [],
                orders: [],
                viewed: [],
                reviews: 0,
                createdAt: new Date().toISOString(),
                lastActive: new Date().toISOString(),
                telegramUsername: telegramUsername || null,
                telegramFirstName: telegramFirstName || null,
                telegramLastName: telegramLastName || null,
                telegramId: telegramUserId || null
            };
        }

        function saveUserData() {
            try {
                const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
                users[currentUserId] = userData;
                localStorage.setItem('unicorn_users', JSON.stringify(users));
                console.log('Данные пользователя сохранены:', currentUserId);
                
            } catch (error) {
                console.error('Ошибка сохранения пользователя:', error);
            }
        }

        function saveCategories() {
            try {
                localStorage.setItem('unicorn_categories', JSON.stringify(categories));
                console.log('Категории сохранены');
            } catch (error) {
                console.error('Ошибка сохранения категорий:', error);
            }
        }

        function saveProducts() {
            try {
                localStorage.setItem('unicorn_products', JSON.stringify(products));
                console.log('Товары сохранены');
            } catch (error) {
                console.error('Ошибка сохранения товаров:', error);
            }
        }

        async function initializeUI() {
            await loadMainCategories();
            await loadPopularProducts();
            updateProfileUI();
            updateCartBadge();
            updateFavoritesBadge();
            setupAdminPanel();
            
            checkAndShowAdminButton();
            
            window.addEventListener('hashchange', handleHashChange);
        }

        function checkAndShowAdminButton() {
            const adminToggle = document.querySelector('.admin-toggle');
            if (isAdmin) {
                if (!adminToggle) {
                    createAdminToggle();
                } else {
                    adminToggle.style.display = 'flex';
                }
                console.log('Админ-кнопка показана');
            } else if (adminToggle) {
                adminToggle.style.display = 'none';
            }
        }

        function handleHashChange() {
            if (!isInitialized) return;
            
            const hash = window.location.hash;
            if (hash.includes('profile-')) {
                const userId = hash.split('profile-')[1];
                if (userId && userId !== currentUserId) {
                    console.log('Смена пользователя по хэшу:', userId);
                    
                    saveUserData();
                    
                    currentUserId = decodeURIComponent(userId);
                    localStorage.setItem('unicorn_userId', currentUserId);
                    
                    userData = getUserData(currentUserId);
                    
                    const wasAdmin = isAdmin;
                    isAdmin = checkAdminRights();
                    
                    updateProfileUI();
                    updateCartBadge();
                    updateFavoritesBadge();
                    
                    if (wasAdmin !== isAdmin) {
                        checkAndShowAdminButton();
                    }
                    
                    const activePage = document.querySelector('.page.active').id;
                    switchPage(activePage);
                }
            }
        }

        async function loadMainCategories() {
            const container = document.getElementById('mainCategories');
            if (!container) return;
            
            container.innerHTML = '';
            
            Object.values(categories).forEach(category => {
                const card = createCategoryCard(category);
                card.onclick = () => openCategoryPage(category.id);
                container.appendChild(card);
            });
        }

        function loadCategoriesPage() {
            const container = document.getElementById('categoriesGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            Object.values(categories).forEach(category => {
                const card = createCategoryCard(category);
                card.onclick = () => openCategoryPage(category.id);
                container.appendChild(card);
            });
        }

        function createCategoryCard(category) {
            const card = document.createElement('div');
            card.className = 'category-card';
            card.innerHTML = `
                <img src="${category.image}" alt="${category.name}" class="category-image" 
                     loading="lazy"
                     onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 400\"><rect width=\"400\" height=\"400\" fill=\"%238A2BE2\"/><text x=\"200\" y=\"200\" font-family=\"Inter\" font-size=\"24\" fill=\"white\" text-anchor=\"middle\" dy=\".3em\">${encodeURIComponent(category.name)}</text></svg>'">
                <div class="category-content">
                    <h3 class="category-title">${category.name}</h3>
                    <p class="category-count">${getCategoryProductCount(category.id)} товаров</p>
                </div>
            `;
            return card;
        }

        function getCategoryProductCount(categoryId) {
            return products.filter(p => p.category === categoryId).length;
        }

        function openCategoryPage(categoryId) {
            currentCategory = categoryId;
            switchPage('category-page');
            loadCategoryPage(categoryId);
        }

        function loadCategoryPage(categoryId) {
            const category = categories[categoryId];
            if (!category) return;
            
            const header = document.getElementById('categoryHeader');
            header.innerHTML = `
                <div class="category-header">
                    <h1>${category.name}</h1>
                    <p>${category.description}</p>
                </div>
            `;
            
            const productsGrid = document.getElementById('categoryProducts');
            productsGrid.innerHTML = '';
            
            const categoryProducts = products.filter(p => p.category === categoryId);
            
            if (categoryProducts.length === 0) {
                productsGrid.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 40px; color: var(--gray);">
                        <i class="fas fa-box-open" style="font-size: 48px; margin-bottom: 16px;"></i>
                        <h3 style="margin-bottom: 8px;">Товары не найдены</h3>
                        <p>В этой категории пока нет товаров</p>
                    </div>
                `;
                return;
            }
            
            categoryProducts.forEach(product => {
                const productElement = createProductElement(product);
                productsGrid.appendChild(productElement);
            });
        }

        async function loadPopularProducts() {
            const container = document.getElementById('popularProducts');
            if (!container) return;
            
            container.innerHTML = '';
            
            const shuffled = [...products].sort(() => 0.5 - Math.random());
            const popular = shuffled.slice(0, 8);
            
            for (let i = 0; i < popular.length; i++) {
                const productElement = createProductElement(popular[i]);
                container.appendChild(productElement);
                
                if (i % 2 === 0) {
                    await new Promise(resolve => requestAnimationFrame(resolve));
                }
            }
        }

        function createProductElement(product) {
            const div = document.createElement('div');
            div.className = 'product-card';
            
            const isFavorite = userData.favorites.includes(product.id);
            const inCart = userData.cart.find(item => item.id === product.id);
            
            div.innerHTML = `
                <div class="product-image-container">
                    <img src="${product.image}" alt="${product.name}" class="product-image" 
                         loading="lazy"
                         onerror="this.onerror=null; this.src='data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 400 300\"><rect width=\"400\" height=\"300\" fill=\"%238A2BE2\"/><text x=\"200\" y=\"150\" font-family=\"Inter\" font-size=\"16\" fill=\"white\" text-anchor=\"middle\" dy=\".3em\">${encodeURIComponent(product.name)}</text></svg>'">
                    <button class="wishlist-btn ${isFavorite ? 'active' : ''}" data-id="${product.id}">
                        <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                    </button>
                </div>
                <div class="product-content">
                    <div class="product-brand">${product.brand}</div>
                    <h3 class="product-title">${product.name}</h3>
                    <div class="product-price">
                        <span class="current-price">${product.price.toLocaleString()} ₽</span>
                        ${product.oldPrice ? `<span class="old-price">${product.oldPrice.toLocaleString()} ₽</span>` : ''}
                        ${product.discount > 0 ? `<span class="discount">-${product.discount}%</span>` : ''}
                    </div>
                    <button class="add-to-cart ${inCart ? 'added' : ''}" data-id="${product.id}">
                        <i class="fas fa-${inCart ? 'check' : 'shopping-cart'}"></i>
                        ${inCart ? 'В корзине' : 'В корзину'}
                    </button>
                </div>
            `;
            
            div.addEventListener('click', function(e) {
                if (!e.target.closest('.wishlist-btn') && !e.target.closest('.add-to-cart')) {
                    openProductPage(product.id);
                }
            });
            
            const wishlistBtn = div.querySelector('.wishlist-btn');
            wishlistBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                toggleFavorite(product.id);
                const isNowFavorite = userData.favorites.includes(product.id);
                this.classList.toggle('active', isNowFavorite);
                this.innerHTML = `<i class="${isNowFavorite ? 'fas' : 'far'} fa-heart"></i>`;
                updateFavoritesBadge();
                saveUserData();
            });
            
            const addToCartBtn = div.querySelector('.add-to-cart');
            addToCartBtn.addEventListener('click', function(e) {
                e.stopPropagation();
                addToCart(product);
                this.classList.add('added');
                this.innerHTML = '<i class="fas fa-check"></i> В корзине';
                saveUserData();
                
                setTimeout(() => {
                    const inCartNow = userData.cart.find(item => item.id === product.id);
                    this.classList.toggle('added', inCartNow);
                    this.innerHTML = `<i class="fas fa-${inCartNow ? 'check' : 'shopping-cart'}"></i> ${inCartNow ? 'В корзине' : 'В корзину'}`;
                }, 2000);
            });
            
            return div;
        }

        function openProductPage(productId) {
            currentProductId = productId;
            lastPage = document.querySelector('.page.active').id;
            switchPage('product-page');
            loadProductPage(productId);
        }

        function loadProductPage(productId = currentProductId) {
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Товар не найден');
                goBackFromProduct();
                return;
            }
            
            if (!userData.viewed.includes(productId)) {
                userData.viewed.push(productId);
                saveUserData();
                updateProfileUI();
            }
            
            const container = document.getElementById('productPageContent');
            if (!container) return;
            
            const isFavorite = userData.favorites.includes(product.id);
            const inCart = userData.cart.find(item => item.id === product.id);
            const images = product.images || [product.image];
            const mainImage = images[0];
            
            // Проверяем, нужно ли показывать размеры (не показываем для аксессуаров)
            const showSizes = product.category !== 'accessories' && product.sizes && product.sizes.length > 0;
            
            container.innerHTML = `
                <div class="product-page-header">
                    <div class="product-images">
                        <img src="${mainImage}" alt="${product.name}" class="product-image-main" id="mainProductImage">
                        ${images.length > 1 ? `
                            <div class="product-images-thumbnails">
                                ${images.map((img, index) => `
                                    <img src="${img}" alt="${product.name} - изображение ${index + 1}" 
                                         class="product-thumbnail ${index === 0 ? 'active' : ''}" 
                                         data-image="${img}"
                                         onclick="changeProductImage('${img}', this)">
                                `).join('')}
                            </div>
                        ` : ''}
                    </div>
                    
                    <div class="product-info">
                        <div class="product-brand-large">${product.brand}</div>
                        <h1 class="product-title-large">${product.name}</h1>
                        
                        <div class="stock-status ${product.inStock ? 'in-stock' : 'out-of-stock'}">
                            <i class="fas ${product.inStock ? 'fa-check-circle' : 'fa-times-circle'}"></i>
                            ${product.inStock ? 'В наличии' : 'Нет в наличии'}
                        </div>
                        
                        <div class="rating-stars" style="margin-bottom: 10px;">
                            ${getRatingStars(product.rating)}
                            <span class="rating-value">${product.rating}</span>
                            <span class="rating-count">(${product.reviewsCount} отзывов)</span>
                        </div>
                        
                        <div class="product-price-large">
                            <span class="current-price-large">${product.price.toLocaleString()} ₽</span>
                            ${product.oldPrice ? `<span class="old-price-large">${product.oldPrice.toLocaleString()} ₽</span>` : ''}
                            ${product.discount > 0 ? `<span class="discount-large">-${product.discount}%</span>` : ''}
                        </div>
                        
                        ${showSizes ? `
                            <div class="size-selector">
                                <label class="size-label">Размер:</label>
                                <div class="size-grid" id="sizeGrid">
                                    ${product.sizes.map(size => `
                                        <button class="size-btn ${product.availableSizes && !product.availableSizes.includes(size) ? 'disabled' : ''}" 
                                                data-size="${size}"
                                                onclick="${product.availableSizes && product.availableSizes.includes(size) ? `selectSize('${size}')` : ''}">
                                            ${size}
                                        </button>
                                    `).join('')}
                                </div>
                                <a href="#" class="size-chart-link" onclick="showSizeChart()">Таблица размеров</a>
                            </div>
                        ` : ''}
                        
                        <div class="quantity-selector">
                            <span class="quantity-label">Количество:</span>
                            <div class="quantity-controls">
                                <button class="quantity-btn-large" onclick="changeQuantity(-1)">-</button>
                                <span class="quantity-value" id="quantityValue">1</span>
                                <button class="quantity-btn-large" onclick="changeQuantity(1)">+</button>
                            </div>
                        </div>
                        
                        <div class="product-actions">
                            <button class="buy-now-btn" onclick="buyNow(${product.id})" ${!product.inStock ? 'disabled' : ''}>
                                <i class="fas fa-bolt"></i>
                                Купить сейчас
                            </button>
                            <button class="add-to-cart-large ${inCart ? 'added' : ''}" onclick="addToCartFromProductPage(${product.id})" ${!product.inStock ? 'disabled' : ''}>
                                <i class="fas fa-${inCart ? 'check' : 'shopping-cart'}"></i>
                                ${inCart ? 'В корзине' : 'В корзину'}
                            </button>
                        </div>
                        
                        <div class="delivery-info">
                            <div class="delivery-item">
                                <i class="fas fa-shipping-fast delivery-icon"></i>
                                <div class="delivery-text">
                                    <strong>Доставка:</strong> ${product.deliveryTime || '1-3 дня'}
                                </div>
                            </div>
                            <div class="delivery-item">
                                <i class="fas fa-undo delivery-icon"></i>
                                <div class="delivery-text">
                                    <strong>Возврат:</strong> ${product.warranty || '30 дней'} без объяснения причин
                                </div>
                            </div>
                            <div class="delivery-item">
                                <i class="fas fa-shield-alt delivery-icon"></i>
                                <div class="delivery-text">
                                    <strong>Гарантия:</strong> ${product.warranty || '30 дней'} от производителя
                                </div>
                            </div>
                        </div>
                        
                        <button class="wishlist-btn" style="position: static; margin-top: 10px;" onclick="toggleFavoriteFromProductPage(${product.id})">
                            <i class="${isFavorite ? 'fas' : 'far'} fa-heart"></i>
                            ${isFavorite ? 'В избранном' : 'Добавить в избранное'}
                        </button>
                    </div>
                </div>
                
                <div class="product-tabs">
                    <div class="tabs">
                        <button class="tab active" onclick="switchProductTab('description')">Описание</button>
                        <button class="tab" onclick="switchProductTab('specs')">Характеристики</button>
                        <button class="tab" onclick="switchProductTab('reviews')">Отзывы (${product.reviewsCount})</button>
                    </div>
                    
                    <div id="descriptionTab" class="product-tab-content tab-content active">
                        <div class="product-description">
                            ${product.description}
                        </div>
                    </div>
                    
                    <div id="specsTab" class="product-tab-content tab-content">
                        <div class="product-specs">
                            ${product.characteristics ? Object.entries(product.characteristics).map(([key, value]) => `
                                <div class="characteristic-item">
                                    <span class="char-name">${key}:</span>
                                    <span class="char-value">${value}</span>
                                </div>
                            `).join('') : `
                                <div class="characteristic-item">
                                    <span class="char-name">Бренд:</span>
                                    <span class="char-value">${product.brand}</span>
                                </div>
                                ${product.materials ? `
                                <div class="characteristic-item">
                                    <span class="char-name">Материал:</span>
                                    <span class="char-value">${product.materials}</span>
                                </div>
                                ` : ''}
                                ${product.colors ? `
                                <div class="characteristic-item">
                                    <span class="char-name">Цвета:</span>
                                    <span class="char-value">${Array.isArray(product.colors) ? product.colors.join(', ') : product.colors}</span>
                                </div>
                                ` : ''}
                                ${product.sizes ? `
                                <div class="characteristic-item">
                                    <span class="char-name">Размеры:</span>
                                    <span class="char-value">${Array.isArray(product.sizes) ? product.sizes.join(', ') : product.sizes}</span>
                                </div>
                                ` : ''}
                                <div class="characteristic-item">
                                    <span class="char-name">Наличие:</span>
                                    <span class="char-value">${product.inStock ? 'В наличии' : 'Нет в наличии'}</span>
                                </div>
                            `}
                        </div>
                    </div>
                    
                    <div id="reviewsTab" class="product-tab-content tab-content">
                        <div class="reviews-header">
                            <h3>Отзывы покупателей (${product.reviewsCount})</h3>
                            <button class="add-review-btn" onclick="addReview(${product.id})">
                                <i class="fas fa-plus"></i> Добавить отзыв
                            </button>
                        </div>
                        
                        <div class="reviews-section">
                            ${getProductReviews(product.id)}
                        </div>
                    </div>
                </div>
                
                <div class="similar-products">
                    <div class="section-header">
                        <h2 class="section-title">Похожие товары</h2>
                    </div>
                    <div class="products-grid" id="similarProductsGrid"></div>
                </div>
            `;
            
            selectedSize = null;
            selectedQuantity = 1;
            
            loadSimilarProducts(product);
        }

        function getRatingStars(rating) {
            const fullStars = Math.floor(rating);
            const halfStar = rating % 1 >= 0.5;
            const emptyStars = 5 - fullStars - (halfStar ? 1 : 0);
            
            let stars = '';
            
            for (let i = 0; i < fullStars; i++) {
                stars += '<i class="fas fa-star"></i>';
            }
            
            if (halfStar) {
                stars += '<i class="fas fa-star-half-alt"></i>';
            }
            
            for (let i = 0; i < emptyStars; i++) {
                stars += '<i class="far fa-star"></i>';
            }
            
            return stars;
        }

        function getProductReviews(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return '';
            
            const reviews = product.reviews || [];
            
            if (reviews.length === 0) {
                return `
                    <div class="empty-state" style="padding: 20px;">
                        <div class="empty-icon">
                            <i class="far fa-comment"></i>
                        </div>
                        <h3 class="empty-title">Отзывов пока нет</h3>
                        <p class="empty-text">Будьте первым, кто оставит отзыв об этом товаре!</p>
                    </div>
                `;
            }
            
            return reviews.map(review => `
                <div class="review-item">
                    <div class="review-header">
                        <div class="review-author">${review.author}</div>
                        <div class="review-date">${new Date(review.date).toLocaleDateString('ru-RU')}</div>
                    </div>
                    <div class="review-rating">
                        ${getRatingStars(review.rating)}
                    </div>
                    <div class="review-text">${review.text}</div>
                </div>
            `).join('');
        }

        function loadSimilarProducts(product) {
            const container = document.getElementById('similarProductsGrid');
            if (!container) return;
            
            container.innerHTML = '';
            
            const similarProducts = products
                .filter(p => p.category === product.category && p.id !== product.id);
            
            const shuffled = [...similarProducts].sort(() => 0.5 - Math.random());
            const randomSimilar = shuffled.slice(0, 4);
            
            if (randomSimilar.length === 0) {
                container.innerHTML = `
                    <div style="grid-column: 1/-1; text-align: center; padding: 20px; color: var(--gray);">
                        <p>Похожих товаров не найдено</p>
                    </div>
                `;
                return;
            }
            
            randomSimilar.forEach(product => {
                const productElement = createProductElement(product);
                container.appendChild(productElement);
            });
        }

        function changeProductImage(imageUrl, element) {
            const mainImage = document.getElementById('mainProductImage');
            if (mainImage) {
                mainImage.src = imageUrl;
            }
            
            document.querySelectorAll('.product-thumbnail').forEach(thumb => {
                thumb.classList.remove('active');
            });
            
            if (element) {
                element.classList.add('active');
            }
        }

        function selectSize(size) {
            selectedSize = size;
            
            document.querySelectorAll('.size-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.dataset.size === size) {
                    btn.classList.add('active');
                }
            });
        }

        function changeQuantity(delta) {
            selectedQuantity = Math.max(1, selectedQuantity + delta);
            document.getElementById('quantityValue').textContent = selectedQuantity;
        }

        function showSizeChart() {
            const sizeChart = {
                "shoes": {
                    "36": "22.5 см",
                    "37": "23.5 см",
                    "38": "24.0 см",
                    "39": "24.5 см",
                    "40": "25.0 см",
                    "41": "26.0 см",
                    "42": "26.5 см",
                    "43": "27.0 см",
                    "44": "28.0 см",
                    "45": "29.0 см"
                },
                "clothing": {
                    "XS": "42-44 см",
                    "S": "44-46 см",
                    "M": "46-48 см",
                    "L": "48-50 см",
                    "XL": "50-52 см",
                    "XXL": "52-54 см"
                }
            };
            
            const product = products.find(p => p.id === currentProductId);
            if (!product) return;
            
            let chartText = 'Таблица размеров:\n\n';
            
            if (product.category === 'shoes') {
                chartText += 'Размер | Длина стопы\n';
                chartText += '-------|-------------\n';
                Object.entries(sizeChart.shoes).forEach(([size, length]) => {
                    chartText += `${size} | ${length}\n`;
                });
            } else {
                chartText += 'Размер | Обхват груди\n';
                chartText += '-------|-------------\n';
                Object.entries(sizeChart.clothing).forEach(([size, chest]) => {
                    chartText += `${size} | ${chest}\n`;
                });
            }
            
            chartText += '\nРекомендация: Выберите размер, соответствующий вашим меркам.';
            
            alert(chartText);
        }

        function toggleFavoriteFromProductPage(productId) {
            toggleFavorite(productId);
            
            const product = products.find(p => p.id === productId);
            const isNowFavorite = userData.favorites.includes(productId);
            
            const wishlistBtn = document.querySelector('.wishlist-btn');
            if (wishlistBtn) {
                wishlistBtn.innerHTML = `<i class="${isNowFavorite ? 'fas' : 'far'} fa-heart"></i> ${isNowFavorite ? 'В избранном' : 'Добавить в избранное'}`;
            }
            
            updateFavoritesBadge();
            showNotification(isNowFavorite ? 'Товар добавлен в избранное' : 'Товар удален из избранного');
        }

        function addToCartFromProductPage(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Проверяем размер для товаров, где он требуется
            const showSizes = product.category !== 'accessories' && product.sizes && product.sizes.length > 0;
            if (showSizes && !selectedSize) {
                showNotification('Пожалуйста, выберите размер');
                return;
            }
            
            addToCart(product, selectedSize, selectedQuantity);
            
            const addToCartBtn = document.querySelector('.add-to-cart-large');
            if (addToCartBtn) {
                addToCartBtn.classList.add('added');
                addToCartBtn.innerHTML = '<i class="fas fa-check"></i> В корзине';
            }
        }

        function buyNow(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const showSizes = product.category !== 'accessories' && product.sizes && product.sizes.length > 0;
            if (showSizes && !selectedSize) {
                showNotification('Пожалуйста, выберите размер');
                return;
            }
            
            addToCart(product, selectedSize, selectedQuantity);
            
            switchPage('checkout');
            loadCheckoutPage();
        }

        function addToCart(product, size = null, quantity = 1) {
            const existingItem = userData.cart.find(item => 
                item.id === product.id && item.size === size
            );
            
            if (existingItem) {
                existingItem.quantity += quantity;
            } else {
                userData.cart.push({
                    id: product.id,
                    name: product.name,
                    brand: product.brand,
                    price: product.price,
                    image: product.image,
                    size: size,
                    quantity: quantity
                });
            }
            
            saveUserData();
            updateCartBadge();
            showNotification(`${product.name} добавлен в корзину`);
            
            const activePage = document.querySelector('.page.active').id;
            if (activePage === 'cart') {
                loadCartPage();
            }
        }

        function switchProductTab(tabId) {
            document.querySelectorAll('.product-tabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.product-tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const activeTab = Array.from(document.querySelectorAll('.product-tabs .tab')).find(tab => 
                tab.textContent.includes(tabId === 'description' ? 'Описание' : 
                                        tabId === 'specs' ? 'Характеристики' : 'Отзывы')
            );
            
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            const targetContent = document.getElementById(tabId + 'Tab');
            if (targetContent) {
                targetContent.classList.add('active');
            }
        }

        function addReview(productId) {
            const reviewText = prompt('Оставьте свой отзыв о товаре:');
            if (reviewText && reviewText.trim()) {
                showNotification('Спасибо за ваш отзыв! Он будет опубликован после модерации.');
            }
        }

        function goBackFromProduct() {
            switchPage(lastPage);
        }

        function toggleFavorite(productId) {
            const index = userData.favorites.indexOf(productId);
            if (index > -1) {
                userData.favorites.splice(index, 1);
            } else {
                userData.favorites.push(productId);
            }
            saveUserData();
            updateProfileUI();
        }

        function removeFromCart(productId) {
            userData.cart = userData.cart.filter(item => item.id !== productId);
            saveUserData();
            updateCartBadge();
            loadCartPage();
            showNotification('Товар удален из корзины');
        }

        function updateCartItemQuantity(productId, quantity) {
            const item = userData.cart.find(item => item.id === productId);
            if (item) {
                if (quantity < 1) {
                    removeFromCart(productId);
                } else {
                    item.quantity = quantity;
                    saveUserData();
                    updateCartBadge();
                    loadCartPage();
                }
            }
        }

        function updateCartBadge() {
            const totalItems = userData.cart.reduce((sum, item) => sum + item.quantity, 0);
            const badge = document.getElementById('cartBadge');
            if (badge) {
                badge.textContent = totalItems;
                badge.style.display = totalItems > 0 ? 'flex' : 'none';
            }
        }

        function updateFavoritesBadge() {
            const totalFavorites = userData.favorites.length;
            const badge = document.getElementById('favoritesBadge');
            if (badge) {
                badge.textContent = totalFavorites;
                badge.style.display = totalFavorites > 0 ? 'flex' : 'none';
            }
        }

        function loadCartPage() {
            const container = document.getElementById('cartContent');
            if (!container) return;
            
            if (userData.cart.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <h3 class="empty-title">В корзине пока ничего нет</h3>
                        <p class="empty-text">Самое время наполнить её!</p>
                        <button class="add-to-cart" onclick="switchPage('home')">
                            <i class="fas fa-store"></i>
                            Перейти к покупкам
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            let subtotal = 0;
            
            userData.cart.forEach(item => {
                const itemTotal = item.price * item.quantity;
                subtotal += itemTotal;
                
                html += `
                    <div class="cart-item">
                        <img src="${item.image}" alt="${item.name}" class="cart-item-image">
                        <div class="cart-item-info">
                            <h4 class="cart-item-title">${item.name}</h4>
                            <div class="product-brand">${item.brand}</div>
                            ${item.size ? `<div style="font-size: 12px; color: var(--gray);">Размер: ${item.size}</div>` : ''}
                            <div class="cart-item-price">${item.price.toLocaleString()} ₽</div>
                        </div>
                        <div class="cart-item-actions">
                            <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, ${item.quantity - 1})">-</button>
                            <span class="cart-item-quantity">${item.quantity}</span>
                            <button class="quantity-btn" onclick="updateCartItemQuantity(${item.id}, ${item.quantity + 1})">+</button>
                            <button class="remove-btn" onclick="removeFromCart(${item.id})">
                                <i class="fas fa-trash"></i>
                            </button>
                        </div>
                    </div>
                `;
            });
            
            html += `
                <div class="cart-total">
                    <div class="promo-code-container">
                        <input type="text" class="promo-input" id="promoCodeInput" placeholder="Введите промокод">
                        <button class="apply-promo-btn" onclick="applyPromoCode()">Применить</button>
                    </div>
            `;
            
            if (activePromoCode) {
                html += `
                    <div class="promo-success">
                        <i class="fas fa-check-circle"></i>
                        Промокод "${activePromoCode.code}" применен! Скидка: ${activePromoCode.discount}%
                    </div>
                `;
            }
            
            const delivery = subtotal > 5000 ? 0 : 500;
            const discountAmount = activePromoCode ? Math.round(subtotal * (activePromoCode.discount / 100)) : 0;
            const total = subtotal + delivery - discountAmount;
            
            html += `
                    <div class="total-row">
                        <span>Сумма товаров</span>
                        <span>${subtotal.toLocaleString()} ₽</span>
                    </div>
                    ${discountAmount > 0 ? `
                    <div class="total-row">
                        <span>Скидка по промокоду</span>
                        <span>-${discountAmount.toLocaleString()} ₽</span>
                    </div>
                    ` : ''}
                    <div class="total-row">
                        <span>Доставка</span>
                        <span>${delivery === 0 ? 'Бесплатно' : delivery.toLocaleString() + ' ₽'}</span>
                    </div>
                    <div class="total-row">
                        <span>Итого</span>
                        <span>${total.toLocaleString()} ₽</span>
                    </div>
                    <button class="checkout-btn" onclick="startCheckout()">
                        <i class="fas fa-credit-card"></i>
                        Оформить заказ
                    </button>
                </div>
            `;
            
            container.innerHTML = html;
        }

        function applyPromoCode() {
            const promoCodeInput = document.getElementById('promoCodeInput');
            if (!promoCodeInput) return;
            
            const code = promoCodeInput.value.trim().toUpperCase();
            if (!code) {
                showNotification('Введите промокод');
                return;
            }
            
            const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
            const promo = promoCodes.find(p => p.code === code);
            
            if (!promo) {
                showNotification('Промокод не найден');
                return;
            }
            
            if (promo.expiry && new Date(promo.expiry) < new Date()) {
                showNotification('Промокод истек');
                return;
            }
            
            if (promo.maxUses && promo.used >= promo.maxUses) {
                showNotification('Промокод уже использован максимальное количество раз');
                return;
            }
            
            if (promo.usedBy && promo.usedBy.includes(currentUserId)) {
                showNotification('Вы уже использовали этот промокод');
                return;
            }
            
            activePromoCode = promo;
            showNotification(`Промокод "${code}" применен! Скидка: ${promo.discount}%`);
            loadCartPage();
        }

        function startCheckout() {
            if (userData.cart.length === 0) {
                showNotification('Корзина пуста');
                return;
            }
            
            switchPage('checkout');
            loadCheckoutPage();
        }

        function loadCheckoutPage() {
            const container = document.getElementById('checkoutContent');
            if (!container) return;
            
            const subtotal = userData.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const delivery = subtotal > 5000 ? 0 : 500;
            const discountAmount = activePromoCode ? Math.round(subtotal * (activePromoCode.discount / 100)) : 0;
            const total = subtotal + delivery - discountAmount;
            
            container.innerHTML = `
                <div class="checkout-form">
                    <div class="form-group">
                        <label class="form-label">ФИО *</label>
                        <input type="text" class="form-input" id="checkoutName" placeholder="Иванов Иван Иванович" value="${userData.name || ''}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Номер телефона *</label>
                        <input type="tel" class="form-input" id="checkoutPhone" placeholder="+7 (999) 999-99-99" value="${userData.phone || ''}">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email *</label>
                        <input type="email" class="form-input" id="checkoutEmail" placeholder="email@example.com">
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Адрес доставки *</label>
                        <textarea class="form-input" id="checkoutAddress" placeholder="Город, улица, дом, квартира" rows="3">${userData.address || ''}</textarea>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Комментарий к заказу</label>
                        <textarea class="form-input" id="checkoutComment" placeholder="Дополнительные пожелания" rows="2"></textarea>
                    </div>
                    
                    ${activePromoCode ? `
                        <div class="promo-success">
                            <i class="fas fa-ticket-alt"></i>
                            Применен промокод: <strong>${activePromoCode.code}</strong> (скидка ${activePromoCode.discount}%)
                        </div>
                    ` : ''}
                    
                    <div class="cart-total" style="margin-top: 20px;">
                        <div class="total-row">
                            <span>Сумма товаров</span>
                            <span>${subtotal.toLocaleString()} ₽</span>
                        </div>
                        ${discountAmount > 0 ? `
                        <div class="total-row">
                            <span>Скидка по промокоду</span>
                            <span>-${discountAmount.toLocaleString()} ₽</span>
                        </div>
                        ` : ''}
                        <div class="total-row">
                            <span>Доставка</span>
                            <span>${delivery === 0 ? 'Бесплатно' : delivery.toLocaleString() + ' ₽'}</span>
                        </div>
                        <div class="total-row">
                            <span>Итого к оплате</span>
                            <span>${total.toLocaleString()} ₽</span>
                        </div>
                    </div>
                    
                    <button class="checkout-btn" onclick="submitOrder()" style="margin-top: 20px;">
                        <i class="fas fa-check-circle"></i>
                        Подтвердить заказ
                    </button>
                </div>
            `;
        }

        async function submitOrder() {
            const name = document.getElementById('checkoutName').value.trim();
            const phone = document.getElementById('checkoutPhone').value.trim();
            const email = document.getElementById('checkoutEmail').value.trim();
            const address = document.getElementById('checkoutAddress').value.trim();
            const comment = document.getElementById('checkoutComment').value.trim();
            
            if (!name) {
                showNotification('Введите ФИО');
                return;
            }
            
            if (!phone) {
                showNotification('Введите номер телефона');
                return;
            }
            
            if (!email) {
                showNotification('Введите email');
                return;
            }
            
            if (!address) {
                showNotification('Введите адрес доставки');
                return;
            }
            
            userData.name = name;
            userData.phone = phone;
            userData.address = address;
            
            const orderId = 'ORD-' + Date.now();
            const subtotal = userData.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            const delivery = subtotal > 5000 ? 0 : 500;
            const discountAmount = activePromoCode ? Math.round(subtotal * (activePromoCode.discount / 100)) : 0;
            const total = subtotal + delivery - discountAmount;
            
            const order = {
                id: orderId,
                userId: currentUserId,
                items: [...userData.cart],
                customer: {
                    name: name,
                    phone: phone,
                    email: email,
                    address: address,
                    telegramUsername: telegramUsername,
                    telegramFirstName: telegramFirstName,
                    telegramLastName: telegramLastName
                },
                total: total,
                subtotal: subtotal,
                delivery: delivery,
                discountAmount: discountAmount,
                promoCode: activePromoCode ? activePromoCode.code : null,
                promoDiscount: activePromoCode ? activePromoCode.discount : null,
                comment: comment,
                date: new Date().toISOString(),
                status: 'new',
                statusHistory: [
                    {
                        status: 'new',
                        date: new Date().toISOString(),
                        comment: 'Заказ создан'
                    }
                ]
            };
            
            if (activePromoCode) {
                updatePromoCodeUsage(activePromoCode.code);
            }
            
            userData.orders.push(order);
            userData.cart = [];
            activePromoCode = null;
            
            saveUserData();
            updateCartBadge();
            
            saveOrderToDatabase(order);
            
            await sendTelegramNotification(order);
            
            switchPage('profile');
            switchProfileTab('orders');
            loadUserOrders();
            
            showNotification(`Заказ #${orderId} успешно оформлен! Сумма: ${total.toLocaleString()} ₽`);
        }

        function updatePromoCodeUsage(promoCode) {
            try {
                const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
                const promoIndex = promoCodes.findIndex(p => p.code === promoCode);
                
                if (promoIndex !== -1) {
                    promoCodes[promoIndex].used = (promoCodes[promoIndex].used || 0) + 1;
                    
                    if (!promoCodes[promoIndex].usedBy) {
                        promoCodes[promoIndex].usedBy = [];
                    }
                    promoCodes[promoIndex].usedBy.push(currentUserId);
                    
                    localStorage.setItem('unicorn_promocodes', JSON.stringify(promoCodes));
                }
            } catch (error) {
                console.error('Ошибка обновления промокода:', error);
            }
        }

        async function sendTelegramNotification(order) {
            try {
                let telegramInfo = '';
                if (order.customer.telegramUsername) {
                    telegramInfo = `👤 *Telegram:* @${order.customer.telegramUsername}\n`;
                } else if (order.customer.telegramFirstName) {
                    telegramInfo = `👤 *Имя из Telegram:* ${order.customer.telegramFirstName}`;
                    if (order.customer.telegramLastName) {
                        telegramInfo += ` ${order.customer.telegramLastName}`;
                    }
                    telegramInfo += '\n';
                }
                
                const message = `🛒 *НОВЫЙ ЗАКАЗ #${order.id}*
                
👤 *Клиент:* ${order.customer.name}
📱 *Телефон:* ${order.customer.phone}
📧 *Email:* ${order.customer.email}
📍 *Адрес:* ${order.customer.address}
${telegramInfo}
${order.promoCode ? `🎫 *Промокод:* ${order.promoCode} (скидка ${order.promoDiscount}%)\n` : ''}
📦 *Состав заказа:*
${order.items.map(item => `  • ${item.name} (${item.brand}) - ${item.quantity} × ${item.price.toLocaleString()} ₽ = ${(item.price * item.quantity).toLocaleString()} ₽`).join('\n')}

💰 *Сумма товаров:* ${order.subtotal.toLocaleString()} ₽
${order.discountAmount > 0 ? `🎫 *Скидка:* -${order.discountAmount.toLocaleString()} ₽\n` : ''}🚚 *Доставка:* ${order.delivery === 0 ? 'Бесплатно' : order.delivery.toLocaleString() + ' ₽'}
💰 *Итого к оплате:* ${order.total.toLocaleString()} ₽
📝 *Комментарий:* ${order.comment || 'Нет комментария'}

🕐 *Дата заказа:* ${new Date(order.date).toLocaleString('ru-RU')}`;

                const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                if (!response.ok) {
                    console.error('Ошибка отправки в Telegram:', await response.text());
                }
            } catch (error) {
                console.error('Ошибка отправки уведомления:', error);
            }
        }

        function saveOrderToDatabase(order) {
            try {
                const allOrders = JSON.parse(localStorage.getItem('unicorn_all_orders')) || [];
                allOrders.push(order);
                localStorage.setItem('unicorn_all_orders', JSON.stringify(allOrders));
            } catch (error) {
                console.error('Ошибка сохранения заказа:', error);
            }
        }

        function loadUserOrders() {
            const container = document.getElementById('userOrdersContent');
            if (!container) return;
            
            if (userData.orders.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-shopping-bag"></i>
                        </div>
                        <h3 class="empty-title">У вас еще нет заказов</h3>
                        <p class="empty-text">Сделайте свой первый заказ!</p>
                        <button class="add-to-cart" onclick="switchPage('home')">
                            <i class="fas fa-store"></i>
                            Перейти к покупкам
                        </button>
                    </div>
                `;
                return;
            }
            
            let html = '<div class="orders-list">';
            
            const sortedOrders = [...userData.orders].sort((a, b) => 
                new Date(b.date) - new Date(a.date)
            );
            
            sortedOrders.forEach(order => {
                const date = new Date(order.date);
                const statusClass = `status-${order.status}`;
                const statusText = getStatusText(order.status);
                
                html += `
                    <div class="order-card">
                        <div class="order-header">
                            <div class="order-id">Заказ #${order.id}</div>
                            <div class="order-status ${statusClass}">${statusText}</div>
                        </div>
                        <div class="order-details">
                            <div class="order-info">
                                <div class="info-item">
                                    <div class="info-label">Дата</div>
                                    <div class="info-value">${date.toLocaleDateString('ru-RU')}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Сумма</div>
                                    <div class="info-value">${order.total.toLocaleString()} ₽</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Доставка</div>
                                    <div class="info-value">${order.delivery === 0 ? 'Бесплатно' : order.delivery.toLocaleString() + ' ₽'}</div>
                                </div>
                                <div class="info-item">
                                    <div class="info-label">Товаров</div>
                                    <div class="info-value">${order.items.length}</div>
                                </div>
                            </div>
                            
                            ${order.promoCode ? `
                                <div style="margin: 10px 0; padding: 10px; background: #e8f5e9; border-radius: 8px;">
                                    <i class="fas fa-ticket-alt"></i>
                                    <strong>Промокод:</strong> ${order.promoCode} (скидка ${order.promoDiscount}%)
                                </div>
                            ` : ''}
                            
                            <div class="order-items">
                                ${order.items.map(item => `
                                    <div class="order-item">
                                        <img src="${item.image}" alt="${item.name}" class="order-item-image">
                                        <div class="order-item-info">
                                            <div class="order-item-name">${item.name}</div>
                                            <div class="order-item-meta">
                                                ${item.brand} • ${item.quantity} × ${item.price.toLocaleString()} ₽
                                                ${item.size ? ` • Размер: ${item.size}` : ''}
                                            </div>
                                        </div>
                                        <div class="order-item-total">${(item.price * item.quantity).toLocaleString()} ₽</div>
                                    </div>
                                `).join('')}
                            </div>
                            
                            ${order.comment ? `
                                <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid var(--light-gray);">
                                    <div style="font-size: 13px; color: var(--gray); margin-bottom: 5px;">Комментарий:</div>
                                    <div style="font-size: 14px;">${order.comment}</div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            container.innerHTML = html;
        }

        function getStatusText(status) {
            const statusMap = {
                'new': 'Новый',
                'processing': 'В обработке',
                'completed': 'Завершен',
                'cancelled': 'Отменен'
            };
            return statusMap[status] || status;
        }

        function loadAdminOrders() {
            const container = document.getElementById('adminOrdersContent');
            if (!container) return;
            
            try {
                const allOrders = JSON.parse(localStorage.getItem('unicorn_all_orders')) || [];
                
                if (allOrders.length === 0) {
                    container.innerHTML = `
                        <div class="empty-state">
                            <div class="empty-icon">
                                <i class="fas fa-shopping-bag"></i>
                            </div>
                            <h3 class="empty-title">Заказов пока нет</h3>
                            <p class="empty-text">Ожидайте новые заказы от пользователей</p>
                        </div>
                    `;
                    return;
                }
                
                let html = '<div class="admin-orders">';
                
                const sortedOrders = [...allOrders].sort((a, b) => 
                    new Date(b.date) - new Date(a.date)
                );
                
                sortedOrders.forEach(order => {
                    const date = new Date(order.date);
                    const statusClass = `status-${order.status}`;
                    const statusText = getStatusText(order.status);
                    
                    let telegramInfo = '';
                    if (order.customer.telegramUsername) {
                        telegramInfo = `👤 Telegram: @${order.customer.telegramUsername}`;
                    } else if (order.customer.telegramFirstName) {
                        telegramInfo = `👤 Имя из Telegram: ${order.customer.telegramFirstName}`;
                        if (order.customer.telegramLastName) {
                            telegramInfo += ` ${order.customer.telegramLastName}`;
                        }
                    }
                    
                    html += `
                        <div class="admin-order-card">
                            <div class="admin-order-header">
                                <div class="admin-order-info">
                                    <div class="admin-order-customer">${order.customer.name}</div>
                                    <div class="admin-order-date">
                                        Заказ #${order.id} • ${date.toLocaleDateString('ru-RU')} ${date.toLocaleTimeString('ru-RU', {hour: '2-digit', minute:'2-digit'})}
                                    </div>
                                </div>
                                <div class="admin-order-actions">
                                    <button class="status-btn btn-processing" onclick="updateOrderStatus('${order.id}', 'processing')">
                                        В обработку
                                    </button>
                                    <button class="status-btn btn-completed" onclick="updateOrderStatus('${order.id}', 'completed')">
                                        Завершить
                                    </button>
                                    <button class="status-btn btn-cancelled" onclick="updateOrderStatus('${order.id}', 'cancelled')">
                                        Отменить
                                    </button>
                                </div>
                            </div>
                            <div class="order-details">
                                <div class="order-info">
                                    <div class="info-item">
                                        <div class="info-label">Телефон</div>
                                        <div class="info-value">${order.customer.phone}</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Email</div>
                                        <div class="info-value">${order.customer.email}</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Адрес</div>
                                        <div class="info-value">${order.customer.address}</div>
                                    </div>
                                    <div class="info-item">
                                        <div class="info-label">Сумма</div>
                                        <div class="info-value">${order.total.toLocaleString()} ₽</div>
                                    </div>
                                    ${telegramInfo ? `
                                    <div class="info-item">
                                        <div class="info-label">Telegram</div>
                                        <div class="info-value">${telegramInfo}</div>
                                    </div>
                                    ` : ''}
                                    ${order.promoCode ? `
                                    <div class="info-item">
                                        <div class="info-label">Промокод</div>
                                        <div class="info-value">${order.promoCode} (скидка ${order.promoDiscount}%)</div>
                                    </div>
                                    ` : ''}
                                </div>
                                
                                <div style="display: flex; align-items: center; gap: 10px; margin: 15px 0; padding: 10px; background: var(--light); border-radius: 8px;">
                                    <div class="order-status ${statusClass}">${statusText}</div>
                                    <div style="font-size: 13px; color: var(--gray);">
                                        Статус обновлен: ${new Date(order.statusHistory[order.statusHistory.length - 1].date).toLocaleString('ru-RU')}
                                    </div>
                                </div>
                                
                                <div class="order-items">
                                    ${order.items.map(item => `
                                        <div class="order-item">
                                            <img src="${item.image}" alt="${item.name}" class="order-item-image">
                                            <div class="order-item-info">
                                                <div class="order-item-name">${item.name}</div>
                                                <div class="order-item-meta">
                                                    ${item.brand} • ${item.quantity} × ${item.price.toLocaleString()} ₽
                                                    ${item.size ? ` • Размер: ${item.size}` : ''}
                                                </div>
                                            </div>
                                            <div class="order-item-total">${(item.price * item.quantity).toLocaleString()} ₽</div>
                                        </div>
                                    `).join('')}
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                container.innerHTML = html;
                
            } catch (error) {
                console.error('Ошибка загрузки заказов:', error);
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <h3 class="empty-title">Ошибка загрузки</h3>
                        <p class="empty-text">Не удалось загрузить список заказов</p>
                    </div>
                `;
            }
        }

        async function updateOrderStatus(orderId, newStatus) {
            try {
                const allOrders = JSON.parse(localStorage.getItem('unicorn_all_orders')) || [];
                const orderIndex = allOrders.findIndex(order => order.id === orderId);
                
                if (orderIndex === -1) {
                    showNotification('Заказ не найден');
                    return;
                }
                
                const oldStatus = allOrders[orderIndex].status;
                allOrders[orderIndex].status = newStatus;
                allOrders[orderIndex].statusHistory.push({
                    status: newStatus,
                    date: new Date().toISOString(),
                    comment: `Статус изменен администратором`
                });
                
                localStorage.setItem('unicorn_all_orders', JSON.stringify(allOrders));
                
                updateUserOrderStatus(orderId, newStatus, allOrders[orderIndex].userId);
                
                await sendStatusUpdateNotification(allOrders[orderIndex], oldStatus, newStatus);
                
                showNotification(`Статус заказа #${orderId} изменен на "${getStatusText(newStatus)}"`);
                
                loadAdminOrders();
                
            } catch (error) {
                console.error('Ошибка обновления статуса:', error);
                showNotification('Ошибка обновления статуса');
            }
        }

        async function sendStatusUpdateNotification(order, oldStatus, newStatus) {
            try {
                const message = `🔄 *ОБНОВЛЕНИЕ СТАТУСА ЗАКАЗА #${order.id}*
                
👤 *Клиент:* ${order.customer.name}
📱 *Телефон:* ${order.customer.phone}
${order.customer.telegramUsername ? `👤 *Telegram:* @${order.customer.telegramUsername}\n` : ''}
📦 *Старый статус:* ${getStatusText(oldStatus)}
✅ *Новый статус:* ${getStatusText(newStatus)}

💰 *Сумма заказа:* ${order.total.toLocaleString()} ₽
📦 *Товаров:* ${order.items.length}
${order.promoCode ? `🎫 *Промокод:* ${order.promoCode} (скидка ${order.promoDiscount}%)\n` : ''}
🕐 *Дата обновления:* ${new Date().toLocaleString('ru-RU')}`;

                const url = `https://api.telegram.org/bot${TELEGRAM_BOT_TOKEN}/sendMessage`;
                
                const response = await fetch(url, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        chat_id: TELEGRAM_CHAT_ID,
                        text: message,
                        parse_mode: 'Markdown'
                    })
                });
                
                if (!response.ok) {
                    console.error('Ошибка отправки в Telegram:', await response.text());
                }
            } catch (error) {
                console.error('Ошибка отправки уведомления:', error);
            }
        }

        function updateUserOrderStatus(orderId, newStatus, userId) {
            try {
                const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
                
                if (!userId) {
                    for (const uid in users) {
                        const user = users[uid];
                        const orderIndex = user.orders.findIndex(order => order.id === orderId);
                        
                        if (orderIndex !== -1) {
                            userId = uid;
                            break;
                        }
                    }
                }
                
                if (userId && users[userId]) {
                    const user = users[userId];
                    const orderIndex = user.orders.findIndex(order => order.id === orderId);
                    
                    if (orderIndex !== -1) {
                        user.orders[orderIndex].status = newStatus;
                        user.orders[orderIndex].statusHistory.push({
                            status: newStatus,
                            date: new Date().toISOString(),
                            comment: 'Статус обновлен администратором'
                        });
                        
                        localStorage.setItem('unicorn_users', JSON.stringify(users));
                    }
                }
            } catch (error) {
                console.error('Ошибка обновления статуса у пользователя:', error);
            }
        }

        function updateAllOrders() {
            try {
                const allOrders = JSON.parse(localStorage.getItem('unicorn_all_orders')) || [];
                if (allOrders.length === 0) {
                    showNotification('Нет заказов для обновления');
                    return;
                }
                
                let updatedCount = 0;
                const now = new Date();
                
                allOrders.forEach(order => {
                    const orderDate = new Date(order.date);
                    const daysDiff = (now - orderDate) / (1000 * 60 * 60 * 24);
                    
                    if (order.status === 'new' && daysDiff >= 1) {
                        order.status = 'processing';
                        order.statusHistory.push({
                            status: 'processing',
                            date: now.toISOString(),
                            comment: 'Автоматически переведен в обработку'
                        });
                        updatedCount++;
                    } else if (order.status === 'processing' && daysDiff >= 3) {
                        order.status = 'completed';
                        order.statusHistory.push({
                            status: 'completed',
                            date: now.toISOString(),
                            comment: 'Автоматически завершен'
                        });
                        updatedCount++;
                    }
                });
                
                if (updatedCount > 0) {
                    localStorage.setItem('unicorn_all_orders', JSON.stringify(allOrders));
                    showNotification(`Обновлено ${updatedCount} заказов`);
                    loadAdminOrders();
                } else {
                    showNotification('Нет заказов для автоматического обновления');
                }
                
            } catch (error) {
                console.error('Ошибка обновления заказов:', error);
                showNotification('Ошибка обновления заказов');
            }
        }

        function updateProfileUI() {
            if (!userData) return;
            
            const avatarText = userData.name ? userData.name.charAt(0).toUpperCase() : '?';
            document.getElementById('profileAvatar').textContent = avatarText;
            document.getElementById('userAvatar').textContent = avatarText;
            document.getElementById('profileName').textContent = userData.name || 'Гость';
            document.getElementById('profilePhone').textContent = userData.phone || 'Не указан';
            
            document.getElementById('statOrders').textContent = userData.orders.length;
            document.getElementById('statFavorites').textContent = userData.favorites.length;
            document.getElementById('statViewed').textContent = userData.viewed.length;
            document.getElementById('statReviews').textContent = userData.reviews || 0;
        }

        function switchPage(pageId) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            const navItems = document.querySelectorAll('.nav-item');
            const pageNavMap = {
                'home': 'Главная',
                'categories': 'Категории',
                'category-page': 'Категории',
                'product-page': 'Главная',
                'favorites': 'Избранное',
                'cart': 'Корзина',
                'profile': 'Профиль',
                'checkout': 'Корзина',
                'admin-orders': 'Профиль'
            };
            
            navItems.forEach(item => {
                if (item.textContent.includes(pageNavMap[pageId])) {
                    item.classList.add('active');
                }
            });
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            const targetPage = document.getElementById(pageId);
            if (targetPage) {
                targetPage.classList.add('active');
                
                switch(pageId) {
                    case 'home':
                        loadMainCategories();
                        loadPopularProducts();
                        break;
                    case 'categories':
                        loadCategoriesPage();
                        break;
                    case 'favorites':
                        loadFavoritesPage();
                        break;
                    case 'cart':
                        loadCartPage();
                        break;
                    case 'profile':
                        switchProfileTab('stats');
                        break;
                    case 'admin-orders':
                        loadAdminOrders();
                        break;
                }
            }
        }

        function switchProfileTab(tabId) {
            document.querySelectorAll('#profileTabs .tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            const activeTab = Array.from(document.querySelectorAll('#profileTabs .tab')).find(tab => 
                tab.textContent.includes(tabId === 'stats' ? 'Статистика' : 
                                        tabId === 'orders' ? 'Заказы' : 'Настройки')
            );
            
            if (activeTab) {
                activeTab.classList.add('active');
            }
            
            const targetContent = document.getElementById(tabId + 'Tab');
            if (targetContent) {
                targetContent.classList.add('active');
                
                if (tabId === 'orders') {
                    loadUserOrders();
                }
            }
        }

        function loadFavoritesPage() {
            const container = document.getElementById('favoritesContent');
            if (!container) return;
            
            const favoriteProducts = products.filter(p => userData.favorites.includes(p.id));
            
            if (favoriteProducts.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="far fa-heart"></i>
                        </div>
                        <h3 class="empty-title">Избранные товары</h3>
                        <p class="empty-text">Нажимайте на сердечки рядом с товарами, чтобы быстро находить то, что вам понравилось.</p>
                        <button class="add-to-cart" onclick="switchPage('home')">
                            <i class="fas fa-store"></i>
                            Перейти к покупкам
                        </button>
                    </div>
                `;
                return;
            }
            
            container.innerHTML = '<div class="favorites-grid" id="favoritesGrid"></div>';
            const grid = document.getElementById('favoritesGrid');
            
            favoriteProducts.forEach(product => {
                const productElement = createProductElement(product);
                grid.appendChild(productElement);
            });
        }

        // ==============================================
        // ФУНКЦИИ АДМИН-ПАНЕЛИ
        // ==============================================

        function setupAdminPanel() {
            document.getElementById('closeAdmin').onclick = closeAdminPanel;
            document.getElementById('adminOverlay').onclick = closeAdminPanel;
            
            document.getElementById('adminUpdateCategoryImage').onclick = updateCategoryImage;
            document.getElementById('adminAddCategory').onclick = addCategory;
            document.getElementById('adminAddProduct').onclick = addProduct;
            document.getElementById('adminDeleteProductBtn').onclick = deleteProduct;
            document.getElementById('createPromoBtn').onclick = createPromoCode;
            document.getElementById('addReviewBtn').onclick = addReviewFromAdmin;
            document.getElementById('addBulkProducts').onclick = addBulkProducts;
            
            // Назначаем обработчики изменения селектов для управления размерами и характеристиками
            document.getElementById('adminProductManage').addEventListener('change', function() {
                const productId = parseInt(this.value);
                if (productId) {
                    loadProductSizes(productId);
                }
            });
            
            document.getElementById('adminCharProduct').addEventListener('change', function() {
                const productId = parseInt(this.value);
                if (productId) {
                    loadProductCharacteristics(productId);
                }
            });
        }

        function createAdminToggle() {
            const existingToggle = document.querySelector('.admin-toggle');
            if (existingToggle) {
                existingToggle.style.display = isAdmin ? 'flex' : 'none';
                return;
            }
            
            const adminToggle = document.createElement('button');
            adminToggle.className = 'admin-toggle';
            adminToggle.innerHTML = '<i class="fas fa-cog"></i>';
            adminToggle.onclick = openAdminPanel;
            adminToggle.style.display = isAdmin ? 'flex' : 'none';
            document.body.appendChild(adminToggle);
            console.log('Админ-кнопка создана');
        }

        function openAdminPanel() {
            document.getElementById('adminPanel').classList.add('active');
            document.getElementById('adminOverlay').classList.add('active');
            loadAdminData();
            updateCloudStatus();
            console.log('Админ-панель открыта');
        }

        function closeAdminPanel() {
            document.getElementById('adminPanel').classList.remove('active');
            document.getElementById('adminOverlay').classList.remove('active');
            console.log('Админ-панель закрыта');
        }

        function loadAdminData() {
            // Получаем все селекты
            const categorySelect = document.getElementById('adminCategorySelect');
            const productCategorySelect = document.getElementById('adminProductCategory');
            const deleteProductSelect = document.getElementById('adminDeleteProduct');
            const bulkCategorySelect = document.getElementById('adminBulkCategory');
            const productManageSelect = document.getElementById('adminProductManage');
            const charProductSelect = document.getElementById('adminCharProduct');
            const reviewProductSelect = document.getElementById('adminReviewProduct');
            
            // Очищаем все селекты
            const allSelects = [categorySelect, productCategorySelect, deleteProductSelect, 
                               bulkCategorySelect, productManageSelect, charProductSelect, reviewProductSelect];
            
            allSelects.forEach(select => {
                if (select) {
                    select.innerHTML = '<option value="">Выберите...</option>';
                }
            });
            
            // Заполняем категориями
            Object.values(categories).forEach(category => {
                const option1 = document.createElement('option');
                option1.value = category.id;
                option1.textContent = category.name;
                categorySelect.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = category.id;
                option2.textContent = category.name;
                productCategorySelect.appendChild(option2);
                
                const option3 = document.createElement('option');
                option3.value = category.id;
                option3.textContent = category.name;
                bulkCategorySelect.appendChild(option3);
            });
            
            // Заполняем товарами
            products.forEach(product => {
                const option1 = document.createElement('option');
                option1.value = product.id;
                option1.textContent = `${product.name} (${product.price}₽)`;
                deleteProductSelect.appendChild(option1);
                
                const option2 = document.createElement('option');
                option2.value = product.id;
                option2.textContent = `${product.name}`;
                productManageSelect.appendChild(option2);
                
                const option3 = document.createElement('option');
                option3.value = product.id;
                option3.textContent = `${product.name}`;
                charProductSelect.appendChild(option3);
                
                const option4 = document.createElement('option');
                option4.value = product.id;
                option4.textContent = `${product.name}`;
                reviewProductSelect.appendChild(option4);
            });
        }

        function addReviewFromAdmin() {
            const productId = parseInt(document.getElementById('adminReviewProduct').value);
            const author = document.getElementById('reviewAuthor').value.trim();
            const rating = parseInt(document.getElementById('reviewRating').value);
            const text = document.getElementById('reviewText').value.trim();
            
            if (!productId || !author || !rating || !text) {
                showNotification('Заполните все поля');
                return;
            }
            
            if (rating < 1 || rating > 5) {
                showNotification('Рейтинг должен быть от 1 до 5');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Товар не найден');
                return;
            }
            
            // Инициализируем массив отзывов если его нет
            if (!product.reviews) {
                product.reviews = [];
            }
            
            // Добавляем отзыв
            const newReview = {
                id: Date.now(),
                author: author,
                rating: rating,
                date: new Date().toISOString(),
                text: text
            };
            
            product.reviews.push(newReview);
            
            // Обновляем количество отзывов и рейтинг
            product.reviewsCount = product.reviews.length;
            
            // Пересчитываем средний рейтинг
            const totalRating = product.reviews.reduce((sum, review) => sum + review.rating, 0);
            product.rating = parseFloat((totalRating / product.reviewsCount).toFixed(1));
            
            // Сохраняем изменения
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            // Очищаем форму
            document.getElementById('reviewAuthor').value = '';
            document.getElementById('reviewRating').value = '';
            document.getElementById('reviewText').value = '';
            
            showNotification(`Отзыв добавлен к товару "${product.name}"`);
        }

        function viewProductReviews() {
            const productId = parseInt(document.getElementById('adminReviewProduct').value);
            
            if (!productId) {
                showNotification('Выберите товар');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Товар не найден');
                return;
            }
            
            const reviews = product.reviews || [];
            
            let html = `<h3>Отзывы товара: ${product.name}</h3>`;
            
            if (reviews.length === 0) {
                html += '<p>Отзывов пока нет</p>';
            } else {
                html += '<div style="max-height: 400px; overflow-y: auto;">';
                reviews.forEach(review => {
                    html += `
                        <div style="border: 1px solid var(--border); border-radius: 8px; padding: 10px; margin-bottom: 10px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px;">
                                <strong>${review.author}</strong>
                                <div style="color: #FFD700;">
                                    ${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}
                                </div>
                            </div>
                            <div style="font-size: 12px; color: var(--gray); margin-bottom: 5px;">
                                ${new Date(review.date).toLocaleDateString('ru-RU')}
                            </div>
                            <div>${review.text}</div>
                            <button onclick="deleteReview(${productId}, ${review.id})" 
                                    style="background: var(--secondary); color: white; border: none; border-radius: 4px; padding: 4px 8px; margin-top: 5px; cursor: pointer;">
                                Удалить отзыв
                            </button>
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            document.getElementById('reviewsList').innerHTML = html;
            document.getElementById('reviewsModal').classList.add('active');
        }

        function deleteReview(productId, reviewId) {
            if (!confirm('Удалить этот отзыв?')) return;
            
            const product = products.find(p => p.id === productId);
            if (!product || !product.reviews) return;
            
            product.reviews = product.reviews.filter(r => r.id !== reviewId);
            product.reviewsCount = product.reviews.length;
            
            // Пересчитываем рейтинг
            if (product.reviews.length > 0) {
                const totalRating = product.reviews.reduce((sum, review) => sum + review.rating, 0);
                product.rating = parseFloat((totalRating / product.reviews.length).toFixed(1));
            } else {
                product.rating = 0;
            }
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            viewProductReviews();
            showNotification('Отзыв удален');
        }

        function closeReviewsModal() {
            document.getElementById('reviewsModal').classList.remove('active');
        }

        function addBulkProducts() {
            const categoryId = document.getElementById('adminBulkCategory').value;
            const bulkText = document.getElementById('bulkProducts').value.trim();
            
            if (!categoryId || !bulkText) {
                showNotification('Выберите категорию и введите данные');
                return;
            }
            
            if (!categories[categoryId]) {
                showNotification('Категория не найдена');
                return;
            }
            
            try {
                // Парсим JSON (используем одинарные кавычки в примере, заменяем их на двойные)
                const jsonText = bulkText.replace(/'/g, '"');
                const productsData = JSON.parse(jsonText);
                
                if (!Array.isArray(productsData)) {
                    throw new Error('Данные должны быть массивом');
                }
                
                let addedCount = 0;
                let skippedCount = 0;
                
                productsData.forEach(productData => {
                    // Проверяем обязательные поля
                    if (!productData.name || !productData.price) {
                        skippedCount++;
                        return;
                    }
                    
                    // Создаем ID для нового товара
                    const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                    
                    // Создаем полный объект товара
                    const newProduct = {
                        id: newId,
                        name: productData.name,
                        brand: productData.brand || 'UNICORN',
                        price: parseInt(productData.price),
                        oldPrice: productData.oldPrice ? parseInt(productData.oldPrice) : Math.round(productData.price * 1.2),
                        discount: productData.discount || Math.floor(Math.random() * 30) + 10,
                        category: categoryId,
                        image: productData.image || 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80',
                        images: [productData.image || 'https://images.unsplash.com/photo-1490481651871-ab68de25d43d?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80'],
                        description: productData.description || productData.name,
                        characteristics: productData.characteristics || {
                            "Материал": "Хлопок 100%",
                            "Производство": "Россия",
                            "Гарантия": "30 дней"
                        },
                        sizes: productData.sizes || ["S", "M", "L", "XL"],
                        availableSizes: productData.availableSizes || ["S", "M", "L"],
                        materials: productData.materials || "Хлопок 100%",
                        colors: productData.colors || ["Черный", "Белый", "Серый"],
                        rating: 4.5,
                        reviewsCount: 0,
                        inStock: true,
                        deliveryTime: "1-3 дня",
                        warranty: "30 дней",
                        reviews: []
                    };
                    
                    products.push(newProduct);
                    addedCount++;
                });
                
                saveProducts();
                
                // Синхронизируем с облаком
                syncToCloud();
                
                loadAdminData();
                
                showNotification(`Добавлено ${addedCount} товаров. Пропущено: ${skippedCount}`);
                
                // Очищаем текстовое поле
                document.getElementById('bulkProducts').value = '';
                
            } catch (error) {
                console.error('Ошибка парсинга JSON:', error);
                showNotification('Ошибка формата данных. Проверьте синтаксис JSON');
            }
        }

        function loadProductSizes(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Показываем секцию управления размерами
            document.getElementById('sizeManagementSection').style.display = 'block';
            
            // Заполняем список доступных размеров
            const sizesList = document.getElementById('availableSizesList');
            const sizes = product.sizes || [];
            const availableSizes = product.availableSizes || [];
            
            let html = '<div class="size-list">';
            
            if (sizes.length === 0) {
                html += '<p>Размеры не указаны</p>';
            } else {
                sizes.forEach(size => {
                    const isAvailable = availableSizes.includes(size);
                    html += `
                        <div class="size-tag" style="background: ${isAvailable ? '#e8f5e9' : '#ffe6e6'}">
                            ${size}
                            <span class="remove-size" onclick="removeSizeFromList(${productId}, '${size}')">
                                <i class="fas fa-times"></i>
                            </span>
                        </div>
                    `;
                });
            }
            
            html += '</div>';
            sizesList.innerHTML = html;
        }

        function addProductSize() {
            const productId = parseInt(document.getElementById('adminProductManage').value);
            const newSize = document.getElementById('newSize').value.trim();
            
            if (!productId || !newSize) {
                showNotification('Выберите товар и введите размер');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Товар не найден');
                return;
            }
            
            // Инициализируем массивы если их нет
            if (!product.sizes) product.sizes = [];
            if (!product.availableSizes) product.availableSizes = [];
            
            // Проверяем, есть ли уже такой размер
            if (product.sizes.includes(newSize)) {
                showNotification('Этот размер уже существует');
                return;
            }
            
            // Добавляем размер
            product.sizes.push(newSize);
            product.availableSizes.push(newSize);
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductSizes(productId);
            
            document.getElementById('newSize').value = '';
            showNotification(`Размер "${newSize}" добавлен`);
        }

        function removeProductSize() {
            const productId = parseInt(document.getElementById('adminProductManage').value);
            const sizeToRemove = document.getElementById('removeSize').value.trim();
            
            if (!productId || !sizeToRemove) {
                showNotification('Выберите товар и введите размер');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product || !product.sizes) {
                showNotification('Товар не найден или размеры не указаны');
                return;
            }
            
            // Удаляем размер из обоих массивов
            product.sizes = product.sizes.filter(s => s !== sizeToRemove);
            if (product.availableSizes) {
                product.availableSizes = product.availableSizes.filter(s => s !== sizeToRemove);
            }
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductSizes(productId);
            
            document.getElementById('removeSize').value = '';
            showNotification(`Размер "${sizeToRemove}" удален`);
        }

        function removeSizeFromList(productId, size) {
            if (!confirm(`Удалить размер ${size}?`)) return;
            
            const product = products.find(p => p.id === productId);
            if (!product || !product.sizes) return;
            
            product.sizes = product.sizes.filter(s => s !== size);
            if (product.availableSizes) {
                product.availableSizes = product.availableSizes.filter(s => s !== size);
            }
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductSizes(productId);
            showNotification(`Размер "${size}" удален`);
        }

        function applySizeRules() {
            const hideSizes = document.getElementById('hideSizesForAccessories').checked;
            
            // Обновляем все товары в категории аксессуары
            const accessoryProducts = products.filter(p => p.category === 'accessories');
            
            accessoryProducts.forEach(product => {
                if (hideSizes) {
                    // Удаляем размеры у аксессуаров
                    product.sizes = [];
                    product.availableSizes = [];
                } else {
                    // Добавляем стандартные размеры если их нет
                    if (!product.sizes || product.sizes.length === 0) {
                        product.sizes = ['OSFA', 'Универсальный'];
                        product.availableSizes = ['OSFA', 'Универсальный'];
                    }
                }
            });
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            // Перезагружаем данные если нужно
            const selectedProductId = parseInt(document.getElementById('adminProductManage').value);
            if (selectedProductId) {
                const selectedProduct = products.find(p => p.id === selectedProductId);
                if (selectedProduct && selectedProduct.category === 'accessories') {
                    loadProductSizes(selectedProductId);
                }
            }
            
            showNotification(`Правило для аксессуаров ${hideSizes ? 'применено' : 'отключено'}`);
        }

        function loadProductCharacteristics(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            // Показываем секцию управления характеристиками
            document.getElementById('characteristicManagement').style.display = 'block';
            
            // Заполняем список характеристик
            const charList = document.getElementById('characteristicsList');
            const characteristics = product.characteristics || {};
            
            let html = '<div class="char-list">';
            
            if (Object.keys(characteristics).length === 0) {
                html += '<p>Характеристики не указаны</p>';
            } else {
                Object.entries(characteristics).forEach(([key, value]) => {
                    html += `
                        <div class="char-tag">
                            <div>
                                <strong>${key}:</strong> ${value}
                            </div>
                            <button onclick="removeCharFromList(${productId}, '${key}')" 
                                    style="background: var(--secondary); color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer;">
                                Удалить
                            </button>
                        </div>
                    `;
                });
            }
            
            html += '</div>';
            charList.innerHTML = html;
        }

        function addCharacteristic() {
            const productId = parseInt(document.getElementById('adminCharProduct').value);
            const charName = document.getElementById('charName').value.trim();
            const charValue = document.getElementById('charValue').value.trim();
            
            if (!productId || !charName || !charValue) {
                showNotification('Заполните все поля');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product) {
                showNotification('Товар не найден');
                return;
            }
            
            // Инициализируем характеристики если их нет
            if (!product.characteristics) {
                product.characteristics = {};
            }
            
            // Добавляем или обновляем характеристику
            product.characteristics[charName] = charValue;
            
            // Сохраняем изменения
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductCharacteristics(productId);
            
            // Очищаем поля
            document.getElementById('charName').value = '';
            document.getElementById('charValue').value = '';
            
            showNotification(`Характеристика "${charName}" добавлена`);
        }

        function removeCharacteristic() {
            const productId = parseInt(document.getElementById('adminCharProduct').value);
            const charName = document.getElementById('removeCharName').value.trim();
            
            if (!productId || !charName) {
                showNotification('Заполните поле');
                return;
            }
            
            const product = products.find(p => p.id === productId);
            if (!product || !product.characteristics) {
                showNotification('Характеристики не найдены');
                return;
            }
            
            if (!product.characteristics[charName]) {
                showNotification('Характеристика не найдена');
                return;
            }
            
            // Удаляем характеристику
            delete product.characteristics[charName];
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductCharacteristics(productId);
            
            document.getElementById('removeCharName').value = '';
            showNotification(`Характеристика "${charName}" удалена`);
        }

        function removeCharFromList(productId, charName) {
            if (!confirm(`Удалить характеристику "${charName}"?`)) return;
            
            const product = products.find(p => p.id === productId);
            if (!product || !product.characteristics) return;
            
            delete product.characteristics[charName];
            
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            loadProductCharacteristics(productId);
            showNotification(`Характеристика "${charName}" удалена`);
        }

        function saveCharacteristics() {
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            showNotification('Характеристики сохранены и синхронизированы');
        }

        function updateCategoryImage() {
            const categoryId = document.getElementById('adminCategorySelect').value;
            const imageUrl = document.getElementById('adminCategoryImage').value.trim();
            
            if (!categoryId || !imageUrl) {
                showNotification('Выберите категорию и введите URL картинки');
                return;
            }
            
            if (!categories[categoryId]) {
                showNotification('Категория не найдена');
                return;
            }
            
            categories[categoryId].image = imageUrl;
            saveCategories();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            showNotification(`Картинка категории "${categories[categoryId].name}" обновлена`);
            
            loadMainCategories();
            loadCategoriesPage();
            loadAdminData();
            
            document.getElementById('adminCategoryImage').value = '';
        }

        function addCategory() {
            const name = document.getElementById('adminNewCategoryName').value.trim();
            const imageUrl = document.getElementById('adminNewCategoryImage').value.trim();
            
            if (!name || !imageUrl) {
                showNotification('Введите название и URL картинки');
                return;
            }
            
            const categoryId = name.toLowerCase()
                .replace(/[^a-z0-9а-яё]/gi, '_')
                .replace(/_+/g, '_')
                .replace(/^_|_$/g, '');
            
            if (categories[categoryId]) {
                showNotification('Категория с таким названием уже существует');
                return;
            }
            
            categories[categoryId] = {
                id: categoryId,
                name: name,
                image: imageUrl,
                description: name
            };
            
            saveCategories();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            showNotification(`Категория "${name}" добавлена`);
            
            loadMainCategories();
            loadCategoriesPage();
            loadAdminData();
            
            document.getElementById('adminNewCategoryName').value = '';
            document.getElementById('adminNewCategoryImage').value = '';
        }

        function addProduct() {
            const name = document.getElementById('adminProductName').value.trim();
            const price = parseInt(document.getElementById('adminProductPrice').value);
            const categoryId = document.getElementById('adminProductCategory').value;
            const imageUrl = document.getElementById('adminProductImage').value.trim();
            const description = document.getElementById('adminProductDescription').value.trim();
            
            if (!name || !price || !categoryId || !imageUrl) {
                showNotification('Заполните все обязательные поля');
                return;
            }
            
            if (!categories[categoryId]) {
                showNotification('Выбранная категория не существует');
                return;
            }
            
            const productId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
            
            const newProduct = {
                id: productId,
                name: name,
                brand: 'UNICORN',
                price: price,
                oldPrice: Math.round(price * 1.2),
                discount: Math.floor(Math.random() * 30) + 10,
                category: categoryId,
                image: imageUrl,
                images: [imageUrl],
                description: description || name,
                characteristics: {
                    "Материал": "Хлопок 100%",
                    "Производство": "Россия",
                    "Гарантия": "30 дней"
                },
                sizes: ["S", "M", "L", "XL"],
                availableSizes: ["S", "M", "L"],
                materials: "Хлопок 100%",
                colors: ["Черный", "Белый", "Серый"],
                rating: 4.5,
                reviewsCount: 0,
                inStock: true,
                deliveryTime: "1-3 дня",
                warranty: "30 дней",
                reviews: []
            };
            
            products.push(newProduct);
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            showNotification(`Товар "${name}" добавлен (ID: ${productId})`);
            
            document.getElementById('adminProductName').value = '';
            document.getElementById('adminProductPrice').value = '';
            document.getElementById('adminProductCategory').value = '';
            document.getElementById('adminProductImage').value = '';
            document.getElementById('adminProductDescription').value = '';
            
            loadAdminData();
        }

        function deleteProduct() {
            const productId = parseInt(document.getElementById('adminDeleteProduct').value);
            
            if (!productId) {
                showNotification('Выберите товар для удаления');
                return;
            }
            
            const productIndex = products.findIndex(p => p.id === productId);
            if (productIndex === -1) {
                showNotification('Товар не найден');
                return;
            }
            
            const productName = products[productIndex].name;
            products.splice(productIndex, 1);
            saveProducts();
            
            // Синхронизируем с облаком
            syncToCloud();
            
            const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
            Object.values(users).forEach(user => {
                user.favorites = user.favorites.filter(favId => favId !== productId);
                user.cart = user.cart.filter(item => item.id !== productId);
            });
            localStorage.setItem('unicorn_users', JSON.stringify(users));
            
            if (userData) {
                userData.favorites = userData.favorites.filter(favId => favId !== productId);
                userData.cart = userData.cart.filter(item => item.id !== productId);
                saveUserData();
                updateFavoritesBadge();
                updateCartBadge();
            }
            
            showNotification(`Товар "${productName}" удален`);
            
            loadAdminData();
            
            const activePage = document.querySelector('.page.active').id;
            if (activePage === 'home') loadPopularProducts();
            if (activePage === 'favorites') loadFavoritesPage();
            if (activePage === 'cart') loadCartPage();
            if (activePage === 'product-page') {
                if (currentProductId === productId) {
                    goBackFromProduct();
                }
            }
        }

        function createPromoCode() {
            const code = document.getElementById('promoCode').value.trim().toUpperCase();
            const discount = parseInt(document.getElementById('promoDiscount').value);
            const maxUses = parseInt(document.getElementById('promoMaxUses').value) || null;
            const expiry = document.getElementById('promoExpiry').value;
            
            if (!code || !discount || discount < 1 || discount > 100) {
                showNotification('Введите корректный код и скидку (1-100%)');
                return;
            }
            
            const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
            if (promoCodes.some(p => p.code === code)) {
                showNotification('Промокод с таким кодом уже существует');
                return;
            }
            
            const promo = {
                code: code,
                discount: discount,
                maxUses: maxUses,
                expiry: expiry || null,
                created: new Date().toISOString(),
                used: 0,
                usedBy: []
            };
            
            promoCodes.push(promo);
            localStorage.setItem('unicorn_promocodes', JSON.stringify(promoCodes));
            
            showNotification(`Промокод "${code}" создан! Скидка: ${discount}%`);
            
            document.getElementById('promoCode').value = '';
            document.getElementById('promoDiscount').value = '';
            document.getElementById('promoMaxUses').value = '';
            document.getElementById('promoExpiry').value = '';
        }

        function viewPromoCodes() {
            const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
            
            if (promoCodes.length === 0) {
                document.getElementById('promoCodesList').innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--gray);">
                        <i class="fas fa-ticket-alt" style="font-size: 48px; margin-bottom: 16px;"></i>
                        <h3>Промокодов нет</h3>
                        <p>Создайте свой первый промокод</p>
                    </div>
                `;
            } else {
                let html = '<div style="display: flex; flex-direction: column; gap: 10px;">';
                
                promoCodes.forEach(promo => {
                    const created = new Date(promo.created);
                    const expiry = promo.expiry ? new Date(promo.expiry) : null;
                    const isExpired = expiry && expiry < new Date();
                    
                    html += `
                        <div style="border: 1px solid var(--border); border-radius: 8px; padding: 15px; background: ${isExpired ? '#ffe6e6' : '#e6ffe6'}">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                <div>
                                    <strong style="font-size: 16px;">${promo.code}</strong>
                                    <span style="background: var(--primary); color: white; padding: 2px 8px; border-radius: 12px; font-size: 12px; margin-left: 8px;">
                                        ${promo.discount}% скидка
                                    </span>
                                </div>
                                <button onclick="deletePromoCode('${promo.code}')" style="background: var(--secondary); color: white; border: none; border-radius: 4px; padding: 4px 8px; cursor: pointer;">
                                    Удалить
                                </button>
                            </div>
                            <div style="font-size: 13px; color: var(--gray);">
                                <div>Создан: ${created.toLocaleDateString('ru-RU')}</div>
                                <div>Использован: ${promo.used || 0} раз ${promo.maxUses ? `из ${promo.maxUses}` : ''}</div>
                                ${expiry ? `<div>Действует до: ${expiry.toLocaleDateString('ru-RU')} ${isExpired ? ' (ИСТЕК)' : ''}</div>` : ''}
                                ${promo.usedBy && promo.usedBy.length > 0 ? `<div>Использовали: ${promo.usedBy.length} пользователей</div>` : ''}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                document.getElementById('promoCodesList').innerHTML = html;
            }
            
            document.getElementById('promoCodesModal').classList.add('active');
        }

        function deletePromoCode(code) {
            if (confirm(`Удалить промокод "${code}"?`)) {
                const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
                const filtered = promoCodes.filter(p => p.code !== code);
                localStorage.setItem('unicorn_promocodes', JSON.stringify(filtered));
                showNotification(`Промокод "${code}" удален`);
                viewPromoCodes();
            }
        }

        function clearExpiredPromos() {
            const promoCodes = JSON.parse(localStorage.getItem('unicorn_promocodes')) || [];
            const now = new Date();
            const validPromos = promoCodes.filter(promo => {
                if (!promo.expiry) return true;
                return new Date(promo.expiry) > now;
            });
            
            if (validPromos.length === promoCodes.length) {
                showNotification('Нет истекших промокодов');
                return;
            }
            
            localStorage.setItem('unicorn_promocodes', JSON.stringify(validPromos));
            showNotification(`Удалено ${promoCodes.length - validPromos.length} истекших промокодов`);
            viewPromoCodes();
        }

        function closePromoCodesModal() {
            document.getElementById('promoCodesModal').classList.remove('active');
        }

        function viewAllUsers() {
            const users = JSON.parse(localStorage.getItem('unicorn_users')) || {};
            
            if (Object.keys(users).length === 0) {
                document.getElementById('usersList').innerHTML = `
                    <div style="text-align: center; padding: 20px; color: var(--gray);">
                        <i class="fas fa-users" style="font-size: 48px; margin-bottom: 16px;"></i>
                        <h3>Пользователей нет</h3>
                    </div>
                `;
            } else {
                let html = '<div style="display: flex; flex-direction: column; gap: 10px;">';
                
                Object.values(users).forEach(user => {
                    const created = new Date(user.createdAt);
                    const lastActive = new Date(user.lastActive);
                    
                    html += `
                        <div style="border: 1px solid var(--border); border-radius: 8px; padding: 15px;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 10px;">
                                <div>
                                    <strong style="font-size: 16px;">${user.name}</strong>
                                    <div style="font-size: 12px; color: var(--gray); margin-top: 2px;">ID: ${user.id}</div>
                                </div>
                                <div style="text-align: right;">
                                    <div style="font-size: 12px; color: var(--gray);">${user.telegramUsername ? `@${user.telegramUsername}` : ''}</div>
                                </div>
                            </div>
                            <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; font-size: 13px; color: var(--gray);">
                                <div>
                                    <div>Заказов: ${user.orders.length}</div>
                                    <div>Избранное: ${user.favorites.length}</div>
                                </div>
                                <div>
                                    <div>Создан: ${created.toLocaleDateString('ru-RU')}</div>
                                    <div>Был активен: ${lastActive.toLocaleDateString('ru-RU')}</div>
                                </div>
                            </div>
                            ${user.phone ? `<div style="margin-top: 5px;">📱 ${user.phone}</div>` : ''}
                        </div>
                    `;
                });
                
                html += '</div>';
                document.getElementById('usersList').innerHTML = html;
            }
            
            document.getElementById('usersModal').classList.add('active');
        }

        function closeUsersModal() {
            document.getElementById('usersModal').classList.remove('active');
        }

        function exportData() {
            const data = {
                categories: categories,
                products: products,
                users: JSON.parse(localStorage.getItem('unicorn_users')) || {},
                orders: JSON.parse(localStorage.getItem('unicorn_all_orders')) || [],
                promoCodes: JSON.parse(localStorage.getItem('unicorn_promocodes')) || [],
                timestamp: new Date().toISOString()
            };
            
            const dataStr = JSON.stringify(data, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `unicorn_backup_${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Данные экспортированы');
        }

        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.onchange = async (e) => {
                const file = e.target.files[0];
                if (!file) return;
                
                try {
                    const text = await file.text();
                    const data = JSON.parse(text);
                    
                    if (!data.categories || !data.products) {
                        throw new Error('Неверный формат файла');
                    }
                    
                    if (confirm('Внимание! Это заменит все текущие данные. Продолжить?')) {
                        categories = data.categories;
                        products = data.products;
                        
                        if (data.users) {
                            localStorage.setItem('unicorn_users', JSON.stringify(data.users));
                        }
                        
                        if (data.orders) {
                            localStorage.setItem('unicorn_all_orders', JSON.stringify(data.orders));
                        }
                        
                        if (data.promoCodes) {
                            localStorage.setItem('unicorn_promocodes', JSON.stringify(data.promoCodes));
                        }
                        
                        saveCategories();
                        saveProducts();
                        
                        // Синхронизируем с облаком
                        syncToCloud();
                        
                        showNotification('Данные импортированы и синхронизированы с облаком');
                        
                        loadMainCategories();
                        loadPopularProducts();
                        loadAdminData();
                        
                        if (userData) {
                            userData = getUserData(currentUserId);
                            updateProfileUI();
                            updateCartBadge();
                            updateFavoritesBadge();
                        }
                    }
                } catch (error) {
                    console.error('Ошибка импорта:', error);
                    showNotification('Ошибка импорта данных');
                }
            };
            
            input.click();
        }

        function resetData() {
            if (confirm('ВНИМАНИЕ! Это удалит ВСЕ данные (категории, товары, пользователей, заказы). Продолжить?')) {
                const currentSession = {
                    userId: currentUserId,
                    telegramUsername: telegramUsername,
                    telegramFirstName: telegramFirstName,
                    telegramLastName: telegramLastName,
                    telegramUserId: telegramUserId,
                    cart: userData.cart,
                    favorites: userData.favorites
                };
                
                localStorage.clear();
                
                localStorage.setItem('unicorn_session', JSON.stringify(currentSession));
                
                categories = JSON.parse(JSON.stringify(defaultCategories));
                products = JSON.parse(JSON.stringify(defaultProducts));
                
                localStorage.setItem('unicorn_categories', JSON.stringify(categories));
                localStorage.setItem('unicorn_products', JSON.stringify(products));
                
                if (currentUserId) {
                    userData = createNewUserData(currentUserId);
                    userData.cart = currentSession.cart || [];
                    userData.favorites = currentSession.favorites || [];
                    saveUserData();
                }
                
                showNotification('Все данные сброшены, ваша корзина сохранена');
                
                loadMainCategories();
                loadPopularProducts();
                loadAdminData();
                updateProfileUI();
                updateCartBadge();
                updateFavoritesBadge();
            }
        }

        function exportUserData() {
            const userDataToExport = {
                ...userData,
                password: undefined
            };
            
            const dataStr = JSON.stringify(userDataToExport, null, 2);
            const dataBlob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(dataBlob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = `unicorn_user_${currentUserId}_${Date.now()}.json`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            showNotification('Ваши данные экспортированы');
        }

        function clearUserData() {
            if (confirm('Вы уверены? Это удалит ваши избранное, корзину и историю просмотров.')) {
                userData.favorites = [];
                userData.cart = [];
                userData.viewed = [];
                activePromoCode = null;
                saveUserData();
                
                updateFavoritesBadge();
                updateCartBadge();
                updateProfileUI();
                
                showNotification('Ваши данные очищены');
            }
        }

        function changeUserName() {
            const newName = prompt('Введите новое имя:', userData.name);
            if (newName && newName.trim()) {
                userData.name = newName.trim();
                saveUserData();
                updateProfileUI();
                showNotification('Имя изменено');
            }
        }

        // Modal functions
        function openPhoneModal() {
            const phone = prompt('Введите ваш номер телефона:', userData.phone || '');
            if (phone !== null) {
                userData.phone = phone.trim();
                saveUserData();
                updateProfileUI();
                showNotification('Номер телефона сохранен');
            }
        }

        function openAddressModal() {
            const address = prompt('Введите ваш адрес:', userData.address || '');
            if (address !== null) {
                userData.address = address.trim();
                saveUserData();
                updateProfileUI();
                showNotification('Адрес сохранен');
            }
        }

        function openCustomsModal() {
            showNotification('Функция в разработке');
        }

        function openInviteModal() {
            const inviteLink = `${window.location.origin}${window.location.pathname}#profile-${encodeURIComponent(currentUserId)}`;
            if (navigator.share) {
                navigator.share({
                    title: 'UNICORN Shop',
                    text: 'Привет! Заходи в мой магазин одежды и обуви UNICORN!',
                    url: inviteLink
                }).catch(() => {
                    copyToClipboard(inviteLink);
                });
            } else {
                copyToClipboard(inviteLink);
            }
        }

        function copyToClipboard(text) {
            navigator.clipboard.writeText(text)
                .then(() => showNotification('Ссылка скопирована в буфер обмена'))
                .catch(() => {
                    const textarea = document.createElement('textarea');
                    textarea.value = text;
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    showNotification('Ссылка скопирована в буфер обмена');
                });
        }

        function showNotification(message) {
            const notification = document.getElementById('notification');
            notification.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 3000);
        }

        function showLoading(show) {
            const overlay = document.getElementById('loadingOverlay');
            if (overlay) {
                overlay.style.display = show ? 'flex' : 'none';
            }
        }

        function checkForPromotions() {
            // Простая проверка акций - можно расширить
            const now = new Date();
            const day = now.getDay();
            const hour = now.getHours();
            
            if (day === 6 || day === 0) {
                showNotification('🎉 Выходные скидки до 30%!');
            } else if (hour >= 9 && hour <= 12) {
                showNotification('☀️ Утренняя распродажа! Скидки на все товары!');
            }
        }

        // Инициализация Telegram Web App
        function initTelegramWebApp() {
            if (window.Telegram && window.Telegram.WebApp) {
                const tg = window.Telegram.WebApp;
                
                tg.expand();
                
                const user = tg.initDataUnsafe.user;
                if (user) {
                    console.log('Telegram данные получены:', user);
                    
                    if (user.username) {
                        telegramUsername = user.username;
                        localStorage.setItem('unicorn_telegramUsername', user.username);
                    }
                    if (user.first_name) {
                        telegramFirstName = user.first_name;
                        localStorage.setItem('unicorn_telegramFirstName', user.first_name);
                    }
                    if (user.last_name) {
                        telegramLastName = user.last_name;
                        localStorage.setItem('unicorn_telegramLastName', user.last_name);
                    }
                    if (user.id) {
                        telegramUserId = user.id.toString();
                        localStorage.setItem('unicorn_telegramId', telegramUserId);
                    }
                    
                    if (telegramUserId) {
                        window.location.hash = `profile-${telegramUserId}`;
                    }
                    
                    if (isInitialized) {
                        userData = getUserData(currentUserId);
                        
                        updateProfileUI();
                        updateCartBadge();
                        updateFavoritesBadge();
                        
                        const wasAdmin = isAdmin;
                        isAdmin = checkAdminRights();
                        
                        if (wasAdmin !== isAdmin) {
                            checkAndShowAdminButton();
                            if (isAdmin) {
                                showNotification('✅ Вы вошли как администратор');
                            }
                        }
                    }
                }
                
                console.log('Telegram Web App инициализирован');
                
                if (user && (user.id.toString() === ADMIN_USER_ID || user.username === 'barizhka')) {
                    isAdmin = true;
                    checkAndShowAdminButton();
                    console.log('Telegram администратор обнаружен');
                }
            } else {
                console.log('Telegram Web App не обнаружен, работаем в обычном режиме');
                
                if (currentUserId === ADMIN_USER_ID) {
                    isAdmin = true;
                    checkAndShowAdminButton();
                    console.log('Администратор по ID активирован в режиме отладки');
                }
            }
        }

        // Инициализация при загрузке страницы
        document.addEventListener('DOMContentLoaded', async function() {
            if (window.Telegram && window.Telegram.WebApp) {
                initTelegramWebApp();
            } else {
                const script = document.createElement('script');
                script.src = 'https://telegram.org/js/telegram-web-app.js';
                script.onload = function() {
                    console.log('Telegram Web App скрипт загружен');
                    initTelegramWebApp();
                };
                script.onerror = function() {
                    console.log('Не удалось загрузить Telegram Web App скрипт');
                };
                document.head.appendChild(script);
            }
            
            // Инициализируем приложение
            await initApp();
        });

        window.addEventListener('error', function(e) {
            if (e.target.tagName === 'IMG') {
                e.target.src = 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 400 400"><rect width="400" height="400" fill="%238A2BE2"/><text x="200" y="200" font-family="Inter" font-size="24" fill="white" text-anchor="middle" dy=".3em">Изображение</text></svg>';
                e.target.onerror = null;
            }
        }, true);

        window.addEventListener('beforeunload', function() {
            saveUserData();
        });
    </script>
</body>
</html>
